!function(t,e){"function"==typeof define&&define.amd?define("Chartist",[],function(){return t.Chartist=e()}):"object"==typeof module&&module.exports?module.exports=e():t.Chartist=e()}(this,function(){var t={version:"0.11.4"};return function(t,g){"use strict";var u=t.window,p=t.document;g.namespaces={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},g.noop=function(t){return t},g.alphaNumerate=function(t){return String.fromCharCode(97+t%26)},g.extend=function(t){var e,n,i;for(t=t||{},e=1;e<arguments.length;e++)for(var r in n=arguments[e])"object"!=typeof(i=n[r])||null===i||i instanceof Array?t[r]=i:t[r]=g.extend(t[r],i);return t},g.replaceAll=function(t,e,n){return t.replace(new RegExp(e,"g"),n)},g.ensureUnit=function(t,e){return"number"==typeof t&&(t+=e),t},g.quantity=function(t){if("string"!=typeof t)return{value:t};var e=/^(\d+)\s*(.*)$/g.exec(t);return{value:+e[1],unit:e[2]||void 0}},g.querySelector=function(t){return t instanceof Node?t:p.querySelector(t)},g.times=function(t){return Array.apply(null,new Array(t))},g.sum=function(t,e){return t+(e||0)},g.mapMultiply=function(e){return function(t){return t*e}},g.mapAdd=function(e){return function(t){return t+e}},g.serialMap=function(i,r){var o=[],t=Math.max.apply(null,i.map(function(t){return t.length}));return g.times(t).forEach(function(t,e){var n=i.map(function(t){return t[e]});o[e]=r.apply(null,n)}),o},g.roundWithPrecision=function(t,e){var n=Math.pow(10,e||g.precision);return Math.round(t*n)/n},g.precision=8,g.escapingMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},g.serialize=function(t){return null==t?t:("number"==typeof t?t=""+t:"object"==typeof t&&(t=JSON.stringify({data:t})),Object.keys(g.escapingMap).reduce(function(t,e){return g.replaceAll(t,e,g.escapingMap[e])},t))},g.deserialize=function(t){if("string"!=typeof t)return t;t=Object.keys(g.escapingMap).reduce(function(t,e){return g.replaceAll(t,g.escapingMap[e],e)},t);try{t=void 0!==(t=JSON.parse(t)).data?t.data:t}catch(t){}return t},g.createSvg=function(e,t,n,i){var r;return t=t||"100%",n=n||"100%",Array.prototype.slice.call(e.querySelectorAll("svg")).filter(function(t){return t.getAttributeNS(g.namespaces.xmlns,"ct")}).forEach(function(t){e.removeChild(t)}),(r=new g.Svg("svg").attr({width:t,height:n}).addClass(i))._node.style.width=t,r._node.style.height=n,e.appendChild(r._node),r},g.normalizeData=function(t,e,n){var i,r={raw:t,normalized:{}};return r.normalized.series=g.getDataArray({series:t.series||[]},e,n),i=r.normalized.series.every(function(t){return t instanceof Array})?Math.max.apply(null,r.normalized.series.map(function(t){return t.length})):r.normalized.series.length,r.normalized.labels=(t.labels||[]).slice(),Array.prototype.push.apply(r.normalized.labels,g.times(Math.max(0,i-r.normalized.labels.length)).map(function(){return""})),e&&g.reverseData(r.normalized),r},g.safeHasProperty=function(t,e){return null!==t&&"object"==typeof t&&t.hasOwnProperty(e)},g.isDataHoleValue=function(t){return null==t||"number"==typeof t&&isNaN(t)},g.reverseData=function(t){t.labels.reverse(),t.series.reverse();for(var e=0;e<t.series.length;e++)"object"==typeof t.series[e]&&void 0!==t.series[e].data?t.series[e].data.reverse():t.series[e]instanceof Array&&t.series[e].reverse()},g.getDataArray=function(t,e,i){return t.series.map(function t(e){if(g.safeHasProperty(e,"value"))return t(e.value);if(g.safeHasProperty(e,"data"))return t(e.data);if(e instanceof Array)return e.map(t);if(!g.isDataHoleValue(e)){if(i){var n={};return"string"==typeof i?n[i]=g.getNumberOrUndefined(e):n.y=g.getNumberOrUndefined(e),n.x=e.hasOwnProperty("x")?g.getNumberOrUndefined(e.x):n.x,n.y=e.hasOwnProperty("y")?g.getNumberOrUndefined(e.y):n.y,n}return g.getNumberOrUndefined(e)}})},g.normalizePadding=function(t,e){return e=e||0,"number"==typeof t?{top:t,right:t,bottom:t,left:t}:{top:"number"==typeof t.top?t.top:e,right:"number"==typeof t.right?t.right:e,bottom:"number"==typeof t.bottom?t.bottom:e,left:"number"==typeof t.left?t.left:e}},g.getMetaData=function(t,e){var n=t.data?t.data[e]:t[e];return n?n.meta:void 0},g.orderOfMagnitude=function(t){return Math.floor(Math.log(Math.abs(t))/Math.LN10)},g.projectLength=function(t,e,n){return e/n.range*t},g.getAvailableHeight=function(t,e){return Math.max((g.quantity(e.height).value||t.height())-(e.chartPadding.top+e.chartPadding.bottom)-e.axisX.offset,0)},g.getHighLow=function(t,e,r){var o={high:void 0===(e=g.extend({},e,r?e["axis"+r.toUpperCase()]:{})).high?-Number.MAX_VALUE:+e.high,low:void 0===e.low?Number.MAX_VALUE:+e.low},a=void 0===e.high,l=void 0===e.low;return(a||l)&&function t(e){if(void 0!==e)if(e instanceof Array)for(var n=0;n<e.length;n++)t(e[n]);else{var i=r?+e[r]:+e;a&&i>o.high&&(o.high=i),l&&i<o.low&&(o.low=i)}}(t),!e.referenceValue&&0!==e.referenceValue||(o.high=Math.max(e.referenceValue,o.high),o.low=Math.min(e.referenceValue,o.low)),o.high<=o.low&&(0===o.low?o.high=1:o.low<0?o.high=0:(0<o.high||(o.high=1),o.low=0)),o},g.isNumeric=function(t){return null!==t&&isFinite(t)},g.isFalseyButZero=function(t){return!t&&0!==t},g.getNumberOrUndefined=function(t){return g.isNumeric(t)?+t:void 0},g.isMultiValue=function(t){return"object"==typeof t&&("x"in t||"y"in t)},g.getMultiValue=function(t,e){return g.isMultiValue(t)?g.getNumberOrUndefined(t[e||"y"]):g.getNumberOrUndefined(t)},g.rho=function(t){if(1===t)return t;function n(t,e){return t%e==0?e:n(e,t%e)}function e(t){return t*t+1}var i,r=2,o=2;if(t%2==0)return 2;for(;r=e(r)%t,o=e(e(o))%t,1===(i=n(Math.abs(r-o),t)););return i},g.getBounds=function(t,e,n,i){var r,o,a,l=0,s={high:e.high,low:e.low};s.valueRange=s.high-s.low,s.oom=g.orderOfMagnitude(s.valueRange),s.step=Math.pow(10,s.oom),s.min=Math.floor(s.low/s.step)*s.step,s.max=Math.ceil(s.high/s.step)*s.step,s.range=s.max-s.min,s.numberOfSteps=Math.round(s.range/s.step);var u=g.projectLength(t,s.step,s)<n,c=i?g.rho(s.range):0;if(i&&g.projectLength(t,1,s)>=n)s.step=1;else if(i&&c<s.step&&g.projectLength(t,c,s)>=n)s.step=c;else for(;;){if(u&&g.projectLength(t,s.step,s)<=n)s.step*=2;else{if(u||!(g.projectLength(t,s.step/2,s)>=n))break;if(s.step/=2,i&&s.step%1!=0){s.step*=2;break}}if(1e3<l++)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}var h=2221e-19;function d(t,e){return t===(t+=e)&&(t*=1+(0<e?h:-h)),t}for(s.step=Math.max(s.step,h),o=s.min,a=s.max;o+s.step<=s.low;)o=d(o,s.step);for(;a-s.step>=s.high;)a=d(a,-s.step);s.min=o,s.max=a,s.range=s.max-s.min;var f=[];for(r=s.min;r<=s.max;r=d(r,s.step)){var p=g.roundWithPrecision(r);p!==f[f.length-1]&&f.push(p)}return s.values=f,s},g.polarToCartesian=function(t,e,n,i){var r=(i-90)*Math.PI/180;return{x:t+n*Math.cos(r),y:e+n*Math.sin(r)}},g.createChartRect=function(t,e,n){var i=!(!e.axisX&&!e.axisY),r=i?e.axisY.offset:0,o=i?e.axisX.offset:0,a=t.width()||g.quantity(e.width).value||0,l=t.height()||g.quantity(e.height).value||0,s=g.normalizePadding(e.chartPadding,n);a=Math.max(a,r+s.left+s.right),l=Math.max(l,o+s.top+s.bottom);var u={padding:s,width:function(){return this.x2-this.x1},height:function(){return this.y1-this.y2}};return i?("start"===e.axisX.position?(u.y2=s.top+o,u.y1=Math.max(l-s.bottom,u.y2+1)):(u.y2=s.top,u.y1=Math.max(l-s.bottom-o,u.y2+1)),"start"===e.axisY.position?(u.x1=s.left+r,u.x2=Math.max(a-s.right,u.x1+1)):(u.x1=s.left,u.x2=Math.max(a-s.right-r,u.x1+1))):(u.x1=s.left,u.x2=Math.max(a-s.right,u.x1+1),u.y2=s.top,u.y1=Math.max(l-s.bottom,u.y2+1)),u},g.createGrid=function(t,e,n,i,r,o,a,l){var s={};s[n.units.pos+"1"]=t,s[n.units.pos+"2"]=t,s[n.counterUnits.pos+"1"]=i,s[n.counterUnits.pos+"2"]=i+r;var u=o.elem("line",s,a.join(" "));l.emit("draw",g.extend({type:"grid",axis:n,index:e,group:o,element:u},s))},g.createGridBackground=function(t,e,n,i){var r=t.elem("rect",{x:e.x1,y:e.y2,width:e.width(),height:e.height()},n,!0);i.emit("draw",{type:"gridBackground",group:t,element:r})},g.createLabel=function(t,e,n,i,r,o,a,l,s,u,c){var h,d={};if(d[r.units.pos]=t+a[r.units.pos],d[r.counterUnits.pos]=a[r.counterUnits.pos],d[r.units.len]=e,d[r.counterUnits.len]=Math.max(0,o-10),u){var f=p.createElement("span");f.className=s.join(" "),f.setAttribute("xmlns",g.namespaces.xhtml),f.innerText=i[n],f.style[r.units.len]=Math.round(d[r.units.len])+"px",f.style[r.counterUnits.len]=Math.round(d[r.counterUnits.len])+"px",h=l.foreignObject(f,g.extend({style:"overflow: visible;"},d))}else h=l.elem("text",d,s.join(" ")).text(i[n]);c.emit("draw",g.extend({type:"label",axis:r,index:n,group:l,element:h,text:i[n]},d))},g.getSeriesOption=function(t,e,n){if(t.name&&e.series&&e.series[t.name]){var i=e.series[t.name];return i.hasOwnProperty(n)?i[n]:e[n]}return e[n]},g.optionsProvider=function(t,n,i){var r,o,a=g.extend({},t),e=[];function l(t){var e=r;if(r=g.extend({},a),n)for(o=0;o<n.length;o++){u.matchMedia(n[o][0]).matches&&(r=g.extend(r,n[o][1]))}i&&t&&i.emit("optionsChanged",{previousOptions:e,currentOptions:r})}if(!u.matchMedia)throw"window.matchMedia not found! Make sure you're using a polyfill.";if(n)for(o=0;o<n.length;o++){var s=u.matchMedia(n[o][0]);s.addListener(l),e.push(s)}return l(),{removeMediaQueryListeners:function(){e.forEach(function(t){t.removeListener(l)})},getCurrentOptions:function(){return g.extend({},r)}}},g.splitIntoSegments=function(t,e,n){n=g.extend({},{increasingX:!1,fillHoles:!1},n);for(var i=[],r=!0,o=0;o<t.length;o+=2)void 0===g.getMultiValue(e[o/2].value)?n.fillHoles||(r=!0):(n.increasingX&&2<=o&&t[o]<=t[o-2]&&(r=!0),r&&(i.push({pathCoordinates:[],valueData:[]}),r=!1),i[i.length-1].pathCoordinates.push(t[o],t[o+1]),i[i.length-1].valueData.push(e[o/2]));return i}}(this||global,t),function(g){"use strict";g.Interpolation={},g.Interpolation.none=function(s){return s=g.extend({},{fillHoles:!1},s),function(t,e){for(var n=new g.Svg.Path,i=!0,r=0;r<t.length;r+=2){var o=t[r],a=t[r+1],l=e[r/2];void 0!==g.getMultiValue(l.value)?(i?n.move(o,a,!1,l):n.line(o,a,!1,l),i=!1):s.fillHoles||(i=!0)}return n}},g.Interpolation.simple=function(h){h=g.extend({},{divisor:2,fillHoles:!1},h);var d=1/Math.max(1,h.divisor);return function(t,e){for(var n,i,r,o=new g.Svg.Path,a=0;a<t.length;a+=2){var l=t[a],s=t[a+1],u=(l-n)*d,c=e[a/2];void 0!==c.value?(void 0===r?o.move(l,s,!1,c):o.curve(n+u,i,l-u,s,l,s,!1,c),n=l,i=s,r=c):h.fillHoles||(n=l=r=void 0)}return o}},g.Interpolation.cardinal=function(u){u=g.extend({},{tension:1,fillHoles:!1},u);var c=Math.min(1,Math.max(0,u.tension)),h=1-c;return function e(t,n){var i=g.splitIntoSegments(t,n,{fillHoles:u.fillHoles});if(i.length){if(1<i.length){var r=[];return i.forEach(function(t){r.push(e(t.pathCoordinates,t.valueData))}),g.Svg.Path.join(r)}if(t=i[0].pathCoordinates,n=i[0].valueData,t.length<=4)return g.Interpolation.none()(t,n);for(var o=(new g.Svg.Path).move(t[0],t[1],!1,n[0]),a=0,l=t.length;a<l-2;a+=2){var s=[{x:+t[a-2],y:+t[a-1]},{x:+t[a],y:+t[a+1]},{x:+t[a+2],y:+t[a+3]},{x:+t[a+4],y:+t[a+5]}];l-4===a?s[3]=s[2]:a||(s[0]={x:+t[a],y:+t[a+1]}),o.curve(c*(-s[0].x+6*s[1].x+s[2].x)/6+h*s[2].x,c*(-s[0].y+6*s[1].y+s[2].y)/6+h*s[2].y,c*(s[1].x+6*s[2].x-s[3].x)/6+h*s[2].x,c*(s[1].y+6*s[2].y-s[3].y)/6+h*s[2].y,s[2].x,s[2].y,!1,n[(a+2)/2])}return o}return g.Interpolation.none()([])}},g.Interpolation.monotoneCubic=function(p){return p=g.extend({},{fillHoles:!1},p),function e(t,n){var i=g.splitIntoSegments(t,n,{fillHoles:p.fillHoles,increasingX:!0});if(i.length){if(1<i.length){var r=[];return i.forEach(function(t){r.push(e(t.pathCoordinates,t.valueData))}),g.Svg.Path.join(r)}if(t=i[0].pathCoordinates,n=i[0].valueData,t.length<=4)return g.Interpolation.none()(t,n);var o,a,l=[],s=[],u=t.length/2,c=[],h=[],d=[],f=[];for(o=0;o<u;o++)l[o]=t[2*o],s[o]=t[2*o+1];for(o=0;o<u-1;o++)d[o]=s[o+1]-s[o],f[o]=l[o+1]-l[o],h[o]=d[o]/f[o];for(c[0]=h[0],c[u-1]=h[u-2],o=1;o<u-1;o++)0===h[o]||0===h[o-1]||0<h[o-1]!=0<h[o]?c[o]=0:(c[o]=3*(f[o-1]+f[o])/((2*f[o]+f[o-1])/h[o-1]+(f[o]+2*f[o-1])/h[o]),isFinite(c[o])||(c[o]=0));for(a=(new g.Svg.Path).move(l[0],s[0],!1,n[0]),o=0;o<u-1;o++)a.curve(l[o]+f[o]/3,s[o]+c[o]*f[o]/3,l[o+1]-f[o]/3,s[o+1]-c[o+1]*f[o]/3,l[o+1],s[o+1],!1,n[o+1]);return a}return g.Interpolation.none()([])}},g.Interpolation.step=function(c){return c=g.extend({},{postpone:!0,fillHoles:!1},c),function(t,e){for(var n,i,r,o=new g.Svg.Path,a=0;a<t.length;a+=2){var l=t[a],s=t[a+1],u=e[a/2];void 0!==u.value?(void 0===r?o.move(l,s,!1,u):(c.postpone?o.line(l,i,!1,r):o.line(n,s,!1,u),o.line(l,s,!1,u)),n=l,i=s,r=u):c.fillHoles||(n=i=r=void 0)}return o}}}((this||global,t)),function(){"use strict";t.EventEmitter=function(){var i=[];return{addEventHandler:function(t,e){i[t]=i[t]||[],i[t].push(e)},removeEventHandler:function(t,e){i[t]&&(e?(i[t].splice(i[t].indexOf(e),1),0===i[t].length&&delete i[t]):delete i[t])},emit:function(e,n){i[e]&&i[e].forEach(function(t){t(n)}),i["*"]&&i["*"].forEach(function(t){t(e,n)})}}}}(this||global),function(o){"use strict";o.Class={extend:function(t,e){var n=e||this.prototype||o.Class,i=Object.create(n);function r(){var t,e=i.constructor||function(){};return t=this===o?Object.create(i):this,e.apply(t,Array.prototype.slice.call(arguments,0)),t}return o.Class.cloneDefinitions(i,t),r.prototype=i,r.super=n,r.extend=this.extend,r},cloneDefinitions:function(){var t=function(t){var e=[];if(t.length)for(var n=0;n<t.length;n++)e.push(t[n]);return e}(arguments),n=t[0];return t.splice(1,t.length-1).forEach(function(e){Object.getOwnPropertyNames(e).forEach(function(t){delete n[t],Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}),n}}}((this||global,t)),function(t,o){"use strict";var a=t.window;o.Base=o.Class.extend({constructor:function(t,e,n,i,r){this.container=o.querySelector(t),this.data=e||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.defaultOptions=n,this.options=i,this.responsiveOptions=r,this.eventEmitter=o.EventEmitter(),this.supportsForeignObject=o.Svg.isSupported("Extensibility"),this.supportsAnimations=o.Svg.isSupported("AnimationEventsAttribute"),this.resizeListener=function(){this.update()}.bind(this),this.container&&(this.container.__chartist__&&this.container.__chartist__.detach(),this.container.__chartist__=this),this.initializeTimeoutId=setTimeout(function(){a.addEventListener("resize",this.resizeListener),this.optionsProvider=o.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.addEventHandler("optionsChanged",function(){this.update()}.bind(this)),this.options.plugins&&this.options.plugins.forEach(function(t){t instanceof Array?t[0](this,t[1]):t(this)}.bind(this)),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=void 0}.bind(this),0)},optionsProvider:void 0,container:void 0,svg:void 0,eventEmitter:void 0,createChart:function(){throw new Error("Base chart type can't be instantiated!")},update:function(t,e,n){return t&&(this.data=t||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),e&&(this.options=o.extend({},n?this.options:this.defaultOptions,e),this.initializeTimeoutId||(this.optionsProvider.removeMediaQueryListeners(),this.optionsProvider=o.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter))),this.initializeTimeoutId||this.createChart(this.optionsProvider.getCurrentOptions()),this},detach:function(){return this.initializeTimeoutId?a.clearTimeout(this.initializeTimeoutId):(a.removeEventListener("resize",this.resizeListener),this.optionsProvider.removeMediaQueryListeners()),this},on:function(t,e){return this.eventEmitter.addEventHandler(t,e),this},off:function(t,e){return this.eventEmitter.removeEventHandler(t,e),this},version:o.version,supportsForeignObject:!1})}(this||global,t),function(t,s){"use strict";var a=t.document;s.Svg=s.Class.extend({constructor:function(t,e,n,i,r){t instanceof Element?this._node=t:(this._node=a.createElementNS(s.namespaces.svg,t),"svg"===t&&this.attr({"xmlns:ct":s.namespaces.ct})),e&&this.attr(e),n&&this.addClass(n),i&&(r&&i._node.firstChild?i._node.insertBefore(this._node,i._node.firstChild):i._node.appendChild(this._node))},attr:function(n,t){return"string"==typeof n?t?this._node.getAttributeNS(t,n):this._node.getAttribute(n):(Object.keys(n).forEach(function(t){if(void 0!==n[t])if(-1!==t.indexOf(":")){var e=t.split(":");this._node.setAttributeNS(s.namespaces[e[0]],t,n[t])}else this._node.setAttribute(t,n[t])}.bind(this)),this)},elem:function(t,e,n,i){return new s.Svg(t,e,n,this,i)},parent:function(){return this._node.parentNode instanceof SVGElement?new s.Svg(this._node.parentNode):null},root:function(){for(var t=this._node;"svg"!==t.nodeName;)t=t.parentNode;return new s.Svg(t)},querySelector:function(t){var e=this._node.querySelector(t);return e?new s.Svg(e):null},querySelectorAll:function(t){var e=this._node.querySelectorAll(t);return e.length?new s.Svg.List(e):null},getNode:function(){return this._node},foreignObject:function(t,e,n,i){if("string"==typeof t){var r=a.createElement("div");r.innerHTML=t,t=r.firstChild}t.setAttribute("xmlns",s.namespaces.xmlns);var o=this.elem("foreignObject",e,n,i);return o._node.appendChild(t),o},text:function(t){return this._node.appendChild(a.createTextNode(t)),this},empty:function(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this},remove:function(){return this._node.parentNode.removeChild(this._node),this.parent()},replace:function(t){return this._node.parentNode.replaceChild(t._node,this._node),t},append:function(t,e){return e&&this._node.firstChild?this._node.insertBefore(t._node,this._node.firstChild):this._node.appendChild(t._node),this},classes:function(){return this._node.getAttribute("class")?this._node.getAttribute("class").trim().split(/\s+/):[]},addClass:function(t){return this._node.setAttribute("class",this.classes(this._node).concat(t.trim().split(/\s+/)).filter(function(t,e,n){return n.indexOf(t)===e}).join(" ")),this},removeClass:function(t){var e=t.trim().split(/\s+/);return this._node.setAttribute("class",this.classes(this._node).filter(function(t){return-1===e.indexOf(t)}).join(" ")),this},removeAllClasses:function(){return this._node.setAttribute("class",""),this},height:function(){return this._node.getBoundingClientRect().height},width:function(){return this._node.getBoundingClientRect().width},animate:function(t,n,l){return void 0===n&&(n=!0),Object.keys(t).forEach(function(a){function e(e,t){var n,i,r,o={};e.easing&&(r=e.easing instanceof Array?e.easing:s.Svg.Easing[e.easing],delete e.easing),e.begin=s.ensureUnit(e.begin,"ms"),e.dur=s.ensureUnit(e.dur,"ms"),r&&(e.calcMode="spline",e.keySplines=r.join(" "),e.keyTimes="0;1"),t&&(e.fill="freeze",o[a]=e.from,this.attr(o),i=s.quantity(e.begin||0).value,e.begin="indefinite"),n=this.elem("animate",s.extend({attributeName:a},e)),t&&setTimeout(function(){try{n._node.beginElement()}catch(t){o[a]=e.to,this.attr(o),n.remove()}}.bind(this),i),l&&n._node.addEventListener("beginEvent",function(){l.emit("animationBegin",{element:this,animate:n._node,params:e})}.bind(this)),n._node.addEventListener("endEvent",function(){l&&l.emit("animationEnd",{element:this,animate:n._node,params:e}),t&&(o[a]=e.to,this.attr(o),n.remove())}.bind(this))}t[a]instanceof Array?t[a].forEach(function(t){e.bind(this)(t,!1)}.bind(this)):e.bind(this)(t[a],n)}.bind(this)),this}}),s.Svg.isSupported=function(t){return a.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#"+t,"1.1")};s.Svg.Easing={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]},s.Svg.List=s.Class.extend({constructor:function(t){var i=this;this.svgElements=[];for(var e=0;e<t.length;e++)this.svgElements.push(new s.Svg(t[e]));Object.keys(s.Svg.prototype).filter(function(t){return-1===["constructor","parent","querySelector","querySelectorAll","replace","append","classes","height","width"].indexOf(t)}).forEach(function(n){i[n]=function(){var e=Array.prototype.slice.call(arguments,0);return i.svgElements.forEach(function(t){s.Svg.prototype[n].apply(t,e)}),i}})}})}(this||global,t),function(l){"use strict";var a={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},n={accuracy:3};function u(t,e,n,i,r,o){var a=l.extend({command:r?t.toLowerCase():t.toUpperCase()},e,o?{data:o}:{});n.splice(i,0,a)}function t(r,o){r.forEach(function(n,i){a[n.command.toLowerCase()].forEach(function(t,e){o(n,t,i,e,r)})})}l.Svg.Path=l.Class.extend({constructor:function(t,e){this.pathElements=[],this.pos=0,this.close=t,this.options=l.extend({},n,e)},position:function(t){return void 0!==t?(this.pos=Math.max(0,Math.min(this.pathElements.length,t)),this):this.pos},remove:function(t){return this.pathElements.splice(this.pos,t),this},move:function(t,e,n,i){return u("M",{x:+t,y:+e},this.pathElements,this.pos++,n,i),this},line:function(t,e,n,i){return u("L",{x:+t,y:+e},this.pathElements,this.pos++,n,i),this},curve:function(t,e,n,i,r,o,a,l){return u("C",{x1:+t,y1:+e,x2:+n,y2:+i,x:+r,y:+o},this.pathElements,this.pos++,a,l),this},arc:function(t,e,n,i,r,o,a,l,s){return u("A",{rx:+t,ry:+e,xAr:+n,lAf:+i,sf:+r,x:+o,y:+a},this.pathElements,this.pos++,l,s),this},scale:function(n,i){return t(this.pathElements,function(t,e){t[e]*="x"===e[0]?n:i}),this},translate:function(n,i){return t(this.pathElements,function(t,e){t[e]+="x"===e[0]?n:i}),this},transform:function(a){return t(this.pathElements,function(t,e,n,i,r){var o=a(t,e,n,i,r);!o&&0!==o||(t[e]=o)}),this},parse:function(t){var e=t.replace(/([A-Za-z])([0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce(function(t,e){return e.match(/[A-Za-z]/)&&t.push([]),t[t.length-1].push(e),t},[]);"Z"===e[e.length-1][0].toUpperCase()&&e.pop();var n=e.map(function(i){var t=i.shift(),e=a[t.toLowerCase()];return l.extend({command:t},e.reduce(function(t,e,n){return t[e]=+i[n],t},{}))}),i=[this.pos,0];return Array.prototype.push.apply(i,n),Array.prototype.splice.apply(this.pathElements,i),this.pos+=n.length,this},stringify:function(){var i=Math.pow(10,this.options.accuracy);return this.pathElements.reduce(function(t,e){var n=a[e.command.toLowerCase()].map(function(t){return this.options.accuracy?Math.round(e[t]*i)/i:e[t]}.bind(this));return t+e.command+n.join(",")}.bind(this),"")+(this.close?"Z":"")},clone:function(t){var e=new l.Svg.Path(t||this.close);return e.pos=this.pos,e.pathElements=this.pathElements.slice().map(function(t){return l.extend({},t)}),e.options=l.extend({},this.options),e},splitByCommand:function(e){var n=[new l.Svg.Path];return this.pathElements.forEach(function(t){t.command===e.toUpperCase()&&0!==n[n.length-1].pathElements.length&&n.push(new l.Svg.Path),n[n.length-1].pathElements.push(t)}),n}}),l.Svg.Path.elementDescriptions=a,l.Svg.Path.join=function(t,e,n){for(var i=new l.Svg.Path(e,n),r=0;r<t.length;r++)for(var o=t[r],a=0;a<o.pathElements.length;a++)i.pathElements.push(o.pathElements[a]);return i}}((this||global,t)),function(t,d){"use strict";t.window,t.document;var r={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};d.Axis=d.Class.extend({constructor:function(t,e,n,i){this.units=t,this.counterUnits=t===r.x?r.y:r.x,this.chartRect=e,this.axisLength=e[t.rectEnd]-e[t.rectStart],this.gridOffset=e[t.rectOffset],this.ticks=n,this.options=i},createGridAndLabels:function(r,o,a,l,s){var u=l["axis"+this.units.pos.toUpperCase()],c=this.ticks.map(this.projectValue.bind(this)),h=this.ticks.map(u.labelInterpolationFnc);c.forEach(function(t,e){var n,i={x:0,y:0};n=c[e+1]?c[e+1]-t:Math.max(this.axisLength-t,30),d.isFalseyButZero(h[e])&&""!==h[e]||("x"===this.units.pos?(t=this.chartRect.x1+t,i.x=l.axisX.labelOffset.x,"start"===l.axisX.position?i.y=this.chartRect.padding.top+l.axisX.labelOffset.y+(a?5:20):i.y=this.chartRect.y1+l.axisX.labelOffset.y+(a?5:20)):(t=this.chartRect.y1-t,i.y=l.axisY.labelOffset.y-(a?n:0),"start"===l.axisY.position?i.x=a?this.chartRect.padding.left+l.axisY.labelOffset.x:this.chartRect.x1-10:i.x=this.chartRect.x2+l.axisY.labelOffset.x+10),u.showGrid&&d.createGrid(t,e,this,this.gridOffset,this.chartRect[this.counterUnits.len](),r,[l.classNames.grid,l.classNames[this.units.dir]],s),u.showLabel&&d.createLabel(t,n,e,h,this,u.offset,i,o,[l.classNames.label,l.classNames[this.units.dir],"start"===u.position?l.classNames[u.position]:l.classNames.end],a,s))}.bind(this))},projectValue:function(t,e,n){throw new Error("Base axis can't be instantiated!")}}),d.Axis.units=r}(this||global,t),function(t,o){"use strict";t.window,t.document;o.AutoScaleAxis=o.Axis.extend({constructor:function(t,e,n,i){var r=i.highLow||o.getHighLow(e,i,t.pos);this.bounds=o.getBounds(n[t.rectEnd]-n[t.rectStart],r,i.scaleMinSpace||20,i.onlyInteger),this.range={min:this.bounds.min,max:this.bounds.max},o.AutoScaleAxis.super.constructor.call(this,t,n,this.bounds.values,i)},projectValue:function(t){return this.axisLength*(o.getMultiValue(t,this.units.pos)-this.bounds.min)/this.bounds.range}})}(this||global,t),function(t,o){"use strict";t.window,t.document;o.FixedScaleAxis=o.Axis.extend({constructor:function(t,e,n,i){var r=i.highLow||o.getHighLow(e,i,t.pos);this.divisor=i.divisor||1,this.ticks=i.ticks||o.times(this.divisor).map(function(t,e){return r.low+(r.high-r.low)/this.divisor*e}.bind(this)),this.ticks.sort(function(t,e){return t-e}),this.range={min:r.low,max:r.high},o.FixedScaleAxis.super.constructor.call(this,t,n,this.ticks,i),this.stepLength=this.axisLength/this.divisor},projectValue:function(t){return this.axisLength*(o.getMultiValue(t,this.units.pos)-this.range.min)/(this.range.max-this.range.min)}})}(this||global,t),function(t,o){"use strict";t.window,t.document;o.StepAxis=o.Axis.extend({constructor:function(t,e,n,i){o.StepAxis.super.constructor.call(this,t,n,i.ticks,i);var r=Math.max(1,i.ticks.length-(i.stretch?1:0));this.stepLength=this.axisLength/r},projectValue:function(t,e){return this.stepLength*e}})}(this||global,t),function(t,m){"use strict";t.window,t.document;var r={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:m.noop,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:m.noop,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};m.Line=m.Base.extend({constructor:function(t,e,n,i){m.Line.super.constructor.call(this,t,e,r,m.extend({},r,n),i)},createChart:function(c){var h=m.normalizeData(this.data,c.reverseData,!0);this.svg=m.createSvg(this.container,c.width,c.height,c.classNames.chart);var d,f,t=this.svg.elem("g").addClass(c.classNames.gridGroup),p=this.svg.elem("g"),e=this.svg.elem("g").addClass(c.classNames.labelGroup),g=m.createChartRect(this.svg,c,r.padding);d=void 0===c.axisX.type?new m.StepAxis(m.Axis.units.x,h.normalized.series,g,m.extend({},c.axisX,{ticks:h.normalized.labels,stretch:c.fullWidth})):c.axisX.type.call(m,m.Axis.units.x,h.normalized.series,g,c.axisX),f=void 0===c.axisY.type?new m.AutoScaleAxis(m.Axis.units.y,h.normalized.series,g,m.extend({},c.axisY,{high:m.isNumeric(c.high)?c.high:c.axisY.high,low:m.isNumeric(c.low)?c.low:c.axisY.low})):c.axisY.type.call(m,m.Axis.units.y,h.normalized.series,g,c.axisY),d.createGridAndLabels(t,e,this.supportsForeignObject,c,this.eventEmitter),f.createGridAndLabels(t,e,this.supportsForeignObject,c,this.eventEmitter),c.showGridBackground&&m.createGridBackground(t,g,c.classNames.gridBackground,this.eventEmitter),h.raw.series.forEach(function(i,r){var n=p.elem("g");n.attr({"ct:series-name":i.name,"ct:meta":m.serialize(i.meta)}),n.addClass([c.classNames.series,i.className||c.classNames.series+"-"+m.alphaNumerate(r)].join(" "));var o=[],a=[];h.normalized.series[r].forEach(function(t,e){var n={x:g.x1+d.projectValue(t,e,h.normalized.series[r]),y:g.y1-f.projectValue(t,e,h.normalized.series[r])};o.push(n.x,n.y),a.push({value:t,valueIndex:e,meta:m.getMetaData(i,e)})}.bind(this));var t={lineSmooth:m.getSeriesOption(i,c,"lineSmooth"),showPoint:m.getSeriesOption(i,c,"showPoint"),showLine:m.getSeriesOption(i,c,"showLine"),showArea:m.getSeriesOption(i,c,"showArea"),areaBase:m.getSeriesOption(i,c,"areaBase")},e=("function"==typeof t.lineSmooth?t.lineSmooth:t.lineSmooth?m.Interpolation.monotoneCubic():m.Interpolation.none())(o,a);if(t.showPoint&&e.pathElements.forEach(function(t){var e=n.elem("line",{x1:t.x,y1:t.y,x2:t.x+.01,y2:t.y},c.classNames.point).attr({"ct:value":[t.data.value.x,t.data.value.y].filter(m.isNumeric).join(","),"ct:meta":m.serialize(t.data.meta)});this.eventEmitter.emit("draw",{type:"point",value:t.data.value,index:t.data.valueIndex,meta:t.data.meta,series:i,seriesIndex:r,axisX:d,axisY:f,group:n,element:e,x:t.x,y:t.y})}.bind(this)),t.showLine){var l=n.elem("path",{d:e.stringify()},c.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:h.normalized.series[r],path:e.clone(),chartRect:g,index:r,series:i,seriesIndex:r,seriesMeta:i.meta,axisX:d,axisY:f,group:n,element:l})}if(t.showArea&&f.range){var s=Math.max(Math.min(t.areaBase,f.range.max),f.range.min),u=g.y1-f.projectValue(s);e.splitByCommand("M").filter(function(t){return 1<t.pathElements.length}).map(function(t){var e=t.pathElements[0],n=t.pathElements[t.pathElements.length-1];return t.clone(!0).position(0).remove(1).move(e.x,u).line(e.x,e.y).position(t.pathElements.length+1).line(n.x,u)}).forEach(function(t){var e=n.elem("path",{d:t.stringify()},c.classNames.area,!0);this.eventEmitter.emit("draw",{type:"area",values:h.normalized.series[r],path:t.clone(),series:i,seriesIndex:r,axisX:d,axisY:f,chartRect:g,index:r,group:n,element:e})}.bind(this))}}.bind(this)),this.eventEmitter.emit("created",{bounds:f.bounds,chartRect:g,axisX:d,axisY:f,svg:this.svg,options:c})}})}(this||global,t),function(t,C){"use strict";t.window,t.document;var a={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:C.noop,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:C.noop,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,referenceValue:0,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,stackMode:"accumulate",horizontalBars:!1,distributeSeries:!1,reverseData:!1,showGridBackground:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};C.Bar=C.Base.extend({constructor:function(t,e,n,i){C.Bar.super.constructor.call(this,t,e,a,C.extend({},a,n),i)},createChart:function(f){var p,t;f.distributeSeries?(p=C.normalizeData(this.data,f.reverseData,f.horizontalBars?"x":"y")).normalized.series=p.normalized.series.map(function(t){return[t]}):p=C.normalizeData(this.data,f.reverseData,f.horizontalBars?"x":"y"),this.svg=C.createSvg(this.container,f.width,f.height,f.classNames.chart+(f.horizontalBars?" "+f.classNames.horizontalBars:""));var e=this.svg.elem("g").addClass(f.classNames.gridGroup),n=this.svg.elem("g"),i=this.svg.elem("g").addClass(f.classNames.labelGroup);if(f.stackBars&&0!==p.normalized.series.length){var r=C.serialMap(p.normalized.series,function(){return Array.prototype.slice.call(arguments).map(function(t){return t}).reduce(function(t,e){return{x:t.x+(e&&e.x)||0,y:t.y+(e&&e.y)||0}},{x:0,y:0})});t=C.getHighLow([r],f,f.horizontalBars?"x":"y")}else t=C.getHighLow(p.normalized.series,f,f.horizontalBars?"x":"y");t.high=+f.high||(0===f.high?0:t.high),t.low=+f.low||(0===f.low?0:t.low);var g,o,m,v,y,b=C.createChartRect(this.svg,f,a.padding);o=f.distributeSeries&&f.stackBars?p.normalized.labels.slice(0,1):p.normalized.labels,f.horizontalBars?(g=v=void 0===f.axisX.type?new C.AutoScaleAxis(C.Axis.units.x,p.normalized.series,b,C.extend({},f.axisX,{highLow:t,referenceValue:0})):f.axisX.type.call(C,C.Axis.units.x,p.normalized.series,b,C.extend({},f.axisX,{highLow:t,referenceValue:0})),m=y=void 0===f.axisY.type?new C.StepAxis(C.Axis.units.y,p.normalized.series,b,{ticks:o}):f.axisY.type.call(C,C.Axis.units.y,p.normalized.series,b,f.axisY)):(m=v=void 0===f.axisX.type?new C.StepAxis(C.Axis.units.x,p.normalized.series,b,{ticks:o}):f.axisX.type.call(C,C.Axis.units.x,p.normalized.series,b,f.axisX),g=y=void 0===f.axisY.type?new C.AutoScaleAxis(C.Axis.units.y,p.normalized.series,b,C.extend({},f.axisY,{highLow:t,referenceValue:0})):f.axisY.type.call(C,C.Axis.units.y,p.normalized.series,b,C.extend({},f.axisY,{highLow:t,referenceValue:0})));var x=f.horizontalBars?b.x1+g.projectValue(0):b.y1-g.projectValue(0),w=[];m.createGridAndLabels(e,i,this.supportsForeignObject,f,this.eventEmitter),g.createGridAndLabels(e,i,this.supportsForeignObject,f,this.eventEmitter),f.showGridBackground&&C.createGridBackground(e,b,f.classNames.gridBackground,this.eventEmitter),p.raw.series.forEach(function(s,u){var c,h,d=u-(p.raw.series.length-1)/2;c=f.distributeSeries&&!f.stackBars?m.axisLength/p.normalized.series.length/2:f.distributeSeries&&f.stackBars?m.axisLength/2:m.axisLength/p.normalized.series[u].length/2,(h=n.elem("g")).attr({"ct:series-name":s.name,"ct:meta":C.serialize(s.meta)}),h.addClass([f.classNames.series,s.className||f.classNames.series+"-"+C.alphaNumerate(u)].join(" ")),p.normalized.series[u].forEach(function(t,e){var n,i,r,o;if(o=f.distributeSeries&&!f.stackBars?u:f.distributeSeries&&f.stackBars?0:e,n=f.horizontalBars?{x:b.x1+g.projectValue(t&&t.x?t.x:0,e,p.normalized.series[u]),y:b.y1-m.projectValue(t&&t.y?t.y:0,o,p.normalized.series[u])}:{x:b.x1+m.projectValue(t&&t.x?t.x:0,o,p.normalized.series[u]),y:b.y1-g.projectValue(t&&t.y?t.y:0,e,p.normalized.series[u])},m instanceof C.StepAxis&&(m.options.stretch||(n[m.units.pos]+=c*(f.horizontalBars?-1:1)),n[m.units.pos]+=f.stackBars||f.distributeSeries?0:d*f.seriesBarDistance*(f.horizontalBars?-1:1)),r=w[e]||x,w[e]=r-(x-n[m.counterUnits.pos]),void 0!==t){var a={};a[m.units.pos+"1"]=n[m.units.pos],a[m.units.pos+"2"]=n[m.units.pos],!f.stackBars||"accumulate"!==f.stackMode&&f.stackMode?(a[m.counterUnits.pos+"1"]=x,a[m.counterUnits.pos+"2"]=n[m.counterUnits.pos]):(a[m.counterUnits.pos+"1"]=r,a[m.counterUnits.pos+"2"]=w[e]),a.x1=Math.min(Math.max(a.x1,b.x1),b.x2),a.x2=Math.min(Math.max(a.x2,b.x1),b.x2),a.y1=Math.min(Math.max(a.y1,b.y2),b.y1),a.y2=Math.min(Math.max(a.y2,b.y2),b.y1);var l=C.getMetaData(s,e);i=h.elem("line",a,f.classNames.bar).attr({"ct:value":[t.x,t.y].filter(C.isNumeric).join(","),"ct:meta":C.serialize(l)}),this.eventEmitter.emit("draw",C.extend({type:"bar",value:t,index:e,meta:l,series:s,seriesIndex:u,axisX:v,axisY:y,chartRect:b,group:h,element:i},a))}}.bind(this))}.bind(this)),this.eventEmitter.emit("created",{bounds:g.bounds,chartRect:b,axisX:v,axisY:y,svg:this.svg,options:f})}})}(this||global,t),function(t,L){"use strict";t.window,t.document;var r={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",sliceDonutSolid:"ct-slice-donut-solid",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutSolid:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:L.noop,labelDirection:"neutral",reverseData:!1,ignoreEmptyValues:!1};function E(t,e,n){var i=e.x>t.x;return i&&"explode"===n||!i&&"implode"===n?"start":i&&"implode"===n||!i&&"explode"===n?"end":"middle"}L.Pie=L.Base.extend({constructor:function(t,e,n,i){L.Pie.super.constructor.call(this,t,e,r,L.extend({},r,n),i)},createChart:function(m){var v,t,y,b,x,w=L.normalizeData(this.data),C=[],S=m.startAngle;this.svg=L.createSvg(this.container,m.width,m.height,m.donut?m.classNames.chartDonut:m.classNames.chartPie),t=L.createChartRect(this.svg,m,r.padding),y=Math.min(t.width()/2,t.height()/2),x=m.total||w.normalized.series.reduce(function(t,e){return t+e},0);var k=L.quantity(m.donutWidth);"%"===k.unit&&(k.value*=y/100),y-=m.donut&&!m.donutSolid?k.value/2:0,b="outside"===m.labelPosition||m.donut&&!m.donutSolid?y:"center"===m.labelPosition?0:m.donutSolid?y-k.value/2:y/2,b+=m.labelOffset;var D={x:t.x1+t.width()/2,y:t.y2+t.height()/2},M=1===w.raw.series.filter(function(t){return t.hasOwnProperty("value")?0!==t.value:0!==t}).length;w.raw.series.forEach(function(t,e){C[e]=this.svg.elem("g",null,null)}.bind(this)),m.showLabel&&(v=this.svg.elem("g",null,null)),w.raw.series.forEach(function(t,e){if(0!==w.normalized.series[e]||!m.ignoreEmptyValues){C[e].attr({"ct:series-name":t.name}),C[e].addClass([m.classNames.series,t.className||m.classNames.series+"-"+L.alphaNumerate(e)].join(" "));var n=0<x?S+w.normalized.series[e]/x*360:0,i=Math.max(0,S-(0===e||M?0:.2));359.99<=n-i&&(n=i+359.99);var r,o,a,l=L.polarToCartesian(D.x,D.y,y,i),s=L.polarToCartesian(D.x,D.y,y,n),u=new L.Svg.Path(!m.donut||m.donutSolid).move(s.x,s.y).arc(y,y,0,180<n-S,0,l.x,l.y);m.donut?m.donutSolid&&(a=y-k.value,r=L.polarToCartesian(D.x,D.y,a,S-(0===e||M?0:.2)),o=L.polarToCartesian(D.x,D.y,a,n),u.line(r.x,r.y),u.arc(a,a,0,180<n-S,1,o.x,o.y)):u.line(D.x,D.y);var c=m.classNames.slicePie;m.donut&&(c=m.classNames.sliceDonut,m.donutSolid&&(c=m.classNames.sliceDonutSolid));var h=C[e].elem("path",{d:u.stringify()},c);if(h.attr({"ct:value":w.normalized.series[e],"ct:meta":L.serialize(t.meta)}),m.donut&&!m.donutSolid&&(h._node.style.strokeWidth=k.value+"px"),this.eventEmitter.emit("draw",{type:"slice",value:w.normalized.series[e],totalDataSum:x,index:e,meta:t.meta,series:t,group:C[e],element:h,path:u.clone(),center:D,radius:y,startAngle:S,endAngle:n}),m.showLabel){var d,f;d=1===w.raw.series.length?{x:D.x,y:D.y}:L.polarToCartesian(D.x,D.y,b,S+(n-S)/2),f=w.normalized.labels&&!L.isFalseyButZero(w.normalized.labels[e])?w.normalized.labels[e]:w.normalized.series[e];var p=m.labelInterpolationFnc(f,e);if(p||0===p){var g=v.elem("text",{dx:d.x,dy:d.y,"text-anchor":E(D,d,m.labelDirection)},m.classNames.label).text(""+p);this.eventEmitter.emit("draw",{type:"label",index:e,group:v,element:g,text:""+p,x:d.x,y:d.y})}}S=n}}.bind(this)),this.eventEmitter.emit("created",{chartRect:t,svg:this.svg,options:m})},determineAnchorPosition:E})}(this||global,t),t}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).CodeMirror=e()}(this,function(){"use strict";var t=navigator.userAgent,e=navigator.platform,g=/gecko\/\d/i.test(t),n=/MSIE \d/.test(t),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),r=/Edge\/(\d+)/.exec(t),w=n||i||r,C=w&&(n?document.documentMode||6:+(r||i)[1]),b=!r&&/WebKit\//.test(t),o=b&&/Qt\/\d+\.\d+/.test(t),a=!r&&/Chrome\//.test(t),m=/Opera\//.test(t),s=/Apple Computer/.test(navigator.vendor),l=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),u=/PhantomJS/.test(t),c=!r&&/AppleWebKit/.test(t)&&/Mobile\/\w+/.test(t),h=/Android/.test(t),d=c||h||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),x=c||/Mac/.test(e),f=/\bCrOS\b/.test(t),p=/win/i.test(e),v=m&&t.match(/Version\/(\d*\.\d*)/);(v=v&&Number(v[1]))&&15<=v&&(b=!(m=!1));var y=x&&(o||m&&(null==v||v<12.11)),S=g||w&&9<=C;function k(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var D,M=function(t,e){var n=t.className,i=k(e).exec(n);if(i){var r=n.slice(i.index+i[0].length);t.className=n.slice(0,i.index)+(r?i[1]+r:"")}};function L(t){for(var e=t.childNodes.length;0<e;--e)t.removeChild(t.firstChild);return t}function E(t,e){return L(t).appendChild(e)}function A(t,e,n,i){var r=document.createElement(t);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof e)r.appendChild(document.createTextNode(e));else if(e)for(var o=0;o<e.length;++o)r.appendChild(e[o]);return r}function T(t,e,n,i){var r=A(t,e,n,i);return r.setAttribute("role","presentation"),r}function N(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do{if(11==e.nodeType&&(e=e.host),e==t)return!0}while(e=e.parentNode)}function O(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function F(t,e){var n=t.className;k(e).test(n)||(t.className+=(n?" ":"")+e)}function I(t,e){for(var n=t.split(" "),i=0;i<n.length;i++)n[i]&&!k(n[i]).test(e)&&(e+=" "+n[i]);return e}D=document.createRange?function(t,e,n,i){var r=document.createRange();return r.setEnd(i||t,n),r.setStart(t,e),r}:function(t,e,n){var i=document.body.createTextRange();try{i.moveToElementText(t.parentNode)}catch(t){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",e),i};var P=function(t){t.select()};function z(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function _(t,e,n){for(var i in e=e||{},t)!t.hasOwnProperty(i)||!1===n&&e.hasOwnProperty(i)||(e[i]=t[i]);return e}function B(t,e,n,i,r){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var o=i||0,a=r||0;;){var l=t.indexOf("\t",o);if(l<0||e<=l)return a+(e-o);a+=l-o,a+=n-a%n,o=l+1}}c?P=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:w&&(P=function(t){try{t.select()}catch(t){}});var H=function(){this.id=null,this.f=null,this.time=0,this.handler=z(this.onTimeout,this)};function W(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return n;return-1}H.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-new Date)},H.prototype.set=function(t,e){this.f=e;var n=+new Date+t;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=n)};var R=30,j={toString:function(){return"CodeMirror.Pass"}},G={scroll:!1},U={origin:"*mouse"},X={origin:"+move"};function Y(t,e,n){for(var i=0,r=0;;){var o=t.indexOf("\t",i);-1==o&&(o=t.length);var a=o-i;if(o==t.length||e<=r+a)return i+Math.min(a,e-r);if(r+=o-i,i=o+1,e<=(r+=n-r%n))return i}}var V=[""];function q(t){for(;V.length<=t;)V.push(K(V)+" ");return V[t]}function K(t){return t[t.length-1]}function $(t,e){for(var n=[],i=0;i<t.length;i++)n[i]=e(t[i],i);return n}function Z(){}function Q(t,e){var n;return n=Object.create?Object.create(t):(Z.prototype=t,new Z),e&&_(e,n),n}var J=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function tt(t){return/\w/.test(t)||"Â€"<t&&(t.toUpperCase()!=t.toLowerCase()||J.test(t))}function et(t,e){return e?!!(-1<e.source.indexOf("\\w")&&tt(t))||e.test(t):tt(t)}function nt(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}var it=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function rt(t){return 768<=t.charCodeAt(0)&&it.test(t)}function ot(t,e,n){for(;(n<0?0<e:e<t.length)&&rt(t.charAt(e));)e+=n;return e}function at(t,e,n){for(var i=n<e?-1:1;;){if(e==n)return e;var r=(e+n)/2,o=i<0?Math.ceil(r):Math.floor(r);if(o==e)return t(o)?e:n;t(o)?n=o:e=o+i}}var lt=null;function st(t,e,n){var i;lt=null;for(var r=0;r<t.length;++r){var o=t[r];if(o.from<e&&o.to>e)return r;o.to==e&&(o.from!=o.to&&"before"==n?i=r:lt=r),o.from==e&&(o.from!=o.to&&"before"!=n?i=r:lt=r)}return null!=i?i:lt}var ut,ct,ht,dt,ft,pt,gt,mt=(ut="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",ct="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",ht=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,dt=/[stwN]/,ft=/[LRr]/,pt=/[Lb1n]/,gt=/[1n]/,function(t,e){var n="ltr"==e?"L":"R";if(0==t.length||"ltr"==e&&!ht.test(t))return!1;for(var i,r=t.length,o=[],a=0;a<r;++a)o.push((i=t.charCodeAt(a))<=247?ut.charAt(i):1424<=i&&i<=1524?"R":1536<=i&&i<=1785?ct.charAt(i-1536):1774<=i&&i<=2220?"r":8192<=i&&i<=8203?"w":8204==i?"b":"L");for(var l=0,s=n;l<r;++l){var u=o[l];"m"==u?o[l]=s:s=u}for(var c=0,h=n;c<r;++c){var d=o[c];"1"==d&&"r"==h?o[c]="n":ft.test(d)&&"r"==(h=d)&&(o[c]="R")}for(var f=1,p=o[0];f<r-1;++f){var g=o[f];"+"==g&&"1"==p&&"1"==o[f+1]?o[f]="1":","!=g||p!=o[f+1]||"1"!=p&&"n"!=p||(o[f]=p),p=g}for(var m=0;m<r;++m){var v=o[m];if(","==v)o[m]="N";else if("%"==v){var y=void 0;for(y=m+1;y<r&&"%"==o[y];++y);for(var b=m&&"!"==o[m-1]||y<r&&"1"==o[y]?"1":"N",x=m;x<y;++x)o[x]=b;m=y-1}}for(var w=0,C=n;w<r;++w){var S=o[w];"L"==C&&"1"==S?o[w]="L":ft.test(S)&&(C=S)}for(var k=0;k<r;++k)if(dt.test(o[k])){var D=void 0;for(D=k+1;D<r&&dt.test(o[D]);++D);for(var M="L"==(k?o[k-1]:n),L=M==("L"==(D<r?o[D]:n))?M?"L":"R":n,E=k;E<D;++E)o[E]=L;k=D-1}for(var T,A=[],N=0;N<r;)if(pt.test(o[N])){var O=N;for(++N;N<r&&pt.test(o[N]);++N);A.push(new vt(0,O,N))}else{var F=N,I=A.length;for(++N;N<r&&"L"!=o[N];++N);for(var P=F;P<N;)if(gt.test(o[P])){F<P&&A.splice(I,0,new vt(1,F,P));var z=P;for(++P;P<N&&gt.test(o[P]);++P);A.splice(I,0,new vt(2,z,P)),F=P}else++P;F<N&&A.splice(I,0,new vt(1,F,N))}return"ltr"==e&&(1==A[0].level&&(T=t.match(/^\s+/))&&(A[0].from=T[0].length,A.unshift(new vt(0,0,T[0].length))),1==K(A).level&&(T=t.match(/\s+$/))&&(K(A).to-=T[0].length,A.push(new vt(0,r-T[0].length,r)))),"rtl"==e?A.reverse():A});function vt(t,e,n){this.level=t,this.from=e,this.to=n}function yt(t,e){var n=t.order;return null==n&&(n=t.order=mt(t.text,e)),n}var bt=[],xt=function(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var i=t._handlers||(t._handlers={});i[e]=(i[e]||bt).concat(n)}};function wt(t,e){return t._handlers&&t._handlers[e]||bt}function Ct(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var i=t._handlers,r=i&&i[e];if(r){var o=W(r,n);-1<o&&(i[e]=r.slice(0,o).concat(r.slice(o+1)))}}}function St(t,e){var n=wt(t,e);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function kt(t,e,n){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),St(t,n||e.type,t,e),At(e)||e.codemirrorIgnore}function Dt(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var n=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),i=0;i<e.length;++i)-1==W(n,e[i])&&n.push(e[i])}function Mt(t,e){return 0<wt(t,e).length}function Lt(t){t.prototype.on=function(t,e){xt(this,t,e)},t.prototype.off=function(t,e){Ct(this,t,e)}}function Et(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Tt(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function At(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function Nt(t){Et(t),Tt(t)}function Ot(t){return t.target||t.srcElement}function Ft(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),x&&t.ctrlKey&&1==e&&(e=3),e}var It,Pt,zt=function(){if(w&&C<9)return!1;var t=A("div");return"draggable"in t||"dragDrop"in t}();function _t(t){if(null==It){var e=A("span","â€‹");E(t,A("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(It=e.offsetWidth<=1&&2<e.offsetHeight&&!(w&&C<8))}var n=It?A("span","â€‹"):A("span","Â ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Bt(t){if(null!=Pt)return Pt;var e=E(t,document.createTextNode("AØ®A")),n=D(e,0,1).getBoundingClientRect(),i=D(e,1,2).getBoundingClientRect();return L(t),!(!n||n.left==n.right)&&(Pt=i.right-n.right<3)}var Ht,Wt=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],i=t.length;e<=i;){var r=t.indexOf("\n",e);-1==r&&(r=t.length);var o=t.slice(e,"\r"==t.charAt(r-1)?r-1:r),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),e+=a+1):(n.push(o),e=r+1)}return n}:function(t){return t.split(/\r\n?|\n/)},Rt=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){var e;try{e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},jt="oncopy"in(Ht=A("div"))||(Ht.setAttribute("oncopy","return;"),"function"==typeof Ht.oncopy),Gt=null;var Ut={},Xt={};function Yt(t){if("string"==typeof t&&Xt.hasOwnProperty(t))t=Xt[t];else if(t&&"string"==typeof t.name&&Xt.hasOwnProperty(t.name)){var e=Xt[t.name];"string"==typeof e&&(e={name:e}),(t=Q(e,t)).name=e.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return Yt("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return Yt("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function Vt(t,e){e=Yt(e);var n=Ut[e.name];if(!n)return Vt(t,"text/plain");var i=n(t,e);if(qt.hasOwnProperty(e.name)){var r=qt[e.name];for(var o in r)r.hasOwnProperty(o)&&(i.hasOwnProperty(o)&&(i["_"+o]=i[o]),i[o]=r[o])}if(i.name=e.name,e.helperType&&(i.helperType=e.helperType),e.modeProps)for(var a in e.modeProps)i[a]=e.modeProps[a];return i}var qt={};function Kt(t,e){_(e,qt.hasOwnProperty(t)?qt[t]:qt[t]={})}function $t(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var n={};for(var i in e){var r=e[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function Zt(t,e){for(var n;t.innerMode&&(n=t.innerMode(e))&&n.mode!=t;)e=n.state,t=n.mode;return n||{mode:t,state:e}}function Qt(t,e,n){return!t.startState||t.startState(e,n)}var Jt=function(t,e,n){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function te(t,e){if((e-=t.first)<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var n=t;!n.lines;)for(var i=0;;++i){var r=n.children[i],o=r.chunkSize();if(e<o){n=r;break}e-=o}return n.lines[e]}function ee(t,n,i){var r=[],o=n.line;return t.iter(n.line,i.line+1,function(t){var e=t.text;o==i.line&&(e=e.slice(0,i.ch)),o==n.line&&(e=e.slice(n.ch)),r.push(e),++o}),r}function ne(t,e,n){var i=[];return t.iter(e,n,function(t){i.push(t.text)}),i}function ie(t,e){var n=e-t.height;if(n)for(var i=t;i;i=i.parent)i.height+=n}function re(t){if(null==t.parent)return null;for(var e=t.parent,n=W(e.lines,t),i=e.parent;i;i=(e=i).parent)for(var r=0;i.children[r]!=e;++r)n+=i.children[r].chunkSize();return n+e.first}function oe(t,e){var n=t.first;t:do{for(var i=0;i<t.children.length;++i){var r=t.children[i],o=r.height;if(e<o){t=r;continue t}e-=o,n+=r.chunkSize()}return n}while(!t.lines);for(var a=0;a<t.lines.length;++a){var l=t.lines[a].height;if(e<l)break;e-=l}return n+a}function ae(t,e){return e>=t.first&&e<t.first+t.size}function le(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function se(t,e,n){if(void 0===n&&(n=null),!(this instanceof se))return new se(t,e,n);this.line=t,this.ch=e,this.sticky=n}function ue(t,e){return t.line-e.line||t.ch-e.ch}function ce(t,e){return t.sticky==e.sticky&&0==ue(t,e)}function he(t){return se(t.line,t.ch)}function de(t,e){return ue(t,e)<0?e:t}function fe(t,e){return ue(t,e)<0?t:e}function pe(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function ge(t,e){if(e.line<t.first)return se(t.first,0);var n,i,r,o=t.first+t.size-1;return e.line>o?se(o,te(t,o).text.length):(i=te(t,(n=e).line).text.length,null==(r=n.ch)||i<r?se(n.line,i):r<0?se(n.line,0):n)}function me(t,e){for(var n=[],i=0;i<e.length;i++)n[i]=ge(t,e[i]);return n}Jt.prototype.eol=function(){return this.pos>=this.string.length},Jt.prototype.sol=function(){return this.pos==this.lineStart},Jt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Jt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Jt.prototype.eat=function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},Jt.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},Jt.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},Jt.prototype.skipToEnd=function(){this.pos=this.string.length},Jt.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(-1<e)return this.pos=e,!0},Jt.prototype.backUp=function(t){this.pos-=t},Jt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=B(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?B(this.string,this.lineStart,this.tabSize):0)},Jt.prototype.indentation=function(){return B(this.string,null,this.tabSize)-(this.lineStart?B(this.string,this.lineStart,this.tabSize):0)},Jt.prototype.match=function(t,e,n){if("string"!=typeof t){var i=this.string.slice(this.pos).match(t);return i&&0<i.index?null:(i&&!1!==e&&(this.pos+=i[0].length),i)}function r(t){return n?t.toLowerCase():t}if(r(this.string.substr(this.pos,t.length))==r(t))return!1!==e&&(this.pos+=t.length),!0},Jt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Jt.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}},Jt.prototype.lookAhead=function(t){var e=this.lineOracle;return e&&e.lookAhead(t)},Jt.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var ve=function(t,e){this.state=t,this.lookAhead=e},ye=function(t,e,n,i){this.state=e,this.doc=t,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};function be(e,n,i,t){var s=[e.state.modeGen],r={};Ee(e,n.text,e.doc.mode,i,function(t,e){return s.push(t,e)},r,t);for(var u=i.state,o=function(t){i.baseTokens=s;var o=e.state.overlays[t],a=1,l=0;i.state=!0,Ee(e,n.text,o.mode,i,function(t,e){for(var n=a;l<t;){var i=s[a];t<i&&s.splice(a,1,t,s[a+1],i),a+=2,l=Math.min(t,i)}if(e)if(o.opaque)s.splice(n,a-n,t,"overlay "+e),a=n+2;else for(;n<a;n+=2){var r=s[n+1];s[n+1]=(r?r+" ":"")+"overlay "+e}},r),i.state=u,i.baseTokens=null,i.baseTokenPos=1},a=0;a<e.state.overlays.length;++a)o(a);return{styles:s,classes:r.bgClass||r.textClass?r:null}}function xe(t,e,n){if(!e.styles||e.styles[0]!=t.state.modeGen){var i=we(t,re(e)),r=e.text.length>t.options.maxHighlightLength&&$t(t.doc.mode,i.state),o=be(t,e,i);r&&(i.state=r),e.stateAfter=i.save(!r),e.styles=o.styles,o.classes?e.styleClasses=o.classes:e.styleClasses&&(e.styleClasses=null),n===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return e.styles}function we(n,i,t){var e=n.doc,r=n.display;if(!e.mode.startState)return new ye(e,!0,i);var o=function(t,e,n){for(var i,r,o=t.doc,a=n?-1:e-(t.doc.mode.innerMode?1e3:100),l=e;a<l;--l){if(l<=o.first)return o.first;var s=te(o,l-1),u=s.stateAfter;if(u&&(!n||l+(u instanceof ve?u.lookAhead:0)<=o.modeFrontier))return l;var c=B(s.text,null,t.options.tabSize);(null==r||c<i)&&(r=l-1,i=c)}return r}(n,i,t),a=o>e.first&&te(e,o-1).stateAfter,l=a?ye.fromSaved(e,a,o):new ye(e,Qt(e.mode),o);return e.iter(o,i,function(t){Ce(n,t.text,l);var e=l.line;t.stateAfter=e==i-1||e%5==0||e>=r.viewFrom&&e<r.viewTo?l.save():null,l.nextLine()}),t&&(e.modeFrontier=l.line),l}function Ce(t,e,n,i){var r=t.doc.mode,o=new Jt(e,t.options.tabSize,n);for(o.start=o.pos=i||0,""==e&&Se(r,n.state);!o.eol();)ke(r,o,n.state),o.start=o.pos}function Se(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var n=Zt(t,e);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function ke(t,e,n,i){for(var r=0;r<10;r++){i&&(i[0]=Zt(t,n).mode);var o=t.token(e,n);if(e.pos>e.start)return o}throw new Error("Mode "+t.name+" failed to advance stream.")}ye.prototype.lookAhead=function(t){var e=this.doc.getLine(this.line+t);return null!=e&&t>this.maxLookAhead&&(this.maxLookAhead=t),e},ye.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var e=this.baseTokens[this.baseTokenPos+1];return{type:e&&e.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},ye.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},ye.fromSaved=function(t,e,n){return e instanceof ve?new ye(t,$t(t.mode,e.state),n,e.lookAhead):new ye(t,$t(t.mode,e),n)},ye.prototype.save=function(t){var e=!1!==t?$t(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new ve(e,this.maxLookAhead):e};var De=function(t,e,n){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=e||null,this.state=n};function Me(t,e,n,i){var r,o,a=t.doc,l=a.mode,s=te(a,(e=ge(a,e)).line),u=we(t,e.line,n),c=new Jt(s.text,t.options.tabSize,u);for(i&&(o=[]);(i||c.pos<e.ch)&&!c.eol();)c.start=c.pos,r=ke(l,c,u.state),i&&o.push(new De(c,r,$t(a.mode,u.state)));return i?o:new De(c,r,u.state)}function Le(t,e){if(t)for(;;){var n=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==e[i]?e[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(e[i])||(e[i]+=" "+n[2])}return t}function Ee(t,e,n,i,r,o,a){var l=n.flattenSpans;null==l&&(l=t.options.flattenSpans);var s,u=0,c=null,h=new Jt(e,t.options.tabSize,i),d=t.options.addModeClass&&[null];for(""==e&&Le(Se(n,i.state),o);!h.eol();){if(s=h.pos>t.options.maxHighlightLength?(l=!1,a&&Ce(t,e,i,h.pos),h.pos=e.length,null):Le(ke(n,h,i.state,d),o),d){var f=d[0].name;f&&(s="m-"+(s?f+" "+s:f))}if(!l||c!=s){for(;u<h.start;)r(u=Math.min(h.start,u+5e3),c);c=s}h.start=h.pos}for(;u<h.pos;){var p=Math.min(h.pos,u+5e3);r(p,c),u=p}}var Te=!1,Ae=!1;function Ne(t,e,n){this.marker=t,this.from=e,this.to=n}function Oe(t,e){if(t)for(var n=0;n<t.length;++n){var i=t[n];if(i.marker==e)return i}}function Fe(t,e){for(var n,i=0;i<t.length;++i)t[i]!=e&&(n=n||[]).push(t[i]);return n}function Ie(t,e){if(e.full)return null;var n=ae(t,e.from.line)&&te(t,e.from.line).markedSpans,i=ae(t,e.to.line)&&te(t,e.to.line).markedSpans;if(!n&&!i)return null;var r=e.from.ch,o=e.to.ch,a=0==ue(e.from,e.to),l=function(t,e,n){var i;if(t)for(var r=0;r<t.length;++r){var o=t[r],a=o.marker;if(null==o.from||(a.inclusiveLeft?o.from<=e:o.from<e)||o.from==e&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var l=null==o.to||(a.inclusiveRight?o.to>=e:o.to>e);(i=i||[]).push(new Ne(a,o.from,l?null:o.to))}}return i}(n,r,a),s=function(t,e,n){var i;if(t)for(var r=0;r<t.length;++r){var o=t[r],a=o.marker;if(null==o.to||(a.inclusiveRight?o.to>=e:o.to>e)||o.from==e&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var l=null==o.from||(a.inclusiveLeft?o.from<=e:o.from<e);(i=i||[]).push(new Ne(a,l?null:o.from-e,null==o.to?null:o.to-e))}}return i}(i,o,a),u=1==e.text.length,c=K(e.text).length+(u?r:0);if(l)for(var h=0;h<l.length;++h){var d=l[h];if(null==d.to){var f=Oe(s,d.marker);f?u&&(d.to=null==f.to?null:f.to+c):d.to=r}}if(s)for(var p=0;p<s.length;++p){var g=s[p];if(null!=g.to&&(g.to+=c),null==g.from)Oe(l,g.marker)||(g.from=c,u&&(l=l||[]).push(g));else g.from+=c,u&&(l=l||[]).push(g)}l=l&&Pe(l),s&&s!=l&&(s=Pe(s));var m=[l];if(!u){var v,y=e.text.length-2;if(0<y&&l)for(var b=0;b<l.length;++b)null==l[b].to&&(v=v||[]).push(new Ne(l[b].marker,null,null));for(var x=0;x<y;++x)m.push(v);m.push(s)}return m}function Pe(t){for(var e=0;e<t.length;++e){var n=t[e];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function ze(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function _e(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function Be(t){return t.inclusiveLeft?-1:0}function He(t){return t.inclusiveRight?1:0}function We(t,e){var n=t.lines.length-e.lines.length;if(0!=n)return n;var i=t.find(),r=e.find(),o=ue(i.from,r.from)||Be(t)-Be(e);if(o)return-o;var a=ue(i.to,r.to)||He(t)-He(e);return a||e.id-t.id}function Re(t,e){var n,i=Ae&&t.markedSpans;if(i)for(var r=void 0,o=0;o<i.length;++o)(r=i[o]).marker.collapsed&&null==(e?r.from:r.to)&&(!n||We(n,r.marker)<0)&&(n=r.marker);return n}function je(t){return Re(t,!0)}function Ge(t){return Re(t,!1)}function Ue(t,e){var n,i=Ae&&t.markedSpans;if(i)for(var r=0;r<i.length;++r){var o=i[r];o.marker.collapsed&&(null==o.from||o.from<e)&&(null==o.to||o.to>e)&&(!n||We(n,o.marker)<0)&&(n=o.marker)}return n}function Xe(t,e,n,i,r){var o=te(t,e),a=Ae&&o.markedSpans;if(a)for(var l=0;l<a.length;++l){var s=a[l];if(s.marker.collapsed){var u=s.marker.find(0),c=ue(u.from,n)||Be(s.marker)-Be(r),h=ue(u.to,i)||He(s.marker)-He(r);if(!(0<=c&&h<=0||c<=0&&0<=h)&&(c<=0&&(s.marker.inclusiveRight&&r.inclusiveLeft?0<=ue(u.to,n):0<ue(u.to,n))||0<=c&&(s.marker.inclusiveRight&&r.inclusiveLeft?ue(u.from,i)<=0:ue(u.from,i)<0)))return!0}}}function Ye(t){for(var e;e=je(t);)t=e.find(-1,!0).line;return t}function Ve(t,e){var n=te(t,e),i=Ye(n);return n==i?e:re(i)}function qe(t,e){if(e>t.lastLine())return e;var n,i=te(t,e);if(!Ke(t,i))return e;for(;n=Ge(i);)i=n.find(1,!0).line;return re(i)+1}function Ke(t,e){var n=Ae&&e.markedSpans;if(n)for(var i=void 0,r=0;r<n.length;++r)if((i=n[r]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&$e(t,e,i))return!0}}function $e(t,e,n){if(null==n.to){var i=n.marker.find(1,!0);return $e(t,i.line,Oe(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var r=void 0,o=0;o<e.markedSpans.length;++o)if((r=e.markedSpans[o]).marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&$e(t,e,r))return!0}function Ze(t){for(var e=0,n=(t=Ye(t)).parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==t)break;e+=r.height}for(var o=n.parent;o;o=(n=o).parent)for(var a=0;a<o.children.length;++a){var l=o.children[a];if(l==n)break;e+=l.height}return e}function Qe(t){if(0==t.height)return 0;for(var e,n=t.text.length,i=t;e=je(i);){var r=e.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}for(i=t;e=Ge(i);){var o=e.find(0,!0);n-=i.text.length-o.from.ch,n+=(i=o.to.line).text.length-o.to.ch}return n}function Je(t){var n=t.display,e=t.doc;n.maxLine=te(e,e.first),n.maxLineLength=Qe(n.maxLine),n.maxLineChanged=!0,e.iter(function(t){var e=Qe(t);e>n.maxLineLength&&(n.maxLineLength=e,n.maxLine=t)})}var tn=function(t,e,n){this.text=t,_e(this,e),this.height=n?n(this):1};tn.prototype.lineNo=function(){return re(this)},Lt(tn);var en={},nn={};function rn(t,e){if(!t||/^\s*$/.test(t))return null;var n=e.addModeClass?nn:en;return n[t]||(n[t]=t.replace(/\S+/g,"cm-$&"))}function on(t,e){var n=T("span",null,null,b?"padding-right: .1px":null),i={pre:T("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};e.measure={};for(var r=0;r<=(e.rest?e.rest.length:0);r++){var o=r?e.rest[r-1]:e.line,a=void 0;i.pos=0,i.addToken=ln,Bt(t.display.measure)&&(a=yt(o,t.doc.direction))&&(i.addToken=sn(i.addToken,a)),i.map=[],cn(o,i,xe(t,o,e!=t.display.externalMeasured&&re(o))),o.styleClasses&&(o.styleClasses.bgClass&&(i.bgClass=I(o.styleClasses.bgClass,i.bgClass||"")),o.styleClasses.textClass&&(i.textClass=I(o.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(_t(t.display.measure))),0==r?(e.measure.map=i.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(i.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(b){var l=i.content.lastChild;(/\bcm-tab\b/.test(l.className)||l.querySelector&&l.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return St(t,"renderLine",t,e.line,i.pre),i.pre.className&&(i.textClass=I(i.pre.className,i.textClass||"")),i}function an(t){var e=A("span","â€¢","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function ln(t,e,n,i,r,o,a){if(e){var l,s=t.splitSpaces?function(t,e){if(1<t.length&&!/  /.test(t))return t;for(var n=e,i="",r=0;r<t.length;r++){var o=t.charAt(r);" "!=o||!n||r!=t.length-1&&32!=t.charCodeAt(r+1)||(o="Â "),i+=o,n=" "==o}return i}(e,t.trailingSpace):e,u=t.cm.state.specialChars,c=!1;if(u.test(e)){l=document.createDocumentFragment();for(var h=0;;){u.lastIndex=h;var d=u.exec(e),f=d?d.index-h:e.length-h;if(f){var p=document.createTextNode(s.slice(h,h+f));w&&C<9?l.appendChild(A("span",[p])):l.appendChild(p),t.map.push(t.pos,t.pos+f,p),t.col+=f,t.pos+=f}if(!d)break;h+=1+f;var g=void 0;if("\t"==d[0]){var m=t.cm.options.tabSize,v=m-t.col%m;(g=l.appendChild(A("span",q(v),"cm-tab"))).setAttribute("role","presentation"),g.setAttribute("cm-text","\t"),t.col+=v}else"\r"==d[0]||"\n"==d[0]?(g=l.appendChild(A("span","\r"==d[0]?"â":"â¤","cm-invalidchar"))).setAttribute("cm-text",d[0]):((g=t.cm.options.specialCharPlaceholder(d[0])).setAttribute("cm-text",d[0]),w&&C<9?l.appendChild(A("span",[g])):l.appendChild(g)),t.col+=1;t.map.push(t.pos,t.pos+1,g),t.pos++}}else t.col+=e.length,l=document.createTextNode(s),t.map.push(t.pos,t.pos+e.length,l),w&&C<9&&(c=!0),t.pos+=e.length;if(t.trailingSpace=32==s.charCodeAt(e.length-1),n||i||r||c||o){var y=n||"";i&&(y+=i),r&&(y+=r);var b=A("span",[l],y,o);if(a)for(var x in a)a.hasOwnProperty(x)&&"style"!=x&&"class"!=x&&b.setAttribute(x,a[x]);return t.content.appendChild(b)}t.content.appendChild(l)}}function sn(h,d){return function(t,e,n,i,r,o,a){n=n?n+" cm-force-border":"cm-force-border";for(var l=t.pos,s=l+e.length;;){for(var u=void 0,c=0;c<d.length&&!((u=d[c]).to>l&&u.from<=l);c++);if(u.to>=s)return h(t,e,n,i,r,o,a);h(t,e.slice(0,u.to-l),n,i,null,o,a),i=null,e=e.slice(u.to-l),l=u.to}}}function un(t,e,n,i){var r=!i&&n.widgetNode;r&&t.map.push(t.pos,t.pos+e,r),!i&&t.cm.display.input.needsContentAttribute&&(r=r||t.content.appendChild(document.createElement("span"))).setAttribute("cm-marker",n.id),r&&(t.cm.display.input.setUneditable(r),t.content.appendChild(r)),t.pos+=e,t.trailingSpace=!1}function cn(t,e,n){var i=t.markedSpans,r=t.text,o=0;if(i)for(var a,l,s,u,c,h,d,f=r.length,p=0,g=1,m="",v=0;;){if(v==p){s=u=c=l="",h=d=null,v=1/0;for(var y=[],b=void 0,x=0;x<i.length;++x){var w=i[x],C=w.marker;if("bookmark"==C.type&&w.from==p&&C.widgetNode)y.push(C);else if(w.from<=p&&(null==w.to||w.to>p||C.collapsed&&w.to==p&&w.from==p)){if(null!=w.to&&w.to!=p&&v>w.to&&(v=w.to,u=""),C.className&&(s+=" "+C.className),C.css&&(l=(l?l+";":"")+C.css),C.startStyle&&w.from==p&&(c+=" "+C.startStyle),C.endStyle&&w.to==v&&(b=b||[]).push(C.endStyle,w.to),C.title&&((d=d||{}).title=C.title),C.attributes)for(var S in C.attributes)(d=d||{})[S]=C.attributes[S];C.collapsed&&(!h||We(h.marker,C)<0)&&(h=w)}else w.from>p&&v>w.from&&(v=w.from)}if(b)for(var k=0;k<b.length;k+=2)b[k+1]==v&&(u+=" "+b[k]);if(!h||h.from==p)for(var D=0;D<y.length;++D)un(e,0,y[D]);if(h&&(h.from||0)==p){if(un(e,(null==h.to?f+1:h.to)-p,h.marker,null==h.from),null==h.to)return;h.to==p&&(h=!1)}}if(f<=p)break;for(var M=Math.min(f,v);;){if(m){var L=p+m.length;if(!h){var E=M<L?m.slice(0,M-p):m;e.addToken(e,E,a?a+s:s,c,p+E.length==v?u:"",l,d)}if(M<=L){m=m.slice(M-p),p=M;break}p=L,c=""}m=r.slice(o,o=n[g++]),a=rn(n[g++],e.cm.options)}}else for(var T=1;T<n.length;T+=2)e.addToken(e,r.slice(o,o=n[T]),rn(n[T+1],e.cm.options))}function hn(t,e,n){this.line=e,this.rest=function(t){for(var e,n;e=Ge(t);)t=e.find(1,!0).line,(n=n||[]).push(t);return n}(e),this.size=this.rest?re(K(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Ke(t,e)}function dn(t,e,n){for(var i,r=[],o=e;o<n;o=i){var a=new hn(t.doc,te(t.doc,o),o);i=o+a.size,r.push(a)}return r}var fn=null;function pn(t,e){var n=t.ownsGroup;if(n)try{!function(t){var e=t.delayedCallbacks,n=0;do{for(;n<e.length;n++)e[n].call(null);for(var i=0;i<t.ops.length;i++){var r=t.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(n<e.length)}(n)}finally{fn=null,e(n)}}var gn=null;function mn(t,e){var n=wt(t,e);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);fn?i=fn.delayedCallbacks:gn?i=gn:(i=gn=[],setTimeout(vn,0));for(var o=function(t){i.push(function(){return n[t].apply(null,r)})},a=0;a<n.length;++a)o(a)}}function vn(){var t=gn;gn=null;for(var e=0;e<t.length;++e)t[e]()}function yn(t,e,n,i){for(var r=0;r<e.changes.length;r++){var o=e.changes[r];"text"==o?wn(t,e):"gutter"==o?Sn(t,e,n,i):"class"==o?Cn(t,e):"widget"==o&&kn(t,e,i)}e.changes=null}function bn(t){return t.node==t.text&&(t.node=A("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),w&&C<8&&(t.node.style.zIndex=2)),t.node}function xn(t,e){var n=t.display.externalMeasured;return n&&n.line==e.line?(t.display.externalMeasured=null,e.measure=n.measure,n.built):on(t,e)}function wn(t,e){var n=e.text.className,i=xn(t,e);e.text==e.node&&(e.node=i.pre),e.text.parentNode.replaceChild(i.pre,e.text),e.text=i.pre,i.bgClass!=e.bgClass||i.textClass!=e.textClass?(e.bgClass=i.bgClass,e.textClass=i.textClass,Cn(t,e)):n&&(e.text.className=n)}function Cn(t,e){!function(t,e){var n=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),e.background)n?e.background.className=n:(e.background.parentNode.removeChild(e.background),e.background=null);else if(n){var i=bn(e);e.background=i.insertBefore(A("div",null,n),i.firstChild),t.display.input.setUneditable(e.background)}}(t,e),e.line.wrapClass?bn(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var n=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=n||""}function Sn(t,e,n,i){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var r=bn(e);e.gutterBackground=A("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),t.display.input.setUneditable(e.gutterBackground),r.insertBefore(e.gutterBackground,e.text)}var o=e.line.gutterMarkers;if(t.options.lineNumbers||o){var a=bn(e),l=e.gutter=A("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(t.display.input.setUneditable(l),a.insertBefore(l,e.text),e.line.gutterClass&&(l.className+=" "+e.line.gutterClass),!t.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(e.lineNumber=l.appendChild(A("div",le(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),o)for(var s=0;s<t.display.gutterSpecs.length;++s){var u=t.display.gutterSpecs[s].className,c=o.hasOwnProperty(u)&&o[u];c&&l.appendChild(A("div",[c],"CodeMirror-gutter-elt","left: "+i.gutterLeft[u]+"px; width: "+i.gutterWidth[u]+"px"))}}}function kn(t,e,n){e.alignable&&(e.alignable=null);for(var i=k("CodeMirror-linewidget"),r=e.node.firstChild,o=void 0;r;r=o)o=r.nextSibling,i.test(r)&&e.node.removeChild(r);Dn(t,e,n)}function Dn(t,e,n){if(Mn(t,e.line,e,n,!0),e.rest)for(var i=0;i<e.rest.length;i++)Mn(t,e.rest[i],e,n,!1)}function Mn(t,e,n,i,r){if(e.widgets)for(var o=bn(n),a=0,l=e.widgets;a<l.length;++a){var s=l[a],u=A("div",[s.node],"CodeMirror-linewidget"+(s.className?" "+s.className:""));s.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),Ln(s,u,n,i),t.display.input.setUneditable(u),r&&s.above?o.insertBefore(u,n.gutter||n.text):o.appendChild(u),mn(s,"redraw")}}function Ln(t,e,n,i){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var r=i.wrapperWidth;e.style.left=i.fixedPos+"px",t.coverGutter||(r-=i.gutterTotalWidth,e.style.paddingLeft=i.gutterTotalWidth+"px"),e.style.width=r+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-i.gutterTotalWidth+"px"))}function En(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!N(document.body,t.node)){var n="position: relative;";t.coverGutter&&(n+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(n+="width: "+e.display.wrapper.clientWidth+"px;"),E(e.display.measure,A("div",[t.node],null,n))}return t.height=t.node.parentNode.offsetHeight}function Tn(t,e){for(var n=Ot(e);n!=t.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==t.sizer&&n!=t.mover)return!0}function An(t){return t.lineSpace.offsetTop}function Nn(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function On(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=E(t.measure,A("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(t.cachedPaddingH=i),i}function Fn(t){return R-t.display.nativeBarWidth}function In(t){return t.display.scroller.clientWidth-Fn(t)-t.display.barWidth}function Pn(t){return t.display.scroller.clientHeight-Fn(t)-t.display.barHeight}function zn(t,e,n){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var i=0;i<t.rest.length;i++)if(t.rest[i]==e)return{map:t.measure.maps[i],cache:t.measure.caches[i]};for(var r=0;r<t.rest.length;r++)if(re(t.rest[r])>n)return{map:t.measure.maps[r],cache:t.measure.caches[r],before:!0}}function _n(t,e,n,i){return Wn(t,Hn(t,e),n,i)}function Bn(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[gi(t,e)];var n=t.display.externalMeasured;return n&&e>=n.lineN&&e<n.lineN+n.size?n:void 0}function Hn(t,e){var n=re(e),i=Bn(t,n);i&&!i.text?i=null:i&&i.changes&&(yn(t,i,n,ci(t)),t.curOp.forceUpdate=!0);var r=zn(i=i||function(t,e){var n=re(e=Ye(e)),i=t.display.externalMeasured=new hn(t.doc,e,n);i.lineN=n;var r=i.built=on(t,i);return i.text=r.pre,E(t.display.lineMeasure,r.pre),i}(t,e),e,n);return{line:e,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function Wn(t,e,n,i,r){e.before&&(n=-1);var o,a=n+(i||"");return e.cache.hasOwnProperty(a)?o=e.cache[a]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(function(t,e,n){var i=t.options.lineWrapping,r=i&&In(t);if(!e.measure.heights||i&&e.measure.width!=r){var o=e.measure.heights=[];if(i){e.measure.width=r;for(var a=e.text.firstChild.getClientRects(),l=0;l<a.length-1;l++){var s=a[l],u=a[l+1];2<Math.abs(s.bottom-u.bottom)&&o.push((s.bottom+u.top)/2-n.top)}}o.push(n.bottom-n.top)}}(t,e.view,e.rect),e.hasHeights=!0),(o=function(t,e,n,i){var r,o=Gn(e.map,n,i),a=o.node,l=o.start,s=o.end,u=o.collapse;if(3==a.nodeType){for(var c=0;c<4;c++){for(;l&&rt(e.line.text.charAt(o.coverStart+l));)--l;for(;o.coverStart+s<o.coverEnd&&rt(e.line.text.charAt(o.coverStart+s));)++s;if((r=w&&C<9&&0==l&&s==o.coverEnd-o.coverStart?a.parentNode.getBoundingClientRect():Un(D(a,l,s).getClientRects(),i)).left||r.right||0==l)break;s=l,--l,u="right"}w&&C<11&&(r=function(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(t){if(null!=Gt)return Gt;var e=E(t,A("span","x")),n=e.getBoundingClientRect(),i=D(e,0,1).getBoundingClientRect();return Gt=1<Math.abs(n.left-i.left)}(t))return e;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*n,right:e.right*n,top:e.top*i,bottom:e.bottom*i}}(t.display.measure,r))}else{var h;0<l&&(u=i="right"),r=t.options.lineWrapping&&1<(h=a.getClientRects()).length?h["right"==i?h.length-1:0]:a.getBoundingClientRect()}if(w&&C<9&&!l&&(!r||!r.left&&!r.right)){var d=a.parentNode.getClientRects()[0];r=d?{left:d.left,right:d.left+ui(t.display),top:d.top,bottom:d.bottom}:jn}for(var f=r.top-e.rect.top,p=r.bottom-e.rect.top,g=(f+p)/2,m=e.view.measure.heights,v=0;v<m.length-1&&!(g<m[v]);v++);var y=v?m[v-1]:0,b=m[v],x={left:("right"==u?r.right:r.left)-e.rect.left,right:("left"==u?r.left:r.right)-e.rect.left,top:y,bottom:b};r.left||r.right||(x.bogus=!0);t.options.singleCursorHeightPerLine||(x.rtop=f,x.rbottom=p);return x}(t,e,n,i)).bogus||(e.cache[a]=o)),{left:o.left,right:o.right,top:r?o.rtop:o.top,bottom:r?o.rbottom:o.bottom}}var Rn,jn={left:0,right:0,top:0,bottom:0};function Gn(t,e,n){for(var i,r,o,a,l,s,u=0;u<t.length;u+=3)if(l=t[u],s=t[u+1],e<l?(r=0,o=1,a="left"):e<s?o=(r=e-l)+1:(u==t.length-3||e==s&&t[u+3]>e)&&(r=(o=s-l)-1,s<=e&&(a="right")),null!=r){if(i=t[u+2],l==s&&n==(i.insertLeft?"left":"right")&&(a=n),"left"==n&&0==r)for(;u&&t[u-2]==t[u-3]&&t[u-1].insertLeft;)i=t[2+(u-=3)],a="left";if("right"==n&&r==s-l)for(;u<t.length-3&&t[u+3]==t[u+4]&&!t[u+5].insertLeft;)i=t[(u+=3)+2],a="right";break}return{node:i,start:r,end:o,collapse:a,coverStart:l,coverEnd:s}}function Un(t,e){var n=jn;if("left"==e)for(var i=0;i<t.length&&(n=t[i]).left==n.right;i++);else for(var r=t.length-1;0<=r&&(n=t[r]).left==n.right;r--);return n}function Xn(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function Yn(t){t.display.externalMeasure=null,L(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)Xn(t.display.view[e])}function Vn(t){Yn(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function qn(){return a&&h?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Kn(){return a&&h?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function $n(t){var e=0;if(t.widgets)for(var n=0;n<t.widgets.length;++n)t.widgets[n].above&&(e+=En(t.widgets[n]));return e}function Zn(t,e,n,i,r){if(!r){var o=$n(e);n.top+=o,n.bottom+=o}if("line"==i)return n;i=i||"local";var a=Ze(e);if("local"==i?a+=An(t.display):a-=t.display.viewOffset,"page"==i||"window"==i){var l=t.display.lineSpace.getBoundingClientRect();a+=l.top+("window"==i?0:Kn());var s=l.left+("window"==i?0:qn());n.left+=s,n.right+=s}return n.top+=a,n.bottom+=a,n}function Qn(t,e,n){if("div"==n)return e;var i=e.left,r=e.top;if("page"==n)i-=qn(),r-=Kn();else if("local"==n||!n){var o=t.display.sizer.getBoundingClientRect();i+=o.left,r+=o.top}var a=t.display.lineSpace.getBoundingClientRect();return{left:i-a.left,top:r-a.top}}function Jn(t,e,n,i,r){return Zn(t,i=i||te(t.doc,e.line),_n(t,i,e.ch,r),n)}function ti(i,t,r,o,a,l){function s(t,e){var n=Wn(i,a,t,e?"right":"left",l);return e?n.left=n.right:n.right=n.left,Zn(i,o,n,r)}o=o||te(i.doc,t.line),a=a||Hn(i,o);var u=yt(o,i.doc.direction),e=t.ch,n=t.sticky;if(e>=o.text.length?(e=o.text.length,n="before"):e<=0&&(e=0,n="after"),!u)return s("before"==n?e-1:e,"before"==n);function c(t,e,n){return s(n?t-1:t,1==u[e].level!=n)}var h=st(u,e,n),d=lt,f=c(e,h,"before"==n);return null!=d&&(f.other=c(e,d,"before"!=n)),f}function ei(t,e){var n=0;e=ge(t.doc,e),t.options.lineWrapping||(n=ui(t.display)*e.ch);var i=te(t.doc,e.line),r=Ze(i)+An(t.display);return{left:n,right:n,top:r,bottom:r+i.height}}function ni(t,e,n,i,r){var o=se(t,e,n);return o.xRel=r,i&&(o.outside=i),o}function ii(t,e,n){var i=t.doc;if((n+=t.display.viewOffset)<0)return ni(i.first,0,null,-1,-1);var r=oe(i,n),o=i.first+i.size-1;if(o<r)return ni(i.first+i.size-1,te(i,o).text.length,null,1,1);e<0&&(e=0);for(var a=te(i,r);;){var l=li(t,a,r,e,n),s=Ue(a,l.ch+(0<l.xRel||0<l.outside?1:0));if(!s)return l;var u=s.find(1);if(u.line==r)return u;a=te(i,r=u.line)}}function ri(e,t,n,i){i-=$n(t);var r=t.text.length,o=at(function(t){return Wn(e,n,t-1).bottom<=i},r,0);return{begin:o,end:r=at(function(t){return Wn(e,n,t).top>i},o,r)}}function oi(t,e,n,i){return ri(t,e,n=n||Hn(t,e),Zn(t,e,Wn(t,n,i),"line").top)}function ai(t,e,n,i){return!(t.bottom<=n)&&(t.top>n||(i?t.left:t.right)>e)}function li(n,t,e,i,r){r-=Ze(t);var o=Hn(n,t),a=$n(t),l=0,s=t.text.length,u=!0,c=yt(t,n.doc.direction);if(c){var h=(n.options.lineWrapping?function(t,e,n,i,r,o,a){var l=ri(t,e,i,a),s=l.begin,u=l.end;/\s/.test(e.text.charAt(u-1))&&u--;for(var c=null,h=null,d=0;d<r.length;d++){var f=r[d];if(!(f.from>=u||f.to<=s)){var p=1!=f.level,g=Wn(t,i,p?Math.min(u,f.to)-1:Math.max(s,f.from)).right,m=g<o?o-g+1e9:g-o;(!c||m<h)&&(c=f,h=m)}}c=c||r[r.length-1];c.from<s&&(c={from:s,to:c.to,level:c.level});c.to>u&&(c={from:c.from,to:u,level:c.level});return c}:function(i,r,o,a,l,s,u){var t=at(function(t){var e=l[t],n=1!=e.level;return ai(ti(i,se(o,n?e.to:e.from,n?"before":"after"),"line",r,a),s,u,!0)},0,l.length-1),e=l[t];if(0<t){var n=1!=e.level,c=ti(i,se(o,n?e.from:e.to,n?"after":"before"),"line",r,a);ai(c,s,u,!0)&&c.top>u&&(e=l[t-1])}return e})(n,t,e,o,c,i,r);l=(u=1!=h.level)?h.from:h.to-1,s=u?h.to:h.from-1}var d,f,p=null,g=null,m=at(function(t){var e=Wn(n,o,t);return e.top+=a,e.bottom+=a,!!ai(e,i,r,!1)&&(e.top<=r&&e.left<=i&&(p=t,g=e),!0)},l,s),v=!1;if(g){var y=i-g.left<g.right-i,b=y==u;m=p+(b?0:1),f=b?"after":"before",d=y?g.left:g.right}else{u||m!=s&&m!=l||m++,f=0==m?"after":m==t.text.length?"before":Wn(n,o,m-(u?1:0)).bottom+a<=r==u?"after":"before";var x=ti(n,se(e,m,f),"line",t,o);d=x.left,v=r<x.top?-1:r>=x.bottom?1:0}return ni(e,m=ot(t.text,m,1),f,v,i-d)}function si(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Rn){Rn=A("pre",null,"CodeMirror-line-like");for(var e=0;e<49;++e)Rn.appendChild(document.createTextNode("x")),Rn.appendChild(A("br"));Rn.appendChild(document.createTextNode("x"))}E(t.measure,Rn);var n=Rn.offsetHeight/50;return 3<n&&(t.cachedTextHeight=n),L(t.measure),n||1}function ui(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=A("span","xxxxxxxxxx"),n=A("pre",[e],"CodeMirror-line-like");E(t.measure,n);var i=e.getBoundingClientRect(),r=(i.right-i.left)/10;return 2<r&&(t.cachedCharWidth=r),r||10}function ci(t){for(var e=t.display,n={},i={},r=e.gutters.clientLeft,o=e.gutters.firstChild,a=0;o;o=o.nextSibling,++a){var l=t.display.gutterSpecs[a].className;n[l]=o.offsetLeft+o.clientLeft+r,i[l]=o.clientWidth}return{fixedPos:hi(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:e.wrapper.clientWidth}}function hi(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function di(i){var r=si(i.display),o=i.options.lineWrapping,a=o&&Math.max(5,i.display.scroller.clientWidth/ui(i.display)-3);return function(t){if(Ke(i.doc,t))return 0;var e=0;if(t.widgets)for(var n=0;n<t.widgets.length;n++)t.widgets[n].height&&(e+=t.widgets[n].height);return o?e+(Math.ceil(t.text.length/a)||1)*r:e+r}}function fi(t){var e=t.doc,n=di(t);e.iter(function(t){var e=n(t);e!=t.height&&ie(t,e)})}function pi(t,e,n,i){var r=t.display;if(!n&&"true"==Ot(e).getAttribute("cm-not-content"))return null;var o,a,l=r.lineSpace.getBoundingClientRect();try{o=e.clientX-l.left,a=e.clientY-l.top}catch(e){return null}var s,u=ii(t,o,a);if(i&&0<u.xRel&&(s=te(t.doc,u.line).text).length==u.ch){var c=B(s,s.length,t.options.tabSize)-s.length;u=se(u.line,Math.max(0,Math.round((o-On(t.display).left)/ui(t.display))-c))}return u}function gi(t,e){if(e>=t.display.viewTo)return null;if((e-=t.display.viewFrom)<0)return null;for(var n=t.display.view,i=0;i<n.length;i++)if((e-=n[i].size)<0)return i}function mi(t,e,n,i){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),i=i||0;var r=t.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>e)&&(r.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=r.viewTo)Ae&&Ve(t.doc,e)<r.viewTo&&yi(t);else if(n<=r.viewFrom)Ae&&qe(t.doc,n+i)>r.viewFrom?yi(t):(r.viewFrom+=i,r.viewTo+=i);else if(e<=r.viewFrom&&n>=r.viewTo)yi(t);else if(e<=r.viewFrom){var o=bi(t,n,n+i,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=i):yi(t)}else if(n>=r.viewTo){var a=bi(t,e,e,-1);a?(r.view=r.view.slice(0,a.index),r.viewTo=a.lineN):yi(t)}else{var l=bi(t,e,e,-1),s=bi(t,n,n+i,1);l&&s?(r.view=r.view.slice(0,l.index).concat(dn(t,l.lineN,s.lineN)).concat(r.view.slice(s.index)),r.viewTo+=i):yi(t)}var u=r.externalMeasured;u&&(n<u.lineN?u.lineN+=i:e<u.lineN+u.size&&(r.externalMeasured=null))}function vi(t,e,n){t.curOp.viewChanged=!0;var i=t.display,r=t.display.externalMeasured;if(r&&e>=r.lineN&&e<r.lineN+r.size&&(i.externalMeasured=null),!(e<i.viewFrom||e>=i.viewTo)){var o=i.view[gi(t,e)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==W(a,n)&&a.push(n)}}}function yi(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function bi(t,e,n,i){var r,o=gi(t,e),a=t.display.view;if(!Ae||n==t.doc.first+t.doc.size)return{index:o,lineN:n};for(var l=t.display.viewFrom,s=0;s<o;s++)l+=a[s].size;if(l!=e){if(0<i){if(o==a.length-1)return null;r=l+a[o].size-e,o++}else r=l-e;e+=r,n+=r}for(;Ve(t.doc,n)!=n;){if(o==(i<0?0:a.length-1))return null;n+=i*a[o-(i<0?1:0)].size,o+=i}return{index:o,lineN:n}}function xi(t){for(var e=t.display.view,n=0,i=0;i<e.length;i++){var r=e[i];r.hidden||r.node&&!r.changes||++n}return n}function wi(t){t.display.input.showSelection(t.display.input.prepareSelection())}function Ci(t,e){void 0===e&&(e=!0);for(var n=t.doc,i={},r=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(e||a!=n.sel.primIndex){var l=n.sel.ranges[a];if(!(l.from().line>=t.display.viewTo||l.to().line<t.display.viewFrom)){var s=l.empty();(s||t.options.showCursorWhenSelecting)&&Si(t,l.head,r),s||Di(t,l,o)}}return i}function Si(t,e,n){var i=ti(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),r=n.appendChild(A("div","Â ","CodeMirror-cursor"));if(r.style.left=i.left+"px",r.style.top=i.top+"px",r.style.height=Math.max(0,i.bottom-i.top)*t.options.cursorHeight+"px",i.other){var o=n.appendChild(A("div","Â ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=i.other.left+"px",o.style.top=i.other.top+"px",o.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function ki(t,e){return t.top-e.top||t.left-e.left}function Di(a,t,e){var n=a.display,i=a.doc,r=document.createDocumentFragment(),o=On(a.display),M=o.left,L=Math.max(n.sizerWidth,In(a)-n.sizer.offsetLeft)-o.right,E="ltr"==i.direction;function T(t,e,n,i){e<0&&(e=0),e=Math.round(e),i=Math.round(i),r.appendChild(A("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px;\n                             top: "+e+"px; width: "+(null==n?L-t:n)+"px;\n                             height: "+(i-e)+"px"))}function l(n,y,b){var x,w,o=te(i,n),C=o.text.length;function S(t,e){return Jn(a,se(n,t),"div",o,e)}function k(t,e,n){var i=oi(a,o,null,t),r="ltr"==e==("after"==n)?"left":"right";return S("after"==n?i.begin:i.end-(/\s/.test(o.text.charAt(i.end-1))?2:1),r)[r]}var D=yt(o,i.direction);return function(t,e,n,i){if(!t)return i(e,n,"ltr",0);for(var r=!1,o=0;o<t.length;++o){var a=t[o];(a.from<n&&a.to>e||e==n&&a.to==e)&&(i(Math.max(a.from,e),Math.min(a.to,n),1==a.level?"rtl":"ltr",o),r=!0)}r||i(e,n,"ltr")}(D,y||0,null==b?C:b,function(t,e,n,i){var r="ltr"==n,o=S(t,r?"left":"right"),a=S(e-1,r?"right":"left"),l=null==y&&0==t,s=null==b&&e==C,u=0==i,c=!D||i==D.length-1;if(a.top-o.top<=3){var h=(E?s:l)&&c,d=(E?l:s)&&u?M:(r?o:a).left,f=h?L:(r?a:o).right;T(d,o.top,f-d,o.bottom)}else{var p,g,m,v;v=r?(p=E&&l&&u?M:o.left,g=E?L:k(t,n,"before"),m=E?M:k(e,n,"after"),E&&s&&c?L:a.right):(p=E?k(t,n,"before"):M,g=!E&&l&&u?L:o.right,m=!E&&s&&c?M:a.left,E?k(e,n,"after"):L),T(p,o.top,g-p,o.bottom),o.bottom<a.top&&T(M,o.bottom,null,a.top),T(m,a.top,v-m,a.bottom)}(!x||ki(o,x)<0)&&(x=o),ki(a,x)<0&&(x=a),(!w||ki(o,w)<0)&&(w=o),ki(a,w)<0&&(w=a)}),{start:x,end:w}}var s=t.from(),u=t.to();if(s.line==u.line)l(s.line,s.ch,u.ch);else{var c=te(i,s.line),h=te(i,u.line),d=Ye(c)==Ye(h),f=l(s.line,s.ch,d?c.text.length+1:null).end,p=l(u.line,d?0:null,u.ch).start;d&&(f.top<p.top-2?(T(f.right,f.top,null,f.bottom),T(M,p.top,p.left,p.bottom)):T(f.right,f.top,p.left-f.right,f.bottom)),f.bottom<p.top&&T(M,f.bottom,null,p.top)}e.appendChild(r)}function Mi(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursorDiv.style.visibility="",0<t.options.cursorBlinkRate?e.blinker=setInterval(function(){return e.cursorDiv.style.visibility=(n=!n)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function Li(t){t.state.focused||(t.display.input.focus(),Ti(t))}function Ei(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,Ai(t))},100)}function Ti(t,e){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(St(t,"focus",t,e),t.state.focused=!0,F(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),b&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),Mi(t))}function Ai(t,e){t.state.delayingBlurEvent||(t.state.focused&&(St(t,"blur",t,e),t.state.focused=!1,M(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function Ni(t){for(var e=t.display,n=e.lineDiv.offsetTop,i=0;i<e.view.length;i++){var r=e.view[i],o=t.options.lineWrapping,a=void 0,l=0;if(!r.hidden){if(w&&C<8){var s=r.node.offsetTop+r.node.offsetHeight;a=s-n,n=s}else{var u=r.node.getBoundingClientRect();a=u.bottom-u.top,!o&&r.text.firstChild&&(l=r.text.firstChild.getBoundingClientRect().right-u.left-1)}var c=r.line.height-a;if((.005<c||c<-.005)&&(ie(r.line,a),Oi(r.line),r.rest))for(var h=0;h<r.rest.length;h++)Oi(r.rest[h]);if(l>t.display.sizerWidth){var d=Math.ceil(l/ui(t.display));d>t.display.maxLineLength&&(t.display.maxLineLength=d,t.display.maxLine=r.line,t.display.maxLineChanged=!0)}}}}function Oi(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e){var n=t.widgets[e],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function Fi(t,e,n){var i=n&&null!=n.top?Math.max(0,n.top):t.scroller.scrollTop;i=Math.floor(i-An(t));var r=n&&null!=n.bottom?n.bottom:i+t.wrapper.clientHeight,o=oe(e,i),a=oe(e,r);if(n&&n.ensure){var l=n.ensure.from.line,s=n.ensure.to.line;l<o?a=oe(e,Ze(te(e,o=l))+t.wrapper.clientHeight):Math.min(s,e.lastLine())>=a&&(o=oe(e,Ze(te(e,s))-t.wrapper.clientHeight),a=s)}return{from:o,to:Math.max(a,o+1)}}function Ii(t,e){var n=t.display,i=si(t.display);e.top<0&&(e.top=0);var r=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:n.scroller.scrollTop,o=Pn(t),a={};e.bottom-e.top>o&&(e.bottom=e.top+o);var l=t.doc.height+Nn(n),s=e.top<i,u=e.bottom>l-i;if(e.top<r)a.scrollTop=s?0:e.top;else if(e.bottom>r+o){var c=Math.min(e.top,(u?l:e.bottom)-o);c!=r&&(a.scrollTop=c)}var h=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:n.scroller.scrollLeft,d=In(t)-(t.options.fixedGutter?n.gutters.offsetWidth:0),f=e.right-e.left>d;return f&&(e.right=e.left+d),e.left<10?a.scrollLeft=0:e.left<h?a.scrollLeft=Math.max(0,e.left-(f?0:10)):e.right>d+h-3&&(a.scrollLeft=e.right+(f?0:10)-d),a}function Pi(t,e){null!=e&&(Bi(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+e)}function zi(t){Bi(t);var e=t.getCursor();t.curOp.scrollToPos={from:e,to:e,margin:t.options.cursorScrollMargin}}function _i(t,e,n){null==e&&null==n||Bi(t),null!=e&&(t.curOp.scrollLeft=e),null!=n&&(t.curOp.scrollTop=n)}function Bi(t){var e=t.curOp.scrollToPos;e&&(t.curOp.scrollToPos=null,Hi(t,ei(t,e.from),ei(t,e.to),e.margin))}function Hi(t,e,n,i){var r=Ii(t,{left:Math.min(e.left,n.left),top:Math.min(e.top,n.top)-i,right:Math.max(e.right,n.right),bottom:Math.max(e.bottom,n.bottom)+i});_i(t,r.scrollLeft,r.scrollTop)}function Wi(t,e){Math.abs(t.doc.scrollTop-e)<2||(g||dr(t,{top:e}),Ri(t,e,!0),g&&dr(t),lr(t,100))}function Ri(t,e,n){e=Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,e),t.display.scroller.scrollTop==e&&!n||(t.doc.scrollTop=e,t.display.scrollbars.setScrollTop(e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e))}function ji(t,e,n,i){e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)&&!i||(t.doc.scrollLeft=e,gr(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function Gi(t){var e=t.display,n=e.gutters.offsetWidth,i=Math.round(t.doc.height+Nn(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+Fn(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:n}}function Ui(t,e,n){this.cm=n;var i=this.vert=A("div",[A("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=A("div",[A("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=r.tabIndex=-1,t(i),t(r),xt(i,"scroll",function(){i.clientHeight&&e(i.scrollTop,"vertical")}),xt(r,"scroll",function(){r.clientWidth&&e(r.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,w&&C<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}Ui.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,n=t.scrollHeight>t.clientHeight+1,i=t.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=e?i+"px":"0";var r=t.viewHeight-(e?i:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+r)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(e){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=t.barLeft+"px";var o=t.viewWidth-t.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&0<t.clientHeight&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:e?i:0}},Ui.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Ui.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Ui.prototype.zeroWidthHack=function(){var t=x&&!l?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new H,this.disableVert=new H},Ui.prototype.enableZeroWidthBar=function(n,i,r){n.style.pointerEvents="auto",i.set(1e3,function t(){var e=n.getBoundingClientRect();("vert"==r?document.elementFromPoint(e.right-1,(e.top+e.bottom)/2):document.elementFromPoint((e.right+e.left)/2,e.bottom-1))!=n?n.style.pointerEvents="none":i.set(1e3,t)})},Ui.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};function Xi(){}function Yi(t,e){e=e||Gi(t);var n=t.display.barWidth,i=t.display.barHeight;Vi(t,e);for(var r=0;r<4&&n!=t.display.barWidth||i!=t.display.barHeight;r++)n!=t.display.barWidth&&t.options.lineWrapping&&Ni(t),Vi(t,Gi(t)),n=t.display.barWidth,i=t.display.barHeight}function Vi(t,e){var n=t.display,i=n.scrollbars.update(e);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=e.gutterWidth+"px"):n.gutterFiller.style.display=""}Xi.prototype.update=function(){return{bottom:0,right:0}},Xi.prototype.setScrollLeft=function(){},Xi.prototype.setScrollTop=function(){},Xi.prototype.clear=function(){};var qi={native:Ui,null:Xi};function Ki(n){n.display.scrollbars&&(n.display.scrollbars.clear(),n.display.scrollbars.addClass&&M(n.display.wrapper,n.display.scrollbars.addClass)),n.display.scrollbars=new qi[n.options.scrollbarStyle](function(t){n.display.wrapper.insertBefore(t,n.display.scrollbarFiller),xt(t,"mousedown",function(){n.state.focused&&setTimeout(function(){return n.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,e){("horizontal"==e?ji:Wi)(n,t)},n),n.display.scrollbars.addClass&&F(n.display.wrapper,n.display.scrollbars.addClass)}var $i=0;function Zi(t){var e;t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++$i},e=t.curOp,fn?fn.ops.push(e):e.ownsGroup=fn={ops:[e],delayedCallbacks:[]}}function Qi(t){var e=t.curOp;e&&pn(e,function(t){for(var e=0;e<t.ops.length;e++)t.ops[e].cm.curOp=null;!function(t){for(var e=t.ops,n=0;n<e.length;n++)Ji(e[n]);for(var i=0;i<e.length;i++)(r=e[i]).updatedDisplay=r.mustUpdate&&cr(r.cm,r.update);var r;for(var o=0;o<e.length;o++)tr(e[o]);for(var a=0;a<e.length;a++)er(e[a]);for(var l=0;l<e.length;l++)nr(e[l])}(t)})}function Ji(t){var e,n,i=t.cm,r=i.display;!(n=(e=i).display).scrollbarsClipped&&n.scroller.offsetWidth&&(n.nativeBarWidth=n.scroller.offsetWidth-n.scroller.clientWidth,n.heightForcer.style.height=Fn(e)+"px",n.sizer.style.marginBottom=-n.nativeBarWidth+"px",n.sizer.style.borderRightWidth=Fn(e)+"px",n.scrollbarsClipped=!0),t.updateMaxLine&&Je(i),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<r.viewFrom||t.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&i.options.lineWrapping,t.update=t.mustUpdate&&new ur(i,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function tr(t){var e=t.cm,n=e.display;t.updatedDisplay&&Ni(e),t.barMeasure=Gi(e),n.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=_n(e,n.maxLine,n.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+t.adjustWidthTo+Fn(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+t.adjustWidthTo-In(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=n.input.prepareSelection())}function er(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&ji(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var n=t.focus&&t.focus==O();t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,n),!t.updatedDisplay&&t.startHeight==e.doc.height||Yi(e,t.barMeasure),t.updatedDisplay&&pr(e,t.barMeasure),t.selectionChanged&&Mi(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),n&&Li(t.cm)}function nr(t){var e=t.cm,n=e.display,i=e.doc;t.updatedDisplay&&hr(e,t.update),null==n.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=t.scrollTop&&Ri(e,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&ji(e,t.scrollLeft,!0,!0),t.scrollToPos&&function(t,e){if(!kt(t,"scrollCursorIntoView")){var n=t.display,i=n.sizer.getBoundingClientRect(),r=null;if(e.top+i.top<0?r=!0:e.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!u){var o=A("div","â€‹",null,"position: absolute;\n                         top: "+(e.top-n.viewOffset-An(t.display))+"px;\n                         height: "+(e.bottom-e.top+Fn(t)+n.barHeight)+"px;\n                         left: "+e.left+"px; width: "+Math.max(2,e.right-e.left)+"px;");t.display.lineSpace.appendChild(o),o.scrollIntoView(r),t.display.lineSpace.removeChild(o)}}}(e,function(t,e,n,i){var r;null==i&&(i=0),t.options.lineWrapping||e!=n||(n="before"==(e=e.ch?se(e.line,"before"==e.sticky?e.ch-1:e.ch,"after"):e).sticky?se(e.line,e.ch+1,"before"):e);for(var o=0;o<5;o++){var a=!1,l=ti(t,e),s=n&&n!=e?ti(t,n):l,u=Ii(t,r={left:Math.min(l.left,s.left),top:Math.min(l.top,s.top)-i,right:Math.max(l.left,s.left),bottom:Math.max(l.bottom,s.bottom)+i}),c=t.doc.scrollTop,h=t.doc.scrollLeft;if(null!=u.scrollTop&&(Wi(t,u.scrollTop),1<Math.abs(t.doc.scrollTop-c)&&(a=!0)),null!=u.scrollLeft&&(ji(t,u.scrollLeft),1<Math.abs(t.doc.scrollLeft-h)&&(a=!0)),!a)break}return r}(e,ge(i,t.scrollToPos.from),ge(i,t.scrollToPos.to),t.scrollToPos.margin));var r=t.maybeHiddenMarkers,o=t.maybeUnhiddenMarkers;if(r)for(var a=0;a<r.length;++a)r[a].lines.length||St(r[a],"hide");if(o)for(var l=0;l<o.length;++l)o[l].lines.length&&St(o[l],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&St(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function ir(t,e){if(t.curOp)return e();Zi(t);try{return e()}finally{Qi(t)}}function rr(t,e){return function(){if(t.curOp)return e.apply(t,arguments);Zi(t);try{return e.apply(t,arguments)}finally{Qi(t)}}}function or(t){return function(){if(this.curOp)return t.apply(this,arguments);Zi(this);try{return t.apply(this,arguments)}finally{Qi(this)}}}function ar(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Zi(t);try{return e.apply(this,arguments)}finally{Qi(t)}}}function lr(t,e){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(e,z(sr,t))}function sr(s){var u=s.doc;if(!(u.highlightFrontier>=s.display.viewTo)){var c=+new Date+s.options.workTime,h=we(s,u.highlightFrontier),d=[];u.iter(h.line,Math.min(u.first+u.size,s.display.viewTo+500),function(t){if(h.line>=s.display.viewFrom){var e=t.styles,n=t.text.length>s.options.maxHighlightLength?$t(u.mode,h.state):null,i=be(s,t,h,!0);n&&(h.state=n),t.styles=i.styles;var r=t.styleClasses,o=i.classes;o?t.styleClasses=o:r&&(t.styleClasses=null);for(var a=!e||e.length!=t.styles.length||r!=o&&(!r||!o||r.bgClass!=o.bgClass||r.textClass!=o.textClass),l=0;!a&&l<e.length;++l)a=e[l]!=t.styles[l];a&&d.push(h.line),t.stateAfter=h.save(),h.nextLine()}else t.text.length<=s.options.maxHighlightLength&&Ce(s,t.text,h),t.stateAfter=h.line%5==0?h.save():null,h.nextLine();if(+new Date>c)return lr(s,s.options.workDelay),!0}),u.highlightFrontier=h.line,u.modeFrontier=Math.max(u.modeFrontier,h.line),d.length&&ir(s,function(){for(var t=0;t<d.length;t++)vi(s,d[t],"text")})}}var ur=function(t,e,n){var i=t.display;this.viewport=e,this.visible=Fi(i,t.doc,e),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=In(t),this.force=n,this.dims=ci(t),this.events=[]};function cr(t,e){var n=t.display,i=t.doc;if(e.editorIsHidden)return yi(t),!1;if(!e.force&&e.visible.from>=n.viewFrom&&e.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==xi(t))return!1;mr(t)&&(yi(t),e.dims=ci(t));var r=i.first+i.size,o=Math.max(e.visible.from-t.options.viewportMargin,i.first),a=Math.min(r,e.visible.to+t.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(i.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(r,n.viewTo)),Ae&&(o=Ve(t.doc,o),a=qe(t.doc,a));var l,s,u,c,h=o!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=e.wrapperHeight||n.lastWrapWidth!=e.wrapperWidth;s=o,u=a,0==(c=(l=t).display).view.length||s>=c.viewTo||u<=c.viewFrom?(c.view=dn(l,s,u),c.viewFrom=s):(c.viewFrom>s?c.view=dn(l,s,c.viewFrom).concat(c.view):c.viewFrom<s&&(c.view=c.view.slice(gi(l,s))),c.viewFrom=s,c.viewTo<u?c.view=c.view.concat(dn(l,c.viewTo,u)):c.viewTo>u&&(c.view=c.view.slice(0,gi(l,u)))),c.viewTo=u,n.viewOffset=Ze(te(t.doc,n.viewFrom)),t.display.mover.style.top=n.viewOffset+"px";var d=xi(t);if(!h&&0==d&&!e.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var f=function(t){if(t.hasFocus())return null;var e=O();if(!e||!N(t.display.lineDiv,e))return null;var n={activeElt:e};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&N(t.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}(t);return 4<d&&(n.lineDiv.style.display="none"),function(n,t,e){var i=n.display,r=n.options.lineNumbers,o=i.lineDiv,a=o.firstChild;function l(t){var e=t.nextSibling;return b&&x&&n.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),e}for(var s=i.view,u=i.viewFrom,c=0;c<s.length;c++){var h=s[c];if(!h.hidden)if(h.node&&h.node.parentNode==o){for(;a!=h.node;)a=l(a);var d=r&&null!=t&&t<=u&&h.lineNumber;h.changes&&(-1<W(h.changes,"gutter")&&(d=!1),yn(n,h,u,e)),d&&(L(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(le(n.options,u)))),a=h.node.nextSibling}else{var f=(m=u,v=e,y=xn(p=n,g=h),g.text=g.node=y.pre,y.bgClass&&(g.bgClass=y.bgClass),y.textClass&&(g.textClass=y.textClass),Cn(p,g),Sn(p,g,m,v),Dn(p,g,v),g.node);o.insertBefore(f,a)}u+=h.size}var p,g,m,v,y;for(;a;)a=l(a)}(t,n.updateLineNumbers,e.dims),4<d&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(t){if(t&&t.activeElt&&t.activeElt!=O()&&(t.activeElt.focus(),t.anchorNode&&N(document.body,t.anchorNode)&&N(document.body,t.focusNode))){var e=window.getSelection(),n=document.createRange();n.setEnd(t.anchorNode,t.anchorOffset),n.collapse(!1),e.removeAllRanges(),e.addRange(n),e.extend(t.focusNode,t.focusOffset)}}(f),L(n.cursorDiv),L(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,h&&(n.lastWrapHeight=e.wrapperHeight,n.lastWrapWidth=e.wrapperWidth,lr(t,400)),!(n.updateLineNumbers=null)}function hr(t,e){for(var n=e.viewport,i=!0;(i&&t.options.lineWrapping&&e.oldDisplayWidth!=In(t)||(n&&null!=n.top&&(n={top:Math.min(t.doc.height+Nn(t.display)-Pn(t),n.top)}),e.visible=Fi(t.display,t.doc,n),!(e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)))&&cr(t,e);i=!1){Ni(t);var r=Gi(t);wi(t),Yi(t,r),pr(t,r),e.force=!1}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function dr(t,e){var n=new ur(t,e);if(cr(t,n)){Ni(t),hr(t,n);var i=Gi(t);wi(t),Yi(t,i),pr(t,i),n.finish()}}function fr(t){var e=t.gutters.offsetWidth;t.sizer.style.marginLeft=e+"px"}function pr(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+Fn(t)+"px"}function gr(t){var e=t.display,n=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var i=hi(e)-e.scroller.scrollLeft+t.doc.scrollLeft,r=e.gutters.offsetWidth,o=i+"px",a=0;a<n.length;a++)if(!n[a].hidden){t.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=o),n[a].gutterBackground&&(n[a].gutterBackground.style.left=o));var l=n[a].alignable;if(l)for(var s=0;s<l.length;s++)l[s].style.left=o}t.options.fixedGutter&&(e.gutters.style.left=i+r+"px")}}function mr(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=le(t.options,e.first+e.size-1),i=t.display;if(n.length==i.lineNumChars)return!1;var r=i.measure.appendChild(A("div",[A("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,a=r.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-a)+1,i.lineNumWidth=i.lineNumInnerWidth+a,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",fr(t.display),!0}function vr(t,e){for(var n=[],i=!1,r=0;r<t.length;r++){var o=t[r],a=null;if("string"!=typeof o&&(a=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!e)continue;i=!0}n.push({className:o,style:a})}return e&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function yr(t){var e=t.gutters,n=t.gutterSpecs;L(e),t.lineGutter=null;for(var i=0;i<n.length;++i){var r=n[i],o=r.className,a=r.style,l=e.appendChild(A("div",null,"CodeMirror-gutter "+o));a&&(l.style.cssText=a),"CodeMirror-linenumbers"==o&&((t.lineGutter=l).style.width=(t.lineNumWidth||1)+"px")}e.style.display=n.length?"":"none",fr(t)}function br(t){yr(t.display),mi(t),gr(t)}function xr(t,e,n,i){var r=this;this.input=n,r.scrollbarFiller=A("div",null,"CodeMirror-scrollbar-filler"),r.scrollbarFiller.setAttribute("cm-not-content","true"),r.gutterFiller=A("div",null,"CodeMirror-gutter-filler"),r.gutterFiller.setAttribute("cm-not-content","true"),r.lineDiv=T("div",null,"CodeMirror-code"),r.selectionDiv=A("div",null,null,"position: relative; z-index: 1"),r.cursorDiv=A("div",null,"CodeMirror-cursors"),r.measure=A("div",null,"CodeMirror-measure"),r.lineMeasure=A("div",null,"CodeMirror-measure"),r.lineSpace=T("div",[r.measure,r.lineMeasure,r.selectionDiv,r.cursorDiv,r.lineDiv],null,"position: relative; outline: none");var o=T("div",[r.lineSpace],"CodeMirror-lines");r.mover=A("div",[o],null,"position: relative"),r.sizer=A("div",[r.mover],"CodeMirror-sizer"),r.sizerWidth=null,r.heightForcer=A("div",null,null,"position: absolute; height: "+R+"px; width: 1px;"),r.gutters=A("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=A("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=A("div",[r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),w&&C<8&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),b||g&&d||(r.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(r.wrapper):t(r.wrapper)),r.viewFrom=r.viewTo=e.first,r.reportedViewFrom=r.reportedViewTo=e.first,r.view=[],r.renderedView=null,r.externalMeasured=null,r.viewOffset=0,r.lastWrapHeight=r.lastWrapWidth=0,r.updateLineNumbers=null,r.nativeBarWidth=r.barHeight=r.barWidth=0,r.scrollbarsClipped=!1,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.alignWidgets=!1,r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r.shift=!1,r.selForContextMenu=null,r.activeTouch=null,r.gutterSpecs=vr(i.gutters,i.lineNumbers),yr(r),n.init(r)}ur.prototype.signal=function(t,e){Mt(t,e)&&this.events.push(arguments)},ur.prototype.finish=function(){for(var t=0;t<this.events.length;t++)St.apply(null,this.events[t])};var wr=0,Cr=null;function Sr(t){var e=t.wheelDeltaX,n=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),{x:e,y:n}}function kr(t){var e=Sr(t);return e.x*=Cr,e.y*=Cr,e}function Dr(t,e){var n=Sr(e),i=n.x,r=n.y,o=t.display,a=o.scroller,l=a.scrollWidth>a.clientWidth,s=a.scrollHeight>a.clientHeight;if(i&&l||r&&s){if(r&&x&&b)t:for(var u=e.target,c=o.view;u!=a;u=u.parentNode)for(var h=0;h<c.length;h++)if(c[h].node==u){t.display.currentWheelTarget=u;break t}if(i&&!g&&!m&&null!=Cr)return r&&s&&Wi(t,Math.max(0,a.scrollTop+r*Cr)),ji(t,Math.max(0,a.scrollLeft+i*Cr)),(!r||r&&s)&&Et(e),void(o.wheelStartX=null);if(r&&null!=Cr){var d=r*Cr,f=t.doc.scrollTop,p=f+o.wrapper.clientHeight;d<0?f=Math.max(0,f+d-50):p=Math.min(t.doc.height,p+d+50),dr(t,{top:f,bottom:p})}wr<20&&(null==o.wheelStartX?(o.wheelStartX=a.scrollLeft,o.wheelStartY=a.scrollTop,o.wheelDX=i,o.wheelDY=r,setTimeout(function(){if(null!=o.wheelStartX){var t=a.scrollLeft-o.wheelStartX,e=a.scrollTop-o.wheelStartY,n=e&&o.wheelDY&&e/o.wheelDY||t&&o.wheelDX&&t/o.wheelDX;o.wheelStartX=o.wheelStartY=null,n&&(Cr=(Cr*wr+n)/(wr+1),++wr)}},200)):(o.wheelDX+=i,o.wheelDY+=r))}}w?Cr=-.53:g?Cr=15:a?Cr=-.7:s&&(Cr=-1/3);var Mr=function(t,e){this.ranges=t,this.primIndex=e};Mr.prototype.primary=function(){return this.ranges[this.primIndex]},Mr.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var n=this.ranges[e],i=t.ranges[e];if(!ce(n.anchor,i.anchor)||!ce(n.head,i.head))return!1}return!0},Mr.prototype.deepCopy=function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new Lr(he(this.ranges[e].anchor),he(this.ranges[e].head));return new Mr(t,this.primIndex)},Mr.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},Mr.prototype.contains=function(t,e){e=e||t;for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(0<=ue(e,i.from())&&ue(t,i.to())<=0)return n}return-1};var Lr=function(t,e){this.anchor=t,this.head=e};function Er(t,e,n){var i=t&&t.options.selectionsMayTouch,r=e[n];e.sort(function(t,e){return ue(t.from(),e.from())}),n=W(e,r);for(var o=1;o<e.length;o++){var a=e[o],l=e[o-1],s=ue(l.to(),a.from());if(i&&!a.empty()?0<s:0<=s){var u=fe(l.from(),a.from()),c=de(l.to(),a.to()),h=l.empty()?a.from()==a.head:l.from()==l.head;o<=n&&--n,e.splice(--o,2,new Lr(h?c:u,h?u:c))}}return new Mr(e,n)}function Tr(t,e){return new Mr([new Lr(t,e||t)],0)}function Ar(t){return t.text?se(t.from.line+t.text.length-1,K(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function Nr(t,e){if(ue(t,e.from)<0)return t;if(ue(t,e.to)<=0)return Ar(e);var n=t.line+e.text.length-(e.to.line-e.from.line)-1,i=t.ch;return t.line==e.to.line&&(i+=Ar(e).ch-e.to.ch),se(n,i)}function Or(t,e){for(var n=[],i=0;i<t.sel.ranges.length;i++){var r=t.sel.ranges[i];n.push(new Lr(Nr(r.anchor,e),Nr(r.head,e)))}return Er(t.cm,n,t.sel.primIndex)}function Fr(t,e,n){return t.line==e.line?se(n.line,t.ch-e.ch+n.ch):se(n.line+(t.line-e.line),t.ch)}function Ir(t){t.doc.mode=Vt(t.options,t.doc.modeOption),Pr(t)}function Pr(t){t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,lr(t,100),t.state.modeGen++,t.curOp&&mi(t)}function zr(t,e){return 0==e.from.ch&&0==e.to.ch&&""==K(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function _r(t,i,e,r){function o(t){return e?e[t]:null}function n(t,e,n){!function(t,e,n,i){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),ze(t),_e(t,n);var r=i?i(t):1;r!=t.height&&ie(t,r)}(t,e,n,r),mn(t,"change",t,i)}function a(t,e){for(var n=[],i=t;i<e;++i)n.push(new tn(u[i],o(i),r));return n}var l=i.from,s=i.to,u=i.text,c=te(t,l.line),h=te(t,s.line),d=K(u),f=o(u.length-1),p=s.line-l.line;if(i.full)t.insert(0,a(0,u.length)),t.remove(u.length,t.size-u.length);else if(zr(t,i)){var g=a(0,u.length-1);n(h,h.text,f),p&&t.remove(l.line,p),g.length&&t.insert(l.line,g)}else if(c==h)if(1==u.length)n(c,c.text.slice(0,l.ch)+d+c.text.slice(s.ch),f);else{var m=a(1,u.length-1);m.push(new tn(d+c.text.slice(s.ch),f,r)),n(c,c.text.slice(0,l.ch)+u[0],o(0)),t.insert(l.line+1,m)}else if(1==u.length)n(c,c.text.slice(0,l.ch)+u[0]+h.text.slice(s.ch),o(0)),t.remove(l.line+1,p);else{n(c,c.text.slice(0,l.ch)+u[0],o(0)),n(h,d+h.text.slice(s.ch),f);var v=a(1,u.length-1);1<p&&t.remove(l.line+1,p-1),t.insert(l.line+1,v)}mn(t,"change",t,i)}function Br(t,l,s){!function t(e,n,i){if(e.linked)for(var r=0;r<e.linked.length;++r){var o=e.linked[r];if(o.doc!=n){var a=i&&o.sharedHist;s&&!a||(l(o.doc,a),t(o.doc,e,a))}}}(t,null,!0)}function Hr(t,e){if(e.cm)throw new Error("This document is already in use.");fi((t.doc=e).cm=t),Ir(t),Wr(t),t.options.lineWrapping||Je(t),t.options.mode=e.modeOption,mi(t)}function Wr(t){("rtl"==t.doc.direction?F:M)(t.display.lineDiv,"CodeMirror-rtl")}function Rr(t){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function jr(t,e){var n={from:he(e.from),to:Ar(e),text:ee(t,e.from,e.to)};return Vr(t,n,e.from.line,e.to.line+1),Br(t,function(t){return Vr(t,n,e.from.line,e.to.line+1)},!0),n}function Gr(t){for(;t.length;){if(!K(t).ranges)break;t.pop()}}function Ur(t,e,n,i){var r=t.history;r.undone.length=0;var o,a,l,s=+new Date;if((r.lastOp==i||r.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&r.lastModTime>s-(t.cm?t.cm.options.historyEventDelay:500)||"*"==e.origin.charAt(0)))&&(o=(l=r).lastOp==i?(Gr(l.done),K(l.done)):l.done.length&&!K(l.done).ranges?K(l.done):1<l.done.length&&!l.done[l.done.length-2].ranges?(l.done.pop(),K(l.done)):void 0))a=K(o.changes),0==ue(e.from,e.to)&&0==ue(e.from,a.to)?a.to=Ar(e):o.changes.push(jr(t,e));else{var u=K(r.done);for(u&&u.ranges||Yr(t.sel,r.done),o={changes:[jr(t,e)],generation:r.generation},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=s,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=e.origin,a||St(t,"historyAdded")}function Xr(t,e,n,i){var r,o,a,l,s,u=t.history,c=i&&i.origin;n==u.lastSelOp||c&&u.lastSelOrigin==c&&(u.lastModTime==u.lastSelTime&&u.lastOrigin==c||(r=t,o=c,a=K(u.done),l=e,"*"==(s=o.charAt(0))||"+"==s&&a.ranges.length==l.ranges.length&&a.somethingSelected()==l.somethingSelected()&&new Date-r.history.lastSelTime<=(r.cm?r.cm.options.historyEventDelay:500)))?u.done[u.done.length-1]=e:Yr(e,u.done),u.lastSelTime=+new Date,u.lastSelOrigin=c,u.lastSelOp=n,i&&!1!==i.clearRedo&&Gr(u.undone)}function Yr(t,e){var n=K(e);n&&n.ranges&&n.equals(t)||e.push(t)}function Vr(e,n,t,i){var r=n["spans_"+e.id],o=0;e.iter(Math.max(e.first,t),Math.min(e.first+e.size,i),function(t){t.markedSpans&&((r=r||(n["spans_"+e.id]={}))[o]=t.markedSpans),++o})}function qr(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e=e||t.slice(0,n):e&&e.push(t[n]);return e?e.length?e:null:t}function Kr(t,e){var n=function(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var i=[],r=0;r<e.text.length;++r)i.push(qr(n[r]));return i}(t,e),i=Ie(t,e);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],a=i[r];if(o&&a)t:for(var l=0;l<a.length;++l){for(var s=a[l],u=0;u<o.length;++u)if(o[u].marker==s.marker)continue t;o.push(s)}else a&&(n[r]=a)}return n}function $r(t,e,n){for(var i=[],r=0;r<t.length;++r){var o=t[r];if(o.ranges)i.push(n?Mr.prototype.deepCopy.call(o):o);else{var a=o.changes,l=[];i.push({changes:l});for(var s=0;s<a.length;++s){var u=a[s],c=void 0;if(l.push({from:u.from,to:u.to,text:u.text}),e)for(var h in u)(c=h.match(/^spans_(\d+)$/))&&-1<W(e,Number(c[1]))&&(K(l)[h]=u[h],delete u[h])}}}return i}function Zr(t,e,n,i){if(i){var r=t.anchor;if(n){var o=ue(e,r)<0;o!=ue(n,r)<0?(r=e,e=n):o!=ue(e,n)<0&&(e=n)}return new Lr(r,e)}return new Lr(n||e,e)}function Qr(t,e,n,i,r){null==r&&(r=t.cm&&(t.cm.display.shift||t.extend)),io(t,new Mr([Zr(t.sel.primary(),e,n,r)],0),i)}function Jr(t,e,n){for(var i=[],r=t.cm&&(t.cm.display.shift||t.extend),o=0;o<t.sel.ranges.length;o++)i[o]=Zr(t.sel.ranges[o],e[o],null,r);io(t,Er(t.cm,i,t.sel.primIndex),n)}function to(t,e,n,i){var r=t.sel.ranges.slice(0);r[e]=n,io(t,Er(t.cm,r,t.sel.primIndex),i)}function eo(t,e,n,i){io(t,Tr(e,n),i)}function no(t,e,n){var i=t.history.done,r=K(i);r&&r.ranges?ro(t,i[i.length-1]=e,n):io(t,e,n)}function io(t,e,n){ro(t,e,n),Xr(t,t.sel,t.cm?t.cm.curOp.id:NaN,n)}function ro(t,e,n){var i,r,o,a;(Mt(t,"beforeSelectionChange")||t.cm&&Mt(t.cm,"beforeSelectionChange"))&&(i=t,o=n,a={ranges:(r=e).ranges,update:function(t){this.ranges=[];for(var e=0;e<t.length;e++)this.ranges[e]=new Lr(ge(i,t[e].anchor),ge(i,t[e].head))},origin:o&&o.origin},St(i,"beforeSelectionChange",i,a),i.cm&&St(i.cm,"beforeSelectionChange",i.cm,a),e=a.ranges!=r.ranges?Er(i.cm,a.ranges,a.ranges.length-1):r);var l=n&&n.bias||(ue(e.primary().head,t.sel.primary().head)<0?-1:1);oo(t,lo(t,e,l,!0)),n&&!1===n.scroll||!t.cm||zi(t.cm)}function oo(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,Dt(t.cm)),mn(t,"cursorActivity",t))}function ao(t){oo(t,lo(t,t.sel,null,!1))}function lo(t,e,n,i){for(var r,o=0;o<e.ranges.length;o++){var a=e.ranges[o],l=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[o],s=uo(t,a.anchor,l&&l.anchor,n,i),u=uo(t,a.head,l&&l.head,n,i);!r&&s==a.anchor&&u==a.head||((r=r||e.ranges.slice(0,o))[o]=new Lr(s,u))}return r?Er(t.cm,r,e.primIndex):e}function so(t,e,n,i,r){var o=te(t,e.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var l=o.markedSpans[a],s=l.marker,u="selectLeft"in s?!s.selectLeft:s.inclusiveLeft,c="selectRight"in s?!s.selectRight:s.inclusiveRight;if((null==l.from||(u?l.from<=e.ch:l.from<e.ch))&&(null==l.to||(c?l.to>=e.ch:l.to>e.ch))){if(r&&(St(s,"beforeCursorEnter"),s.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!s.atomic)continue;if(n){var h=s.find(i<0?1:-1),d=void 0;if((i<0?c:u)&&(h=co(t,h,-i,h&&h.line==e.line?o:null)),h&&h.line==e.line&&(d=ue(h,n))&&(i<0?d<0:0<d))return so(t,h,e,i,r)}var f=s.find(i<0?-1:1);return(i<0?u:c)&&(f=co(t,f,i,f.line==e.line?o:null)),f?so(t,f,e,i,r):null}}return e}function uo(t,e,n,i,r){var o=i||1,a=so(t,e,n,o,r)||!r&&so(t,e,n,o,!0)||so(t,e,n,-o,r)||!r&&so(t,e,n,-o,!0);return a||(t.cantEdit=!0,se(t.first,0))}function co(t,e,n,i){return n<0&&0==e.ch?e.line>t.first?ge(t,se(e.line-1)):null:0<n&&e.ch==(i||te(t,e.line)).text.length?e.line<t.first+t.size-1?se(e.line+1,0):null:new se(e.line,e.ch+n)}function ho(t){t.setSelection(se(t.firstLine(),0),se(t.lastLine()),G)}function fo(r,t,e){var o={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return o.canceled=!0}};return e&&(o.update=function(t,e,n,i){t&&(o.from=ge(r,t)),e&&(o.to=ge(r,e)),n&&(o.text=n),void 0!==i&&(o.origin=i)}),St(r,"beforeChange",r,o),r.cm&&St(r.cm,"beforeChange",r.cm,o),o.canceled?(r.cm&&(r.cm.curOp.updateInput=2),null):{from:o.from,to:o.to,text:o.text,origin:o.origin}}function po(t,e,n){if(t.cm){if(!t.cm.curOp)return rr(t.cm,po)(t,e,n);if(t.cm.state.suppressEdits)return}if(!(Mt(t,"beforeChange")||t.cm&&Mt(t.cm,"beforeChange"))||(e=fo(t,e,!0))){var i=Te&&!n&&function(t,e,n){var i=null;if(t.iter(e.line,n.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||i&&-1!=W(i,n)||(i=i||[]).push(n)}}),!i)return null;for(var r=[{from:e,to:n}],o=0;o<i.length;++o)for(var a=i[o],l=a.find(0),s=0;s<r.length;++s){var u=r[s];if(!(ue(u.to,l.from)<0||0<ue(u.from,l.to))){var c=[s,1],h=ue(u.from,l.from),d=ue(u.to,l.to);(h<0||!a.inclusiveLeft&&!h)&&c.push({from:u.from,to:l.from}),(0<d||!a.inclusiveRight&&!d)&&c.push({from:l.to,to:u.to}),r.splice.apply(r,c),s+=c.length-3}}return r}(t,e.from,e.to);if(i)for(var r=i.length-1;0<=r;--r)go(t,{from:i[r].from,to:i[r].to,text:r?[""]:e.text,origin:e.origin});else go(t,e)}}function go(t,n){if(1!=n.text.length||""!=n.text[0]||0!=ue(n.from,n.to)){var e=Or(t,n);Ur(t,n,e,t.cm?t.cm.curOp.id:NaN),yo(t,n,e,Ie(t,n));var i=[];Br(t,function(t,e){e||-1!=W(i,t.history)||(Co(t.history,n),i.push(t.history)),yo(t,n,null,Ie(t,n))})}}function mo(r,o,t){var e=r.cm&&r.cm.state.suppressEdits;if(!e||t){for(var a,n=r.history,i=r.sel,l="undo"==o?n.done:n.undone,s="undo"==o?n.undone:n.done,u=0;u<l.length&&(a=l[u],t?!a.ranges||a.equals(r.sel):a.ranges);u++);if(u!=l.length){for(n.lastOrigin=n.lastSelOrigin=null;;){if(!(a=l.pop()).ranges){if(e)return void l.push(a);break}if(Yr(a,s),t&&!a.equals(r.sel))return void io(r,a,{clearRedo:!1});i=a}var c=[];Yr(i,s),s.push({changes:c,generation:n.generation}),n.generation=a.generation||++n.maxGeneration;for(var h=Mt(r,"beforeChange")||r.cm&&Mt(r.cm,"beforeChange"),d=function(t){var n=a.changes[t];if(n.origin=o,h&&!fo(r,n,!1))return l.length=0,{};c.push(jr(r,n));var e=t?Or(r,n):K(l);yo(r,n,e,Kr(r,n)),!t&&r.cm&&r.cm.scrollIntoView({from:n.from,to:Ar(n)});var i=[];Br(r,function(t,e){e||-1!=W(i,t.history)||(Co(t.history,n),i.push(t.history)),yo(t,n,null,Kr(t,n))})},f=a.changes.length-1;0<=f;--f){var p=d(f);if(p)return p.v}}}}function vo(t,e){if(0!=e&&(t.first+=e,t.sel=new Mr($(t.sel.ranges,function(t){return new Lr(se(t.anchor.line+e,t.anchor.ch),se(t.head.line+e,t.head.ch))}),t.sel.primIndex),t.cm)){mi(t.cm,t.first,t.first-e,e);for(var n=t.cm.display,i=n.viewFrom;i<n.viewTo;i++)vi(t.cm,i,"gutter")}}function yo(t,e,n,i){if(t.cm&&!t.cm.curOp)return rr(t.cm,yo)(t,e,n,i);if(e.to.line<t.first)vo(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var r=e.text.length-1-(t.first-e.from.line);vo(t,r),e={from:se(t.first,0),to:se(e.to.line+r,e.to.ch),text:[K(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:se(o,te(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=ee(t,e.from,e.to),n=n||Or(t,e),t.cm?function(t,e,n){var i=t.doc,r=t.display,o=e.from,a=e.to,l=!1,s=o.line;t.options.lineWrapping||(s=re(Ye(te(i,o.line))),i.iter(s,a.line+1,function(t){if(t==r.maxLine)return l=!0}));-1<i.sel.contains(e.from,e.to)&&Dt(t);_r(i,e,n,di(t)),t.options.lineWrapping||(i.iter(s,o.line+e.text.length,function(t){var e=Qe(t);e>r.maxLineLength&&(r.maxLine=t,r.maxLineLength=e,r.maxLineChanged=!0,l=!1)}),l&&(t.curOp.updateMaxLine=!0));(function(t,e){if(t.modeFrontier=Math.min(t.modeFrontier,e),!(t.highlightFrontier<e-10)){for(var n=t.first,i=e-1;n<i;i--){var r=te(t,i).stateAfter;if(r&&(!(r instanceof ve)||i+r.lookAhead<e)){n=i+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,n)}})(i,o.line),lr(t,400);var u=e.text.length-(a.line-o.line)-1;e.full?mi(t):o.line!=a.line||1!=e.text.length||zr(t.doc,e)?mi(t,o.line,a.line+1,u):vi(t,o.line,"text");var c=Mt(t,"changes"),h=Mt(t,"change");if(h||c){var d={from:o,to:a,text:e.text,removed:e.removed,origin:e.origin};h&&mn(t,"change",t,d),c&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(d)}t.display.selForContextMenu=null}(t.cm,e,i):_r(t,e,i),ro(t,n,G),t.cantEdit&&uo(t,se(t.firstLine(),0))&&(t.cantEdit=!1)}}function bo(t,e,n,i,r){var o;ue(i=i||n,n)<0&&(n=(o=[i,n])[0],i=o[1]),"string"==typeof e&&(e=t.splitLines(e)),po(t,{from:n,to:i,text:e,origin:r})}function xo(t,e,n,i){n<t.line?t.line+=i:e<t.line&&(t.line=e,t.ch=0)}function wo(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r],a=!0;if(o.ranges){o.copied||((o=t[r]=o.deepCopy()).copied=!0);for(var l=0;l<o.ranges.length;l++)xo(o.ranges[l].anchor,e,n,i),xo(o.ranges[l].head,e,n,i)}else{for(var s=0;s<o.changes.length;++s){var u=o.changes[s];if(n<u.from.line)u.from=se(u.from.line+i,u.from.ch),u.to=se(u.to.line+i,u.to.ch);else if(e<=u.to.line){a=!1;break}}a||(t.splice(0,r+1),r=0)}}}function Co(t,e){var n=e.from.line,i=e.to.line,r=e.text.length-(i-n)-1;wo(t.done,n,i,r),wo(t.undone,n,i,r)}function So(t,e,n,i){var r=e,o=e;return"number"==typeof e?o=te(t,pe(t,e)):r=re(e),null==r?null:(i(o,r)&&t.cm&&vi(t.cm,r,n),o)}function ko(t){this.lines=t,this.parent=null;for(var e=0,n=0;n<t.length;++n)t[n].parent=this,e+=t[n].height;this.height=e}function Do(t){this.children=t;for(var e=0,n=0,i=0;i<t.length;++i){var r=t[i];e+=r.chunkSize(),n+=r.height,r.parent=this}this.size=e,this.height=n,this.parent=null}Lr.prototype.from=function(){return fe(this.anchor,this.head)},Lr.prototype.to=function(){return de(this.anchor,this.head)},Lr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},ko.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=t,i=t+e;n<i;++n){var r=this.lines[n];this.height-=r.height,(o=r).parent=null,ze(o),mn(r,"delete")}var o;this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var i=0;i<e.length;++i)e[i].parent=this},iterN:function(t,e,n){for(var i=t+e;t<i;++t)if(n(this.lines[t]))return!0}},Do.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(t<r){var o=Math.min(e,r-t),a=i.height;if(i.removeInner(t,o),this.height-=a-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(e-=o))break;t=0}else t-=r}if(this.size-e<25&&(1<this.children.length||!(this.children[0]instanceof ko))){var l=[];this.collapse(l),this.children=[new ko(l)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(t<=o){if(r.insertInner(t,e,n),r.lines&&50<r.lines.length){for(var a=r.lines.length%25+25,l=a;l<r.lines.length;){var s=new ko(r.lines.slice(l,l+=25));r.height-=s.height,this.children.splice(++i,0,s),s.parent=this}r.lines=r.lines.slice(0,a),this.maybeSpill()}break}t-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=new Do(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=e.size,t.height-=e.height;var n=W(t.parent.children,t);t.parent.children.splice(n+1,0,e)}else{var i=new Do(t.children);(i.parent=t).children=[i,e],t=i}e.parent=t.parent}while(10<t.children.length);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(t<o){var a=Math.min(e,o-t);if(r.iterN(t,a,n))return!0;if(0==(e-=a))break;t=0}else t-=o}}};function Mo(t,e,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=t,this.node=e}function Lo(t,e,n){Ze(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Pi(t,n)}Mo.prototype.clear=function(){var t=this.doc.cm,e=this.line.widgets,n=this.line,i=re(n);if(null!=i&&e){for(var r=0;r<e.length;++r)e[r]==this&&e.splice(r--,1);e.length||(n.widgets=null);var o=En(this);ie(n,Math.max(0,n.height-o)),t&&(ir(t,function(){Lo(t,n,-o),vi(t,i,"widget")}),mn(t,"lineWidgetCleared",t,this,i))}},Mo.prototype.changed=function(){var t=this,e=this.height,n=this.doc.cm,i=this.line;this.height=null;var r=En(this)-e;r&&(Ke(this.doc,i)||ie(i,i.height+r),n&&ir(n,function(){n.curOp.forceUpdate=!0,Lo(n,i,r),mn(n,"lineWidgetChanged",n,t,re(i))}))},Lt(Mo);var Eo=0,To=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++Eo};function Ao(e,i,r,t,n){if(t&&t.shared)return function(t,n,i,r,o){(r=_(r)).shared=!1;var a=[Ao(t,n,i,r,o)],l=a[0],s=r.widgetNode;return Br(t,function(t){s&&(r.widgetNode=s.cloneNode(!0)),a.push(Ao(t,ge(t,n),ge(t,i),r,o));for(var e=0;e<t.linked.length;++e)if(t.linked[e].isParent)return;l=K(a)}),new No(a,l)}(e,i,r,t,n);if(e.cm&&!e.cm.curOp)return rr(e.cm,Ao)(e,i,r,t,n);var o=new To(e,n),a=ue(i,r);if(t&&_(t,o,!1),0<a||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=T("span",[o.replacedWith],"CodeMirror-widget"),t.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),t.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Xe(e,i.line,i,r,o)||i.line!=r.line&&Xe(e,r.line,i,r,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ae=!0}o.addToHistory&&Ur(e,{from:i,to:r,origin:"markText"},e.sel,NaN);var l,s=i.line,u=e.cm;if(e.iter(s,r.line+1,function(t){var e,n;u&&o.collapsed&&!u.options.lineWrapping&&Ye(t)==u.display.maxLine&&(l=!0),o.collapsed&&s!=i.line&&ie(t,0),e=t,n=new Ne(o,s==i.line?i.ch:null,s==r.line?r.ch:null),e.markedSpans=e.markedSpans?e.markedSpans.concat([n]):[n],n.marker.attachLine(e),++s}),o.collapsed&&e.iter(i.line,r.line+1,function(t){Ke(e,t)&&ie(t,0)}),o.clearOnEnter&&xt(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(Te=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++Eo,o.atomic=!0),u){if(l&&(u.curOp.updateMaxLine=!0),o.collapsed)mi(u,i.line,r.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var c=i.line;c<=r.line;c++)vi(u,c,"text");o.atomic&&ao(u.doc),mn(u,"markerAdded",u,o)}return o}To.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&Zi(t),Mt(this,"clear")){var n=this.find();n&&mn(this,"clear",n.from,n.to)}for(var i=null,r=null,o=0;o<this.lines.length;++o){var a=this.lines[o],l=Oe(a.markedSpans,this);t&&!this.collapsed?vi(t,re(a),"text"):t&&(null!=l.to&&(r=re(a)),null!=l.from&&(i=re(a))),a.markedSpans=Fe(a.markedSpans,l),null==l.from&&this.collapsed&&!Ke(this.doc,a)&&t&&ie(a,si(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var u=Ye(this.lines[s]),c=Qe(u);c>t.display.maxLineLength&&(t.display.maxLine=u,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=i&&t&&this.collapsed&&mi(t,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&ao(t.doc)),t&&mn(t,"markerCleared",t,this,i,r),e&&Qi(t),this.parent&&this.parent.clear()}},To.prototype.find=function(t,e){var n,i;null==t&&"bookmark"==this.type&&(t=1);for(var r=0;r<this.lines.length;++r){var o=this.lines[r],a=Oe(o.markedSpans,this);if(null!=a.from&&(n=se(e?o:re(o),a.from),-1==t))return n;if(null!=a.to&&(i=se(e?o:re(o),a.to),1==t))return i}return n&&{from:n,to:i}},To.prototype.changed=function(){var o=this,a=this.find(-1,!0),l=this,s=this.doc.cm;a&&s&&ir(s,function(){var t=a.line,e=re(a.line),n=Bn(s,e);if(n&&(Xn(n),s.curOp.selectionChanged=s.curOp.forceUpdate=!0),s.curOp.updateMaxLine=!0,!Ke(l.doc,t)&&null!=l.height){var i=l.height;l.height=null;var r=En(l)-i;r&&ie(t,t.height+r)}mn(s,"markerChanged",s,o)})},To.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=W(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},To.prototype.detachLine=function(t){if(this.lines.splice(W(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},Lt(To);var No=function(t,e){this.markers=t,this.primary=e;for(var n=0;n<t.length;++n)t[n].parent=this};function Oo(t){return t.findMarks(se(t.first,0),t.clipPos(se(t.lastLine())),function(t){return t.parent})}function Fo(o){for(var t=function(t){var e=o[t],n=[e.primary.doc];Br(e.primary.doc,function(t){return n.push(t)});for(var i=0;i<e.markers.length;i++){var r=e.markers[i];-1==W(n,r.doc)&&(r.parent=null,e.markers.splice(i--,1))}},e=0;e<o.length;e++)t(e)}No.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();mn(this,"clear")}},No.prototype.find=function(t,e){return this.primary.find(t,e)},Lt(No);var Io=0,Po=function(t,e,n,i,r){if(!(this instanceof Po))return new Po(t,e,n,i,r);null==n&&(n=0),Do.call(this,[new ko([new tn("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=se(n,0);this.sel=Tr(o),this.history=new Rr(null),this.id=++Io,this.modeOption=e,this.lineSep=i,this.direction="rtl"==r?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),_r(this,{from:o,to:o,text:t}),io(this,Tr(o),G)};Po.prototype=Q(Do.prototype,{constructor:Po,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,i=0;i<e.length;++i)n+=e[i].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=ne(this,this.first,this.first+this.size);return!1===t?e:e.join(t||this.lineSeparator())},setValue:ar(function(t){var e=se(this.first,0),n=this.first+this.size-1;po(this,{from:e,to:se(n,te(this,n).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&_i(this.cm,0,0),io(this,Tr(e),G)}),replaceRange:function(t,e,n,i){bo(this,t,e=ge(this,e),n=n?ge(this,n):e,i)},getRange:function(t,e,n){var i=ee(this,ge(this,t),ge(this,e));return!1===n?i:i.join(n||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(ae(this,t))return te(this,t)},getLineNumber:function(t){return re(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=te(this,t)),Ye(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return ge(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ar(function(t,e,n){eo(this,ge(this,"number"==typeof t?se(t,e||0):t),null,n)}),setSelection:ar(function(t,e,n){eo(this,ge(this,t),ge(this,e||t),n)}),extendSelection:ar(function(t,e,n){Qr(this,ge(this,t),e&&ge(this,e),n)}),extendSelections:ar(function(t,e){Jr(this,me(this,t),e)}),extendSelectionsBy:ar(function(t,e){Jr(this,me(this,$(this.sel.ranges,t)),e)}),setSelections:ar(function(t,e,n){if(t.length){for(var i=[],r=0;r<t.length;r++)i[r]=new Lr(ge(this,t[r].anchor),ge(this,t[r].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),io(this,Er(this.cm,i,e),n)}}),addSelection:ar(function(t,e,n){var i=this.sel.ranges.slice(0);i.push(new Lr(ge(this,t),ge(this,e||t))),io(this,Er(this.cm,i,i.length-1),n)}),getSelection:function(t){for(var e,n=this.sel.ranges,i=0;i<n.length;i++){var r=ee(this,n[i].from(),n[i].to());e=e?e.concat(r):r}return!1===t?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=ee(this,n[i].from(),n[i].to());!1!==t&&(r=r.join(t||this.lineSeparator())),e[i]=r}return e},replaceSelection:function(t,e,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=t;this.replaceSelections(i,e,n||"+input")},replaceSelections:ar(function(t,e,n){for(var i=[],r=this.sel,o=0;o<r.ranges.length;o++){var a=r.ranges[o];i[o]={from:a.from(),to:a.to(),text:this.splitLines(t[o]),origin:n}}for(var l=e&&"end"!=e&&function(t,e,n){for(var i=[],r=se(t.first,0),o=r,a=0;a<e.length;a++){var l=e[a],s=Fr(l.from,r,o),u=Fr(Ar(l),r,o);if(r=l.to,o=u,"around"==n){var c=t.sel.ranges[a],h=ue(c.head,c.anchor)<0;i[a]=new Lr(h?u:s,h?s:u)}else i[a]=new Lr(s,s)}return new Mr(i,t.sel.primIndex)}(this,i,e),s=i.length-1;0<=s;s--)po(this,i[s]);l?no(this,l):this.cm&&zi(this.cm)}),undo:ar(function(){mo(this,"undo")}),redo:ar(function(){mo(this,"redo")}),undoSelection:ar(function(){mo(this,"undo",!0)}),redoSelection:ar(function(){mo(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,n=0,i=0;i<t.done.length;i++)t.done[i].ranges||++e;for(var r=0;r<t.undone.length;r++)t.undone[r].ranges||++n;return{undo:e,redo:n}},clearHistory:function(){this.history=new Rr(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:$r(this.history.done),undone:$r(this.history.undone)}},setHistory:function(t){var e=this.history=new Rr(this.history.maxGeneration);e.done=$r(t.done.slice(0),null,!0),e.undone=$r(t.undone.slice(0),null,!0)},setGutterMarker:ar(function(t,n,i){return So(this,t,"gutter",function(t){var e=t.gutterMarkers||(t.gutterMarkers={});return!(e[n]=i)&&nt(e)&&(t.gutterMarkers=null),!0})}),clearGutter:ar(function(e){var n=this;this.iter(function(t){t.gutterMarkers&&t.gutterMarkers[e]&&So(n,t,"gutter",function(){return t.gutterMarkers[e]=null,nt(t.gutterMarkers)&&(t.gutterMarkers=null),!0})})}),lineInfo:function(t){var e;if("number"==typeof t){if(!ae(this,t))return null;if(!(t=te(this,e=t)))return null}else if(null==(e=re(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:ar(function(t,n,i){return So(this,t,"gutter"==n?"gutter":"class",function(t){var e="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass";if(t[e]){if(k(i).test(t[e]))return!1;t[e]+=" "+i}else t[e]=i;return!0})}),removeLineClass:ar(function(t,o,a){return So(this,t,"gutter"==o?"gutter":"class",function(t){var e="text"==o?"textClass":"background"==o?"bgClass":"gutter"==o?"gutterClass":"wrapClass",n=t[e];if(!n)return!1;if(null==a)t[e]=null;else{var i=n.match(k(a));if(!i)return!1;var r=i.index+i[0].length;t[e]=n.slice(0,i.index)+(i.index&&r!=n.length?" ":"")+n.slice(r)||null}return!0})}),addLineWidget:ar(function(t,e,n){return r=t,o=new Mo(i=this,e,n),(a=i.cm)&&o.noHScroll&&(a.display.alignWidgets=!0),So(i,r,"widget",function(t){var e=t.widgets||(t.widgets=[]);if(null==o.insertAt?e.push(o):e.splice(Math.min(e.length-1,Math.max(0,o.insertAt)),0,o),o.line=t,a&&!Ke(i,t)){var n=Ze(t)<i.scrollTop;ie(t,t.height+En(o)),n&&Pi(a,o.height),a.curOp.forceUpdate=!0}return!0}),a&&mn(a,"lineWidgetAdded",a,o,"number"==typeof r?r:re(r)),o;var i,r,o,a}),removeLineWidget:function(t){t.clear()},markText:function(t,e,n){return Ao(this,ge(this,t),ge(this,e),n,n&&n.type||"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return Ao(this,t=ge(this,t),t,n,"bookmark")},findMarksAt:function(t){var e=[],n=te(this,(t=ge(this,t)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=t.ch)&&(null==r.to||r.to>=t.ch)&&e.push(r.marker.parent||r.marker)}return e},findMarks:function(r,o,a){r=ge(this,r),o=ge(this,o);var l=[],s=r.line;return this.iter(r.line,o.line+1,function(t){var e=t.markedSpans;if(e)for(var n=0;n<e.length;n++){var i=e[n];null!=i.to&&s==r.line&&r.ch>=i.to||null==i.from&&s!=r.line||null!=i.from&&s==o.line&&i.from>=o.ch||a&&!a(i.marker)||l.push(i.marker.parent||i.marker)}++s}),l},getAllMarks:function(){var i=[];return this.iter(function(t){var e=t.markedSpans;if(e)for(var n=0;n<e.length;++n)null!=e[n].from&&i.push(e[n].marker)}),i},posFromIndex:function(n){var i,r=this.first,o=this.lineSeparator().length;return this.iter(function(t){var e=t.text.length+o;if(n<e)return i=n,!0;n-=e,++r}),ge(this,se(r,i))},indexFromPos:function(t){var e=(t=ge(this,t)).ch;if(t.line<this.first||t.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,t.line,function(t){e+=t.text.length+n}),e},copy:function(t){var e=new Po(ne(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t=t||{};var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var i=new Po(ne(this,e,n),t.mode||this.modeOption,e,this.lineSep,this.direction);return t.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:t.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function(t,e){for(var n=0;n<e.length;n++){var i=e[n],r=i.find(),o=t.clipPos(r.from),a=t.clipPos(r.to);if(ue(o,a)){var l=Ao(t,o,a,i.primary,i.primary.type);i.markers.push(l),l.parent=i}}}(i,Oo(this)),i},unlinkDoc:function(t){if(t instanceof Oa&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e){if(this.linked[e].doc==t){this.linked.splice(e,1),t.unlinkDoc(this),Fo(Oo(this));break}}if(t.history==this.history){var n=[t.id];Br(t,function(t){return n.push(t.id)},!0),t.history=new Rr(null),t.history.done=$r(this.history.done,n),t.history.undone=$r(this.history.undone,n)}},iterLinkedDocs:function(t){Br(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):Wt(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:ar(function(t){var e;"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter(function(t){return t.order=null}),this.cm&&ir(e=this.cm,function(){Wr(e),mi(e)}))})}),Po.prototype.eachLine=Po.prototype.iter;var zo=0;function _o(t){var r=this;if(Bo(r),!kt(r,t)&&!Tn(r.display,t)){Et(t),w&&(zo=+new Date);var o=pi(r,t,!0),e=t.dataTransfer.files;if(o&&!r.isReadOnly())if(e&&e.length&&window.FileReader&&window.File)for(var a=e.length,l=Array(a),s=0,n=function(t,n){if(!r.options.allowDropFileTypes||-1!=W(r.options.allowDropFileTypes,t.type)){var i=new FileReader;i.onload=rr(r,function(){var t=i.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(t)&&(t=""),l[n]=t,++s==a){var e={from:o=ge(r.doc,o),to:o,text:r.doc.splitLines(l.join(r.doc.lineSeparator())),origin:"paste"};po(r.doc,e),no(r.doc,Tr(o,Ar(e)))}}),i.readAsText(t)}},i=0;i<a;++i)n(e[i],i);else{if(r.state.draggingText&&-1<r.doc.sel.contains(o))return r.state.draggingText(t),void setTimeout(function(){return r.display.input.focus()},20);try{var u=t.dataTransfer.getData("Text");if(u){var c;if(r.state.draggingText&&!r.state.draggingText.copy&&(c=r.listSelections()),ro(r.doc,Tr(o,o)),c)for(var h=0;h<c.length;++h)bo(r.doc,"",c[h].anchor,c[h].head,"drag");r.replaceSelection(u,"around","paste"),r.display.input.focus()}}catch(t){}}}}function Bo(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Ho(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<t.length;i++){var r=t[i].CodeMirror;r&&n.push(r)}n.length&&n[0].operation(function(){for(var t=0;t<n.length;t++)e(n[t])})}}var Wo=!1;function Ro(){var t;Wo||(xt(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,Ho(jo)},100))}),xt(window,"blur",function(){return Ho(Ai)}),Wo=!0)}function jo(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize()}for(var Go={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Uo=0;Uo<10;Uo++)Go[Uo+48]=Go[Uo+96]=String(Uo);for(var Xo=65;Xo<=90;Xo++)Go[Xo]=String.fromCharCode(Xo);for(var Yo=1;Yo<=12;Yo++)Go[Yo+111]=Go[Yo+63235]="F"+Yo;var Vo={};function qo(t){var e,n,i,r,o=t.split(/-(?!$)/);t=o[o.length-1];for(var a=0;a<o.length-1;a++){var l=o[a];if(/^(cmd|meta|m)$/i.test(l))r=!0;else if(/^a(lt)?$/i.test(l))e=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else{if(!/^s(hift)?$/i.test(l))throw new Error("Unrecognized modifier name: "+l);i=!0}}return e&&(t="Alt-"+t),n&&(t="Ctrl-"+t),r&&(t="Cmd-"+t),i&&(t="Shift-"+t),t}function Ko(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete t[n];continue}for(var r=$(n.split(" "),qo),o=0;o<r.length;o++){var a=void 0,l=void 0;a=o==r.length-1?(l=r.join(" "),i):(l=r.slice(0,o+1).join(" "),"...");var s=e[l];if(s){if(s!=a)throw new Error("Inconsistent bindings for "+l)}else e[l]=a}delete t[n]}for(var u in e)t[u]=e[u];return t}function $o(t,e,n,i){var r=(e=ta(e)).call?e.call(t,i):e[t];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return $o(t,e.fallthrough,n,i);for(var o=0;o<e.fallthrough.length;o++){var a=$o(t,e.fallthrough[o],n,i);if(a)return a}}}function Zo(t){var e="string"==typeof t?t:Go[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Qo(t,e,n){var i=t;return e.altKey&&"Alt"!=i&&(t="Alt-"+t),(y?e.metaKey:e.ctrlKey)&&"Ctrl"!=i&&(t="Ctrl-"+t),(y?e.ctrlKey:e.metaKey)&&"Cmd"!=i&&(t="Cmd-"+t),!n&&e.shiftKey&&"Shift"!=i&&(t="Shift-"+t),t}function Jo(t,e){if(m&&34==t.keyCode&&t.char)return!1;var n=Go[t.keyCode];return null!=n&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(n=t.code),Qo(n,t,e))}function ta(t){return"string"==typeof t?Vo[t]:t}function ea(e,t){for(var n=e.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var o=t(n[r]);i.length&&ue(o.from,K(i).to)<=0;){var a=i.pop();if(ue(a.from,o.from)<0){o.from=a.from;break}}i.push(o)}ir(e,function(){for(var t=i.length-1;0<=t;t--)bo(e.doc,"",i[t].from,i[t].to,"+delete");zi(e)})}function na(t,e,n){var i=ot(t.text,e+n,n);return i<0||i>t.text.length?null:i}function ia(t,e,n){var i=na(t,e.ch,n);return null==i?null:new se(e.line,i,n<0?"after":"before")}function ra(t,e,n,i,r){if(t){var o=yt(n,e.doc.direction);if(o){var a,l=r<0?K(o):o[0],s=r<0==(1==l.level)?"after":"before";if(0<l.level||"rtl"==e.doc.direction){var u=Hn(e,n);a=r<0?n.text.length-1:0;var c=Wn(e,u,a).top;a=at(function(t){return Wn(e,u,t).top==c},r<0==(1==l.level)?l.from:l.to-1,a),"before"==s&&(a=na(n,a,1))}else a=r<0?l.to:l.from;return new se(i,a,s)}}return new se(i,r<0?n.text.length:0,r<0?"before":"after")}function oa(e,n,l,t){var s=yt(n,e.doc.direction);if(!s)return ia(n,l,t);l.ch>=n.text.length?(l.ch=n.text.length,l.sticky="before"):l.ch<=0&&(l.ch=0,l.sticky="after");var i=st(s,l.ch,l.sticky),r=s[i];if("ltr"==e.doc.direction&&r.level%2==0&&(0<t?r.to>l.ch:r.from<l.ch))return ia(n,l,t);function u(t,e){return na(n,t instanceof se?t.ch:t,e)}function o(t){return e.options.lineWrapping?(a=a||Hn(e,n),oi(e,n,a,t)):{begin:0,end:n.text.length}}var a,c=o("before"==l.sticky?u(l,-1):l.ch);if("rtl"==e.doc.direction||1==r.level){var h=1==r.level==t<0,d=u(l,h?1:-1);if(null!=d&&(h?d<=r.to&&d<=c.end:d>=r.from&&d>=c.begin)){var f=h?"before":"after";return new se(l.line,d,f)}}function p(t,e,n){for(var i=function(t,e){return e?new se(l.line,u(t,1),"before"):new se(l.line,t,"after")};0<=t&&t<s.length;t+=e){var r=s[t],o=0<e==(1!=r.level),a=o?n.begin:u(n.end,-1);if(r.from<=a&&a<r.to)return i(a,o);if(a=o?r.from:u(r.to,-1),n.begin<=a&&a<n.end)return i(a,o)}}var g=p(i+t,t,c);if(g)return g;var m=0<t?c.end:u(c.begin,-1);return null==m||0<t&&m==n.text.length||!(g=p(0<t?0:s.length-1,t,o(m)))?null:g}Vo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Vo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Vo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Vo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Vo.default=x?Vo.macDefault:Vo.pcDefault;var aa={selectAll:ho,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),G)},killLine:function(n){return ea(n,function(t){if(t.empty()){var e=te(n.doc,t.head.line).text.length;return t.head.ch==e&&t.head.line<n.lastLine()?{from:t.head,to:se(t.head.line+1,0)}:{from:t.head,to:se(t.head.line,e)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return ea(e,function(t){return{from:se(t.from().line,0),to:ge(e.doc,se(t.to().line+1,0))}})},delLineLeft:function(t){return ea(t,function(t){return{from:se(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(n){return ea(n,function(t){var e=n.charCoords(t.head,"div").top+5;return{from:n.coordsChar({left:0,top:e},"div"),to:t.from()}})},delWrappedLineRight:function(i){return ea(i,function(t){var e=i.charCoords(t.head,"div").top+5,n=i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:e},"div");return{from:t.from(),to:n}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(se(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(se(t.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return la(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return sa(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function(t,e){var n=te(t.doc,e),i=function(t){for(var e;e=Ge(t);)t=e.find(1,!0).line;return t}(n);i!=n&&(e=re(i));return ra(!0,t,n,e,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(n){return n.extendSelectionsBy(function(t){var e=n.cursorCoords(t.head,"div").top+5;return n.coordsChar({left:n.display.lineDiv.offsetWidth+100,top:e},"div")},X)},goLineLeft:function(n){return n.extendSelectionsBy(function(t){var e=n.cursorCoords(t.head,"div").top+5;return n.coordsChar({left:0,top:e},"div")},X)},goLineLeftSmart:function(i){return i.extendSelectionsBy(function(t){var e=i.cursorCoords(t.head,"div").top+5,n=i.coordsChar({left:0,top:e},"div");return n.ch<i.getLine(n.line).search(/\S/)?sa(i,t.head):n},X)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"char")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],n=t.listSelections(),i=t.options.tabSize,r=0;r<n.length;r++){var o=n[r].from(),a=B(t.getLine(o.line),o.ch,i);e.push(q(i-a%i))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(a){return ir(a,function(){for(var t=a.listSelections(),e=[],n=0;n<t.length;n++)if(t[n].empty()){var i=t[n].head,r=te(a.doc,i.line).text;if(r)if(i.ch==r.length&&(i=new se(i.line,i.ch-1)),0<i.ch)i=new se(i.line,i.ch+1),a.replaceRange(r.charAt(i.ch-1)+r.charAt(i.ch-2),se(i.line,i.ch-2),i,"+transpose");else if(i.line>a.doc.first){var o=te(a.doc,i.line-1).text;o&&(i=new se(i.line,1),a.replaceRange(r.charAt(0)+a.doc.lineSeparator()+o.charAt(o.length-1),se(i.line-1,o.length-1),i,"+transpose"))}e.push(new Lr(i,i))}a.setSelections(e)})},newlineAndIndent:function(i){return ir(i,function(){for(var t=i.listSelections(),e=t.length-1;0<=e;e--)i.replaceRange(i.doc.lineSeparator(),t[e].anchor,t[e].head,"+input");t=i.listSelections();for(var n=0;n<t.length;n++)i.indentLine(t[n].from().line,null,!0);zi(i)})},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function la(t,e){var n=te(t.doc,e),i=Ye(n);return i!=n&&(e=re(i)),ra(!0,t,i,e,1)}function sa(t,e){var n=la(t,e.line),i=te(t.doc,n.line),r=yt(i,t.doc.direction);if(r&&0!=r[0].level)return n;var o=Math.max(0,i.text.search(/\S/)),a=e.line==n.line&&e.ch<=o&&e.ch;return se(n.line,a?0:o,n.sticky)}function ua(t,e,n){if("string"==typeof e&&!(e=aa[e]))return!1;t.display.input.ensurePolled();var i=t.display.shift,r=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),n&&(t.display.shift=!1),r=e(t)!=j}finally{t.display.shift=i,t.state.suppressEdits=!1}return r}var ca=new H;function ha(t,e,n,i){var r=t.state.keySeq;if(r){if(Zo(e))return"handled";if(/\'$/.test(e)?t.state.keySeq=null:ca.set(50,function(){t.state.keySeq==r&&(t.state.keySeq=null,t.display.input.reset())}),da(t,r+" "+e,n,i))return!0}return da(t,e,n,i)}function da(t,e,n,i){var r=function(t,e,n){for(var i=0;i<t.state.keyMaps.length;i++){var r=$o(e,t.state.keyMaps[i],n,t);if(r)return r}return t.options.extraKeys&&$o(e,t.options.extraKeys,n,t)||$o(e,t.options.keyMap,n,t)}(t,e,i);return"multi"==r&&(t.state.keySeq=e),"handled"==r&&mn(t,"keyHandled",t,e,n),"handled"!=r&&"multi"!=r||(Et(n),Mi(t)),!!r}function fa(e,t){var n=Jo(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?ha(e,"Shift-"+n,t,function(t){return ua(e,t,!0)})||ha(e,n,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return ua(e,t)}):ha(e,n,t,function(t){return ua(e,t)}))}var pa=null;function ga(t){if(this.curOp.focus=O(),!kt(this,t)){w&&C<11&&27==t.keyCode&&(t.returnValue=!1);var e=t.keyCode;this.display.shift=16==e||t.shiftKey;var n,i=fa(this,t);m&&(pa=i?e:null,!i&&88==e&&!jt&&(x?t.metaKey:t.ctrlKey)&&this.replaceSelection("",null,"cut")),g&&!x&&!i&&46==e&&t.shiftKey&&!t.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=e||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||(F(n=this.display.lineDiv,"CodeMirror-crosshair"),xt(document,"keyup",r),xt(document,"mouseover",r))}function r(t){18!=t.keyCode&&t.altKey||(M(n,"CodeMirror-crosshair"),Ct(document,"keyup",r),Ct(document,"mouseover",r))}}function ma(t){16==t.keyCode&&(this.doc.sel.shift=!1),kt(this,t)}function va(t){if(!(Tn(this.display,t)||kt(this,t)||t.ctrlKey&&!t.altKey||x&&t.metaKey)){var e=t.keyCode,n=t.charCode;if(m&&e==pa)return pa=null,void Et(t);if(!m||t.which&&!(t.which<10)||!fa(this,t)){var i,r=String.fromCharCode(null==n?e:n);if("\b"!=r)if(!ha(i=this,"'"+r+"'",t,function(t){return ua(i,t,!0)}))this.display.input.onKeyPress(t)}}}var ya,ba,xa=function(t,e,n){this.time=t,this.pos=e,this.button=n};function wa(t){var e=this,n=e.display;if(!(kt(e,t)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=t.shiftKey,Tn(n,t))b||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100));else if(!ka(e,t)){var i,r,o,a=pi(e,t),l=Ft(t),s=a?(i=a,r=l,o=+new Date,ba&&ba.compare(o,i,r)?(ya=ba=null,"triple"):ya&&ya.compare(o,i,r)?(ba=new xa(o,i,r),ya=null,"double"):(ya=new xa(o,i,r),ba=null,"single")):"single";window.focus(),1==l&&e.state.selectingText&&e.state.selectingText(t),a&&function(n,t,i,e,r){var o="Click";"double"==e?o="Double"+o:"triple"==e&&(o="Triple"+o);return ha(n,Qo(o=(1==t?"Left":2==t?"Middle":"Right")+o,r),r,function(t){if("string"==typeof t&&(t=aa[t]),!t)return!1;var e=!1;try{n.isReadOnly()&&(n.state.suppressEdits=!0),e=t(n,i)!=j}finally{n.state.suppressEdits=!1}return e})}(e,l,a,s,t)||(1==l?a?function(t,e,n,i){w?setTimeout(z(Li,t),0):t.curOp.focus=O();var r,o=function(t,e,n){var i=t.getOption("configureMouse"),r=i?i(t,e,n):{};if(null==r.unit){var o=f?n.shiftKey&&n.metaKey:n.altKey;r.unit=o?"rectangle":"single"==e?"char":"double"==e?"word":"line"}null!=r.extend&&!t.doc.extend||(r.extend=t.doc.extend||n.shiftKey);null==r.addNew&&(r.addNew=x?n.metaKey:n.ctrlKey);null==r.moveOnDrag&&(r.moveOnDrag=!(x?n.altKey:n.ctrlKey));return r}(t,n,i),a=t.doc.sel;(t.options.dragDrop&&zt&&!t.isReadOnly()&&"single"==n&&-1<(r=a.contains(e))&&(ue((r=a.ranges[r]).from(),e)<0||0<e.xRel)&&(0<ue(r.to(),e)||e.xRel<0)?function(e,n,i,r){var o=e.display,a=!1,l=rr(e,function(t){b&&(o.scroller.draggable=!1),e.state.draggingText=!1,Ct(o.wrapper.ownerDocument,"mouseup",l),Ct(o.wrapper.ownerDocument,"mousemove",s),Ct(o.scroller,"dragstart",u),Ct(o.scroller,"drop",l),a||(Et(t),r.addNew||Qr(e.doc,i,null,null,r.extend),b||w&&9==C?setTimeout(function(){o.wrapper.ownerDocument.body.focus(),o.input.focus()},20):o.input.focus())}),s=function(t){a=a||10<=Math.abs(n.clientX-t.clientX)+Math.abs(n.clientY-t.clientY)},u=function(){return a=!0};b&&(o.scroller.draggable=!0);(e.state.draggingText=l).copy=!r.moveOnDrag,o.scroller.dragDrop&&o.scroller.dragDrop();xt(o.wrapper.ownerDocument,"mouseup",l),xt(o.wrapper.ownerDocument,"mousemove",s),xt(o.scroller,"dragstart",u),xt(o.scroller,"drop",l),Ei(e),setTimeout(function(){return o.input.focus()},20)}:function(m,t,v,y){var a=m.display,b=m.doc;Et(t);var x,w,C=b.sel,e=C.ranges;y.addNew&&!y.extend?(w=b.sel.contains(v),x=-1<w?e[w]:new Lr(v,v)):(x=b.sel.primary(),w=b.sel.primIndex);if("rectangle"==y.unit)y.addNew||(x=new Lr(v,v)),v=pi(m,t,!0,!0),w=-1;else{var n=Ca(m,v,y.unit);x=y.extend?Zr(x,n.anchor,n.head,y.extend):n}y.addNew?-1==w?(w=e.length,io(b,Er(m,e.concat([x]),w),{scroll:!1,origin:"*mouse"})):1<e.length&&e[w].empty()&&"char"==y.unit&&!y.extend?(io(b,Er(m,e.slice(0,w).concat(e.slice(w+1)),0),{scroll:!1,origin:"*mouse"}),C=b.sel):to(b,w,x,U):(io(b,new Mr([x],w=0),U),C=b.sel);var S=v;function l(t){if(0!=ue(S,t))if(S=t,"rectangle"==y.unit){for(var e=[],n=m.options.tabSize,i=B(te(b,v.line).text,v.ch,n),r=B(te(b,t.line).text,t.ch,n),o=Math.min(i,r),a=Math.max(i,r),l=Math.min(v.line,t.line),s=Math.min(m.lastLine(),Math.max(v.line,t.line));l<=s;l++){var u=te(b,l).text,c=Y(u,o,n);o==a?e.push(new Lr(se(l,c),se(l,c))):u.length>c&&e.push(new Lr(se(l,c),se(l,Y(u,a,n))))}e.length||e.push(new Lr(v,v)),io(b,Er(m,C.ranges.slice(0,w).concat(e),w),{origin:"*mouse",scroll:!1}),m.scrollIntoView(t)}else{var h,d=x,f=Ca(m,t,y.unit),p=d.anchor;p=0<ue(f.anchor,p)?(h=f.head,fe(d.from(),f.anchor)):(h=f.anchor,de(d.to(),f.head));var g=C.ranges.slice(0);g[w]=function(t,e){var n=e.anchor,i=e.head,r=te(t.doc,n.line);if(0==ue(n,i)&&n.sticky==i.sticky)return e;var o=yt(r);if(!o)return e;var a=st(o,n.ch,n.sticky),l=o[a];if(l.from!=n.ch&&l.to!=n.ch)return e;var s,u=a+(l.from==n.ch==(1!=l.level)?0:1);if(0==u||u==o.length)return e;if(i.line!=n.line)s=0<(i.line-n.line)*("ltr"==t.doc.direction?1:-1);else{var c=st(o,i.ch,i.sticky),h=c-a||(i.ch-n.ch)*(1==l.level?-1:1);s=c==u-1||c==u?h<0:0<h}var d=o[u+(s?-1:0)],f=s==(1==d.level),p=f?d.from:d.to,g=f?"after":"before";return n.ch==p&&n.sticky==g?e:new Lr(new se(n.line,p,g),i)}(m,new Lr(ge(b,p),h)),io(b,Er(m,g,w),U)}}var s=a.wrapper.getBoundingClientRect(),u=0;function i(t){m.state.selectingText=!1,u=1/0,t&&(Et(t),a.input.focus()),Ct(a.wrapper.ownerDocument,"mousemove",r),Ct(a.wrapper.ownerDocument,"mouseup",o),b.history.lastSelOrigin=null}var r=rr(m,function(t){(0!==t.buttons&&Ft(t)?function t(e){var n=++u,i=pi(m,e,!0,"rectangle"==y.unit);if(i)if(0!=ue(i,S)){m.curOp.focus=O(),l(i);var r=Fi(a,b);(i.line>=r.to||i.line<r.from)&&setTimeout(rr(m,function(){u==n&&t(e)}),150)}else{var o=e.clientY<s.top?-20:e.clientY>s.bottom?20:0;o&&setTimeout(rr(m,function(){u==n&&(a.scroller.scrollTop+=o,t(e))}),50)}}:i)(t)}),o=rr(m,i);m.state.selectingText=o,xt(a.wrapper.ownerDocument,"mousemove",r),xt(a.wrapper.ownerDocument,"mouseup",o)})(t,i,e,o)}(e,a,s,t):Ot(t)==n.scroller&&Et(t):2==l?(a&&Qr(e.doc,a),setTimeout(function(){return n.input.focus()},20)):3==l&&(S?e.display.input.onContextMenu(t):Ei(e)))}}function Ca(t,e,n){if("char"==n)return new Lr(e,e);if("word"==n)return t.findWordAt(e);if("line"==n)return new Lr(se(e.line,0),ge(t.doc,se(e.line+1,0)));var i=n(t,e);return new Lr(i.from,i.to)}function Sa(t,e,n,i){var r,o;if(e.touches)r=e.touches[0].clientX,o=e.touches[0].clientY;else try{r=e.clientX,o=e.clientY}catch(e){return!1}if(r>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;i&&Et(e);var a=t.display,l=a.lineDiv.getBoundingClientRect();if(o>l.bottom||!Mt(t,n))return At(e);o-=l.top-a.viewOffset;for(var s=0;s<t.display.gutterSpecs.length;++s){var u=a.gutters.childNodes[s];if(u&&u.getBoundingClientRect().right>=r)return St(t,n,t,oe(t.doc,o),t.display.gutterSpecs[s].className,e),At(e)}}function ka(t,e){return Sa(t,e,"gutterClick",!0)}function Da(t,e){var n,i;Tn(t.display,e)||(i=e,Mt(n=t,"gutterContextMenu")&&Sa(n,i,"gutterContextMenu",!1))||kt(t,e,"contextmenu")||S||t.display.input.onContextMenu(e)}function Ma(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Vn(t)}xa.prototype.compare=function(t,e,n){return this.time+400>t&&0==ue(e,this.pos)&&n==this.button};var La={toString:function(){return"CodeMirror.Init"}},Ea={},Ta={};function Aa(t,e,n){if(!e!=!(n&&n!=La)){var i=t.display.dragFunctions,r=e?xt:Ct;r(t.display.scroller,"dragstart",i.start),r(t.display.scroller,"dragenter",i.enter),r(t.display.scroller,"dragover",i.over),r(t.display.scroller,"dragleave",i.leave),r(t.display.scroller,"drop",i.drop)}}function Na(t){t.options.lineWrapping?(F(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(M(t.display.wrapper,"CodeMirror-wrap"),Je(t)),fi(t),mi(t),Vn(t),setTimeout(function(){return Yi(t)},100)}function Oa(t,e){var n=this;if(!(this instanceof Oa))return new Oa(t,e);this.options=e=e?_(e):{},_(Ea,e,!1);var i=e.value;"string"==typeof i?i=new Po(i,e.mode,null,e.lineSeparator,e.direction):e.mode&&(i.modeOption=e.mode),this.doc=i;var r=new Oa.inputStyles[e.inputStyle](this),o=this.display=new xr(t,i,r,e);for(var a in Ma(o.wrapper.CodeMirror=this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Ki(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new H,keySeq:null,specialChars:null},e.autofocus&&!d&&o.input.focus(),w&&C<11&&setTimeout(function(){return n.display.input.reset(!0)},20),function(r){var o=r.display;xt(o.scroller,"mousedown",rr(r,wa)),xt(o.scroller,"dblclick",w&&C<11?rr(r,function(t){if(!kt(r,t)){var e=pi(r,t);if(e&&!ka(r,t)&&!Tn(r.display,t)){Et(t);var n=r.findWordAt(e);Qr(r.doc,n.anchor,n.head)}}}):function(t){return kt(r,t)||Et(t)});xt(o.scroller,"contextmenu",function(t){return Da(r,t)});var n,i={end:0};function a(){o.activeTouch&&(n=setTimeout(function(){return o.activeTouch=null},1e3),(i=o.activeTouch).end=+new Date)}function l(t,e){if(null==e.left)return!0;var n=e.left-t.left,i=e.top-t.top;return 400<n*n+i*i}xt(o.scroller,"touchstart",function(t){if(!kt(r,t)&&!function(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}(t)&&!ka(r,t)){o.input.ensurePolled(),clearTimeout(n);var e=+new Date;o.activeTouch={start:e,moved:!1,prev:e-i.end<=300?i:null},1==t.touches.length&&(o.activeTouch.left=t.touches[0].pageX,o.activeTouch.top=t.touches[0].pageY)}}),xt(o.scroller,"touchmove",function(){o.activeTouch&&(o.activeTouch.moved=!0)}),xt(o.scroller,"touchend",function(t){var e=o.activeTouch;if(e&&!Tn(o,t)&&null!=e.left&&!e.moved&&new Date-e.start<300){var n,i=r.coordsChar(o.activeTouch,"page");n=!e.prev||l(e,e.prev)?new Lr(i,i):!e.prev.prev||l(e,e.prev.prev)?r.findWordAt(i):new Lr(se(i.line,0),ge(r.doc,se(i.line+1,0))),r.setSelection(n.anchor,n.head),r.focus(),Et(t)}a()}),xt(o.scroller,"touchcancel",a),xt(o.scroller,"scroll",function(){o.scroller.clientHeight&&(Wi(r,o.scroller.scrollTop),ji(r,o.scroller.scrollLeft,!0),St(r,"scroll",r))}),xt(o.scroller,"mousewheel",function(t){return Dr(r,t)}),xt(o.scroller,"DOMMouseScroll",function(t){return Dr(r,t)}),xt(o.wrapper,"scroll",function(){return o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),o.dragFunctions={enter:function(t){kt(r,t)||Nt(t)},over:function(t){kt(r,t)||(function(t,e){var n=pi(t,e);if(n){var i=document.createDocumentFragment();Si(t,n,i),t.display.dragCursor||(t.display.dragCursor=A("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),E(t.display.dragCursor,i)}}(r,t),Nt(t))},start:function(t){return function(t,e){if(w&&(!t.state.draggingText||new Date-zo<100))Nt(e);else if(!kt(t,e)&&!Tn(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!s)){var n=A("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",m&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),m&&n.parentNode.removeChild(n)}}(r,t)},drop:rr(r,_o),leave:function(t){kt(r,t)||Bo(r)}};var t=o.input.getField();xt(t,"keyup",function(t){return ma.call(r,t)}),xt(t,"keydown",rr(r,ga)),xt(t,"keypress",rr(r,va)),xt(t,"focus",function(t){return Ti(r,t)}),xt(t,"blur",function(t){return Ai(r,t)})}(this),Ro(),Zi(this),this.curOp.forceUpdate=!0,Hr(this,i),e.autofocus&&!d||this.hasFocus()?setTimeout(z(Ti,this),20):Ai(this),Ta)Ta.hasOwnProperty(a)&&Ta[a](this,e[a],La);mr(this),e.finishInit&&e.finishInit(this);for(var l=0;l<Fa.length;++l)Fa[l](this);Qi(this),b&&e.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}Oa.defaults=Ea,Oa.optionHandlers=Ta;var Fa=[];function Ia(t,e,n,i){var r,o=t.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?r=we(t,e).state:n="prev");var a=t.options.tabSize,l=te(o,e),s=B(l.text,null,a);l.stateAfter&&(l.stateAfter=null);var u,c=l.text.match(/^\s*/)[0];if(i||/\S/.test(l.text)){if("smart"==n&&((u=o.mode.indent(r,l.text.slice(c.length),l.text))==j||150<u)){if(!i)return;n="prev"}}else u=0,n="not";"prev"==n?u=e>o.first?B(te(o,e-1).text,null,a):0:"add"==n?u=s+t.options.indentUnit:"subtract"==n?u=s-t.options.indentUnit:"number"==typeof n&&(u=s+n),u=Math.max(0,u);var h="",d=0;if(t.options.indentWithTabs)for(var f=Math.floor(u/a);f;--f)d+=a,h+="\t";if(d<u&&(h+=q(u-d)),h!=c)return bo(o,h,se(e,0),se(e,c.length),"+input"),!(l.stateAfter=null);for(var p=0;p<o.sel.ranges.length;p++){var g=o.sel.ranges[p];if(g.head.line==e&&g.head.ch<c.length){var m=se(e,c.length);to(o,p,new Lr(m,m));break}}}Oa.defineInitHook=function(t){return Fa.push(t)};var Pa=null;function za(t){Pa=t}function _a(t,e,n,i,r){var o=t.doc;t.display.shift=!1,i=i||o.sel;var a=new Date-200,l="paste"==r||t.state.pasteIncoming>a,s=Wt(e),u=null;if(l&&1<i.ranges.length)if(Pa&&Pa.text.join("\n")==e){if(i.ranges.length%Pa.text.length==0){u=[];for(var c=0;c<Pa.text.length;c++)u.push(o.splitLines(Pa.text[c]))}}else s.length==i.ranges.length&&t.options.pasteLinesPerSelection&&(u=$(s,function(t){return[t]}));for(var h=t.curOp.updateInput,d=i.ranges.length-1;0<=d;d--){var f=i.ranges[d],p=f.from(),g=f.to();f.empty()&&(n&&0<n?p=se(p.line,p.ch-n):t.state.overwrite&&!l?g=se(g.line,Math.min(te(o,g.line).text.length,g.ch+K(s).length)):l&&Pa&&Pa.lineWise&&Pa.text.join("\n")==e&&(p=g=se(p.line,0)));var m={from:p,to:g,text:u?u[d%u.length]:s,origin:r||(l?"paste":t.state.cutIncoming>a?"cut":"+input")};po(t.doc,m),mn(t,"inputRead",t,m)}e&&!l&&Ha(t,e),zi(t),t.curOp.updateInput<2&&(t.curOp.updateInput=h),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function Ba(t,e){var n=t.clipboardData&&t.clipboardData.getData("Text");if(n)return t.preventDefault(),e.isReadOnly()||e.options.disableInput||ir(e,function(){return _a(e,n,0,null,"paste")}),!0}function Ha(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var n=t.doc.sel,i=n.ranges.length-1;0<=i;i--){var r=n.ranges[i];if(!(100<r.head.ch||i&&n.ranges[i-1].head.line==r.head.line)){var o=t.getModeAt(r.head),a=!1;if(o.electricChars){for(var l=0;l<o.electricChars.length;l++)if(-1<e.indexOf(o.electricChars.charAt(l))){a=Ia(t,r.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(te(t.doc,r.head.line).text.slice(0,r.head.ch))&&(a=Ia(t,r.head.line,"smart"));a&&mn(t,"electricInput",t,r.head.line)}}}function Wa(t){for(var e=[],n=[],i=0;i<t.doc.sel.ranges.length;i++){var r=t.doc.sel.ranges[i].head.line,o={anchor:se(r,0),head:se(r+1,0)};n.push(o),e.push(t.getRange(o.anchor,o.head))}return{text:e,ranges:n}}function Ra(t,e,n,i){t.setAttribute("autocorrect",n?"":"off"),t.setAttribute("autocapitalize",i?"":"off"),t.setAttribute("spellcheck",!!e)}function ja(){var t=A("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),e=A("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return b?t.style.width="1000px":t.setAttribute("wrap","off"),c&&(t.style.border="1px solid black"),Ra(t),e}function Ga(i,r,o,t,a){var e=r,n=o,l=te(i,r.line);function s(t){var e,n;if(null==(e=a?oa(i.cm,l,r,o):ia(l,r,o))){if(t||(n=r.line+o)<i.first||n>=i.first+i.size||(r=new se(n,r.ch,r.sticky),!(l=te(i,n))))return!1;r=ra(a,i.cm,l,r.line,o)}else r=e;return!0}if("char"==t)s();else if("column"==t)s(!0);else if("word"==t||"group"==t)for(var u=null,c="group"==t,h=i.cm&&i.cm.getHelper(r,"wordChars"),d=!0;!(o<0)||s(!d);d=!1){var f=l.text.charAt(r.ch)||"\n",p=et(f,h)?"w":c&&"\n"==f?"n":!c||/\s/.test(f)?null:"p";if(!c||d||p||(p="s"),u&&u!=p){o<0&&(o=1,s(),r.sticky="after");break}if(p&&(u=p),0<o&&!s(!d))break}var g=uo(i,r,e,n,!0);return ce(e,g)&&(g.hitSide=!0),g}function Ua(t,e,n,i){var r,o,a=t.doc,l=e.left;if("page"==i){var s=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),u=Math.max(s-.5*si(t.display),3);r=(0<n?e.bottom:e.top)+n*u}else"line"==i&&(r=0<n?e.bottom+3:e.top-3);for(;(o=ii(t,l,r)).outside;){if(n<0?r<=0:r>=a.height){o.hitSide=!0;break}r+=5*n}return o}function Xa(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new H,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null}function Ya(t,e){var n=Bn(t,e.line);if(!n||n.hidden)return null;var i=te(t.doc,e.line),r=zn(n,i,e.line),o=yt(i,t.doc.direction),a="left";o&&(a=st(o,e.ch)%2?"right":"left");var l=Gn(r.map,e.ch,a);return l.offset="right"==l.collapse?l.end:l.start,l}function Va(t,e){return e&&(t.bad=!0),t}function qa(t,e,n){var i;if(e==t.display.lineDiv){if(!(i=t.display.lineDiv.childNodes[n]))return Va(t.clipPos(se(t.display.viewTo-1)),!0);e=null,n=0}else for(i=e;;i=i.parentNode){if(!i||i==t.display.lineDiv)return null;if(i.parentNode&&i.parentNode==t.display.lineDiv)break}for(var r=0;r<t.display.view.length;r++){var o=t.display.view[r];if(o.node==i)return Ka(o,e,n)}}function Ka(u,t,e){var n=u.text.firstChild,i=!1;if(!t||!N(n,t))return Va(se(re(u.line),0),!0);if(t==n&&(i=!0,t=n.childNodes[e],e=0,!t)){var r=u.rest?K(u.rest):u.line;return Va(se(re(r),r.text.length),i)}var o=3==t.nodeType?t:null,a=t;for(o||1!=t.childNodes.length||3!=t.firstChild.nodeType||(o=t.firstChild,e=e&&o.nodeValue.length);a.parentNode!=n;)a=a.parentNode;var c=u.measure,h=c.maps;function l(t,e,n){for(var i=-1;i<(h?h.length:0);i++)for(var r=i<0?c.map:h[i],o=0;o<r.length;o+=3){var a=r[o+2];if(a==t||a==e){var l=re(i<0?u.line:u.rest[i]),s=r[o]+n;return(n<0||a!=t)&&(s=r[o+(n?1:0)]),se(l,s)}}}var s=l(o,a,e);if(s)return Va(s,i);for(var d=a.nextSibling,f=o?o.nodeValue.length-e:0;d;d=d.nextSibling){if(s=l(d,d.firstChild,0))return Va(se(s.line,s.ch-f),i);f+=d.textContent.length}for(var p=a.previousSibling,g=e;p;p=p.previousSibling){if(s=l(p,p.firstChild,-1))return Va(se(s.line,s.ch+g),i);g+=p.textContent.length}}Xa.prototype.init=function(t){var e=this,a=this,l=a.cm,s=a.div=t.lineDiv;function n(t){if(!kt(l,t)){if(l.somethingSelected())za({lineWise:!1,text:l.getSelections()}),"cut"==t.type&&l.replaceSelection("",null,"cut");else{if(!l.options.lineWiseCopyCut)return;var e=Wa(l);za({lineWise:!0,text:e.text}),"cut"==t.type&&l.operation(function(){l.setSelections(e.ranges,0,G),l.replaceSelection("",null,"cut")})}if(t.clipboardData){t.clipboardData.clearData();var n=Pa.text.join("\n");if(t.clipboardData.setData("Text",n),t.clipboardData.getData("Text")==n)return void t.preventDefault()}var i=ja(),r=i.firstChild;l.display.lineSpace.insertBefore(i,l.display.lineSpace.firstChild),r.value=Pa.text.join("\n");var o=document.activeElement;P(r),setTimeout(function(){l.display.lineSpace.removeChild(i),o.focus(),o==s&&a.showPrimarySelection()},50)}}Ra(s,l.options.spellcheck,l.options.autocorrect,l.options.autocapitalize),xt(s,"paste",function(t){kt(l,t)||Ba(t,l)||C<=11&&setTimeout(rr(l,function(){return e.updateFromDOM()}),20)}),xt(s,"compositionstart",function(t){e.composing={data:t.data,done:!1}}),xt(s,"compositionupdate",function(t){e.composing||(e.composing={data:t.data,done:!1})}),xt(s,"compositionend",function(t){e.composing&&(t.data!=e.composing.data&&e.readFromDOMSoon(),e.composing.done=!0)}),xt(s,"touchstart",function(){return a.forceCompositionEnd()}),xt(s,"input",function(){e.composing||e.readFromDOMSoon()}),xt(s,"copy",n),xt(s,"cut",n)},Xa.prototype.prepareSelection=function(){var t=Ci(this.cm,!1);return t.focus=this.cm.state.focused,t},Xa.prototype.showSelection=function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},Xa.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Xa.prototype.showPrimarySelection=function(){var t=this.getSelection(),e=this.cm,n=e.doc.sel.primary(),i=n.from(),r=n.to();if(e.display.viewTo==e.display.viewFrom||i.line>=e.display.viewTo||r.line<e.display.viewFrom)t.removeAllRanges();else{var o=qa(e,t.anchorNode,t.anchorOffset),a=qa(e,t.focusNode,t.focusOffset);if(!o||o.bad||!a||a.bad||0!=ue(fe(o,a),i)||0!=ue(de(o,a),r)){var l=e.display.view,s=i.line>=e.display.viewFrom&&Ya(e,i)||{node:l[0].measure.map[2],offset:0},u=r.line<e.display.viewTo&&Ya(e,r);if(!u){var c=l[l.length-1].measure,h=c.maps?c.maps[c.maps.length-1]:c.map;u={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(s&&u){var d,f=t.rangeCount&&t.getRangeAt(0);try{d=D(s.node,s.offset,u.offset,u.node)}catch(t){}d&&(!g&&e.state.focused?(t.collapse(s.node,s.offset),d.collapsed||(t.removeAllRanges(),t.addRange(d))):(t.removeAllRanges(),t.addRange(d)),f&&null==t.anchorNode?t.addRange(f):g&&this.startGracePeriod()),this.rememberSelection()}else t.removeAllRanges()}}},Xa.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},Xa.prototype.showMultipleSelections=function(t){E(this.cm.display.cursorDiv,t.cursors),E(this.cm.display.selectionDiv,t.selection)},Xa.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},Xa.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return N(this.div,e)},Xa.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Xa.prototype.blur=function(){this.div.blur()},Xa.prototype.getField=function(){return this.div},Xa.prototype.supportsTouch=function(){return!0},Xa.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():ir(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))})},Xa.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},Xa.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),e=this.cm;if(h&&a&&this.cm.display.gutterSpecs.length&&function(t){for(var e=t;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=qa(e,t.anchorNode,t.anchorOffset),i=qa(e,t.focusNode,t.focusOffset);n&&i&&ir(e,function(){io(e.doc,Tr(n,i),G),(n.bad||i.bad)&&(e.curOp.selectionChanged=!0)})}}},Xa.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t,e,n,i=this.cm,r=i.display,o=i.doc.sel.primary(),a=o.from(),l=o.to();if(0==a.ch&&a.line>i.firstLine()&&(a=se(a.line-1,te(i.doc,a.line-1).length)),l.ch==te(i.doc,l.line).text.length&&l.line<i.lastLine()&&(l=se(l.line+1,0)),a.line<r.viewFrom||l.line>r.viewTo-1)return!1;n=a.line==r.viewFrom||0==(t=gi(i,a.line))?(e=re(r.view[0].line),r.view[0].node):(e=re(r.view[t].line),r.view[t-1].node.nextSibling);var s,u,c=gi(i,l.line);if(u=c==r.view.length-1?(s=r.viewTo-1,r.lineDiv.lastChild):(s=re(r.view[c+1].line)-1,r.view[c+1].node.previousSibling),!n)return!1;for(var h=i.doc.splitLines(function(s,t,e,u,c){var n="",h=!1,d=s.doc.lineSeparator(),f=!1;function p(){h&&(n+=d,f&&(n+=d),h=f=!1)}function g(t){t&&(p(),n+=t)}function m(t){if(1==t.nodeType){var e=t.getAttribute("cm-text");if(e)return void g(e);var n,i=t.getAttribute("cm-marker");if(i){var r=s.findMarks(se(u,0),se(c+1,0),(l=+i,function(t){return t.id==l}));return void(r.length&&(n=r[0].find(0))&&g(ee(s.doc,n.from,n.to).join(d)))}if("false"==t.getAttribute("contenteditable"))return;var o=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;o&&p();for(var a=0;a<t.childNodes.length;a++)m(t.childNodes[a]);/^(pre|p)$/i.test(t.nodeName)&&(f=!0),o&&(h=!0)}else 3==t.nodeType&&g(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var l}for(;m(t),t!=e;)t=t.nextSibling,f=!1;return n}(i,n,u,e,s)),d=ee(i.doc,se(e,0),se(s,te(i.doc,s).text.length));1<h.length&&1<d.length;)if(K(h)==K(d))h.pop(),d.pop(),s--;else{if(h[0]!=d[0])break;h.shift(),d.shift(),e++}for(var f=0,p=0,g=h[0],m=d[0],v=Math.min(g.length,m.length);f<v&&g.charCodeAt(f)==m.charCodeAt(f);)++f;for(var y=K(h),b=K(d),x=Math.min(y.length-(1==h.length?f:0),b.length-(1==d.length?f:0));p<x&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)++p;if(1==h.length&&1==d.length&&e==a.line)for(;f&&f>a.ch&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)f--,p++;h[h.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),h[0]=h[0].slice(f).replace(/\u200b+$/,"");var w=se(e,f),C=se(s,d.length?K(d).length-p:0);return 1<h.length||h[0]||ue(w,C)?(bo(i.doc,h,w,C,"+input"),!0):void 0},Xa.prototype.ensurePolled=function(){this.forceCompositionEnd()},Xa.prototype.reset=function(){this.forceCompositionEnd()},Xa.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Xa.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()},80))},Xa.prototype.updateFromDOM=function(){var t=this;!this.cm.isReadOnly()&&this.pollContent()||ir(this.cm,function(){return mi(t.cm)})},Xa.prototype.setUneditable=function(t){t.contentEditable="false"},Xa.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||rr(this.cm,_a)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},Xa.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},Xa.prototype.onContextMenu=function(){},Xa.prototype.resetPosition=function(){},Xa.prototype.needsContentAttribute=!0;function $a(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new H,this.hasSelection=!1,this.composing=null}var Za,Qa,Ja,tl,el;function nl(t,e,i,n){Za.defaults[t]=e,i&&(Qa[t]=n?function(t,e,n){n!=La&&i(t,e,n)}:i)}$a.prototype.init=function(n){var t=this,i=this,r=this.cm;this.createField(n);var o=this.textarea;function e(t){if(!kt(r,t)){if(r.somethingSelected())za({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var e=Wa(r);za({lineWise:!0,text:e.text}),"cut"==t.type?r.setSelections(e.ranges,null,G):(i.prevInput="",o.value=e.text.join("\n"),P(o))}"cut"==t.type&&(r.state.cutIncoming=+new Date)}}n.wrapper.insertBefore(this.wrapper,n.wrapper.firstChild),c&&(o.style.width="0px"),xt(o,"input",function(){w&&9<=C&&t.hasSelection&&(t.hasSelection=null),i.poll()}),xt(o,"paste",function(t){kt(r,t)||Ba(t,r)||(r.state.pasteIncoming=+new Date,i.fastPoll())}),xt(o,"cut",e),xt(o,"copy",e),xt(n.scroller,"paste",function(t){if(!Tn(n,t)&&!kt(r,t)){if(!o.dispatchEvent)return r.state.pasteIncoming=+new Date,void i.focus();var e=new Event("paste");e.clipboardData=t.clipboardData,o.dispatchEvent(e)}}),xt(n.lineSpace,"selectstart",function(t){Tn(n,t)||Et(t)}),xt(o,"compositionstart",function(){var t=r.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:t,range:r.markText(t,r.getCursor("to"),{className:"CodeMirror-composing"})}}),xt(o,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},$a.prototype.createField=function(t){this.wrapper=ja(),this.textarea=this.wrapper.firstChild},$a.prototype.prepareSelection=function(){var t=this.cm,e=t.display,n=t.doc,i=Ci(t);if(t.options.moveInputWithCursor){var r=ti(t,n.sel.primary().head,"div"),o=e.wrapper.getBoundingClientRect(),a=e.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,r.top+a.top-o.top)),i.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,r.left+a.left-o.left))}return i},$a.prototype.showSelection=function(t){var e=this.cm.display;E(e.cursorDiv,t.cursors),E(e.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},$a.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var e=this.cm;if(e.somethingSelected()){this.prevInput="";var n=e.getSelection();this.textarea.value=n,e.state.focused&&P(this.textarea),w&&9<=C&&(this.hasSelection=n)}else t||(this.prevInput=this.textarea.value="",w&&9<=C&&(this.hasSelection=null))}},$a.prototype.getField=function(){return this.textarea},$a.prototype.supportsTouch=function(){return!1},$a.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!d||O()!=this.textarea))try{this.textarea.focus()}catch(t){}},$a.prototype.blur=function(){this.textarea.blur()},$a.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},$a.prototype.receivedFocus=function(){this.slowPoll()},$a.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},$a.prototype.fastPoll=function(){var e=!1,n=this;n.pollingFast=!0,n.polling.set(20,function t(){n.poll()||e?(n.pollingFast=!1,n.slowPoll()):(e=!0,n.polling.set(60,t))})},$a.prototype.poll=function(){var t=this,e=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!e.state.focused||Rt(n)&&!i&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var r=n.value;if(r==i&&!e.somethingSelected())return!1;if(w&&9<=C&&this.hasSelection===r||x&&/[\uf700-\uf7ff]/.test(r))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var o=r.charCodeAt(0);if(8203!=o||i||(i="â€‹"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var a=0,l=Math.min(i.length,r.length);a<l&&i.charCodeAt(a)==r.charCodeAt(a);)++a;return ir(e,function(){_a(e,r.slice(a),i.length-a,null,t.composing?"*compose":null),1e3<r.length||-1<r.indexOf("\n")?n.value=t.prevInput="":t.prevInput=r,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},$a.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},$a.prototype.onKeyPress=function(){w&&9<=C&&(this.hasSelection=null),this.fastPoll()},$a.prototype.onContextMenu=function(t){var n=this,i=n.cm,r=i.display,o=n.textarea;n.contextMenuPending&&n.contextMenuPending();var e=pi(i,t),a=r.scroller.scrollTop;if(e&&!m){i.options.resetSelectionOnContextMenu&&-1==i.doc.sel.contains(e)&&rr(i,io)(i.doc,Tr(e),G);var l,s=o.style.cssText,u=n.wrapper.style.cssText,c=n.wrapper.offsetParent.getBoundingClientRect();if(n.wrapper.style.cssText="position: static",o.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-c.top-5)+"px; left: "+(t.clientX-c.left-5)+"px;\n      z-index: 1000; background: "+(w?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",b&&(l=window.scrollY),r.input.focus(),b&&window.scrollTo(null,l),r.input.reset(),i.somethingSelected()||(o.value=n.prevInput=" "),n.contextMenuPending=f,r.selForContextMenu=i.doc.sel,clearTimeout(r.detectingSelectAll),w&&9<=C&&d(),S){Nt(t);var h=function(){Ct(window,"mouseup",h),setTimeout(f,20)};xt(window,"mouseup",h)}else setTimeout(f,50)}function d(){if(null!=o.selectionStart){var t=i.somethingSelected(),e="â€‹"+(t?o.value:"");o.value="â‡š",o.value=e,n.prevInput=t?"":"â€‹",o.selectionStart=1,o.selectionEnd=e.length,r.selForContextMenu=i.doc.sel}}function f(){if(n.contextMenuPending==f&&(n.contextMenuPending=!1,n.wrapper.style.cssText=u,o.style.cssText=s,w&&C<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=a),null!=o.selectionStart)){(!w||w&&C<9)&&d();var t=0,e=function(){r.selForContextMenu==i.doc.sel&&0==o.selectionStart&&0<o.selectionEnd&&"â€‹"==n.prevInput?rr(i,ho)(i):t++<10?r.detectingSelectAll=setTimeout(e,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(e,200)}}},$a.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t},$a.prototype.setUneditable=function(){},$a.prototype.needsContentAttribute=!1,Qa=(Za=Oa).optionHandlers,Za.defineOption=nl,Za.Init=La,nl("value","",function(t,e){return t.setValue(e)},!0),nl("mode",null,function(t,e){t.doc.modeOption=e,Ir(t)},!0),nl("indentUnit",2,Ir,!0),nl("indentWithTabs",!1),nl("smartIndent",!0),nl("tabSize",4,function(t){Pr(t),Vn(t),mi(t)},!0),nl("lineSeparator",null,function(t,i){if(t.doc.lineSep=i){var r=[],o=t.doc.first;t.doc.iter(function(t){for(var e=0;;){var n=t.text.indexOf(i,e);if(-1==n)break;e=n+i.length,r.push(se(o,n))}o++});for(var e=r.length-1;0<=e;e--)bo(t.doc,i,r[e],se(r[e].line,r[e].ch+i.length))}}),nl("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(t,e,n){t.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),n!=La&&t.refresh()}),nl("specialCharPlaceholder",an,function(t){return t.refresh()},!0),nl("electricChars",!0),nl("inputStyle",d?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),nl("spellcheck",!1,function(t,e){return t.getInputField().spellcheck=e},!0),nl("autocorrect",!1,function(t,e){return t.getInputField().autocorrect=e},!0),nl("autocapitalize",!1,function(t,e){return t.getInputField().autocapitalize=e},!0),nl("rtlMoveVisually",!p),nl("wholeLineUpdateBefore",!0),nl("theme","default",function(t){Ma(t),br(t)},!0),nl("keyMap","default",function(t,e,n){var i=ta(e),r=n!=La&&ta(n);r&&r.detach&&r.detach(t,i),i.attach&&i.attach(t,r||null)}),nl("extraKeys",null),nl("configureMouse",null),nl("lineWrapping",!1,Na,!0),nl("gutters",[],function(t,e){t.display.gutterSpecs=vr(e,t.options.lineNumbers),br(t)},!0),nl("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?hi(t.display)+"px":"0",t.refresh()},!0),nl("coverGutterNextToScrollbar",!1,function(t){return Yi(t)},!0),nl("scrollbarStyle","native",function(t){Ki(t),Yi(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)},!0),nl("lineNumbers",!1,function(t,e){t.display.gutterSpecs=vr(t.options.gutters,e),br(t)},!0),nl("firstLineNumber",1,br,!0),nl("lineNumberFormatter",function(t){return t},br,!0),nl("showCursorWhenSelecting",!1,wi,!0),nl("resetSelectionOnContextMenu",!0),nl("lineWiseCopyCut",!0),nl("pasteLinesPerSelection",!0),nl("selectionsMayTouch",!1),nl("readOnly",!1,function(t,e){"nocursor"==e&&(Ai(t),t.display.input.blur()),t.display.input.readOnlyChanged(e)}),nl("disableInput",!1,function(t,e){e||t.display.input.reset()},!0),nl("dragDrop",!0,Aa),nl("allowDropFileTypes",null),nl("cursorBlinkRate",530),nl("cursorScrollMargin",0),nl("cursorHeight",1,wi,!0),nl("singleCursorHeightPerLine",!0,wi,!0),nl("workTime",100),nl("workDelay",100),nl("flattenSpans",!0,Pr,!0),nl("addModeClass",!1,Pr,!0),nl("pollInterval",100),nl("undoDepth",200,function(t,e){return t.doc.history.undoDepth=e}),nl("historyEventDelay",1250),nl("viewportMargin",10,function(t){return t.refresh()},!0),nl("maxHighlightLength",1e4,Pr,!0),nl("moveInputWithCursor",!0,function(t,e){e||t.display.input.resetPosition()}),nl("tabindex",null,function(t,e){return t.display.input.getField().tabIndex=e||""}),nl("autofocus",null),nl("direction","ltr",function(t,e){return t.doc.setDirection(e)},!0),nl("phrases",null),tl=(Ja=Oa).optionHandlers,el=Ja.helpers={},Ja.prototype={constructor:Ja,focus:function(){window.focus(),this.display.input.focus()},setOption:function(t,e){var n=this.options,i=n[t];n[t]==e&&"mode"!=t||(n[t]=e,tl.hasOwnProperty(t)&&rr(this,tl[t])(this,e,i),St(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](ta(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||e[n].name==t)return e.splice(n,1),!0},addOverlay:or(function(t,e){var n=t.token?t:Ja.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");!function(t,e,n){for(var i=0,r=n(e);i<t.length&&n(t[i])<=r;)i++;t.splice(i,0,e)}(this.state.overlays,{mode:n,modeSpec:t,opaque:e&&e.opaque,priority:e&&e.priority||0},function(t){return t.priority}),this.state.modeGen++,mi(this)}),removeOverlay:or(function(t){for(var e=this.state.overlays,n=0;n<e.length;++n){var i=e[n].modeSpec;if(i==t||"string"==typeof t&&i.name==t)return e.splice(n,1),this.state.modeGen++,void mi(this)}}),indentLine:or(function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),ae(this.doc,t)&&Ia(this,t,e,n)}),indentSelection:or(function(t){for(var e=this.doc.sel.ranges,n=-1,i=0;i<e.length;i++){var r=e[i];if(r.empty())r.head.line>n&&(Ia(this,r.head.line,t,!0),n=r.head.line,i==this.doc.sel.primIndex&&zi(this));else{var o=r.from(),a=r.to(),l=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var s=l;s<n;++s)Ia(this,s,t);var u=this.doc.sel.ranges;0==o.ch&&e.length==u.length&&0<u[i].from().ch&&to(this.doc,i,new Lr(o,u[i].to()),G)}}}),getTokenAt:function(t,e){return Me(this,t,e)},getLineTokens:function(t,e){return Me(this,se(t),e,!0)},getTokenTypeAt:function(t){t=ge(this.doc,t);var e,n=xe(this,te(this.doc,t.line)),i=0,r=(n.length-1)/2,o=t.ch;if(0==o)e=n[2];else for(;;){var a=i+r>>1;if((a?n[2*a-1]:0)>=o)r=a;else{if(!(n[2*a+1]<o)){e=n[2*a+2];break}i=1+a}}var l=e?e.indexOf("overlay "):-1;return l<0?e:0==l?null:e.slice(0,l-1)},getModeAt:function(t){var e=this.doc.mode;return e.innerMode?Ja.innerMode(e,this.getTokenAt(t).state).mode:e},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var n=[];if(!el.hasOwnProperty(e))return n;var i=el[e],r=this.getModeAt(t);if("string"==typeof r[e])i[r[e]]&&n.push(i[r[e]]);else if(r[e])for(var o=0;o<r[e].length;o++){var a=i[r[e][o]];a&&n.push(a)}else r.helperType&&i[r.helperType]?n.push(i[r.helperType]):i[r.name]&&n.push(i[r.name]);for(var l=0;l<i._global.length;l++){var s=i._global[l];s.pred(r,this)&&-1==W(n,s.val)&&n.push(s.val)}return n},getStateAfter:function(t,e){var n=this.doc;return we(this,(t=pe(n,null==t?n.first+n.size-1:t))+1,e).state},cursorCoords:function(t,e){var n=this.doc.sel.primary();return ti(this,null==t?n.head:"object"==typeof t?ge(this.doc,t):t?n.from():n.to(),e||"page")},charCoords:function(t,e){return Jn(this,ge(this.doc,t),e||"page")},coordsChar:function(t,e){return ii(this,(t=Qn(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=Qn(this,{top:t,left:0},e||"page").top,oe(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e,n){var i,r=!1;if("number"==typeof t){var o=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:o<t&&(t=o,r=!0),i=te(this.doc,t)}else i=t;return Zn(this,i,{top:0,left:0},e||"page",n||r).top+(r?this.doc.height-Ze(i):0)},defaultTextHeight:function(){return si(this.display)},defaultCharWidth:function(){return ui(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,n,i,r){var o,a,l,s=this.display,u=(t=ti(this,ge(this.doc,t))).bottom,c=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),s.sizer.appendChild(e),"over"==i)u=t.top;else if("above"==i||"near"==i){var h=Math.max(s.wrapper.clientHeight,this.doc.height),d=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==i||t.bottom+e.offsetHeight>h)&&t.top>e.offsetHeight?u=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=h&&(u=t.bottom),c+e.offsetWidth>d&&(c=d-e.offsetWidth)}e.style.top=u+"px",e.style.left=e.style.right="","right"==r?(c=s.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?c=0:"middle"==r&&(c=(s.sizer.clientWidth-e.offsetWidth)/2),e.style.left=c+"px"),n&&(o=this,a={left:c,top:u,right:c+e.offsetWidth,bottom:u+e.offsetHeight},null!=(l=Ii(o,a)).scrollTop&&Wi(o,l.scrollTop),null!=l.scrollLeft&&ji(o,l.scrollLeft))},triggerOnKeyDown:or(ga),triggerOnKeyPress:or(va),triggerOnKeyUp:ma,triggerOnMouseDown:or(wa),execCommand:function(t){if(aa.hasOwnProperty(t))return aa[t].call(null,this)},triggerElectric:or(function(t){Ha(this,t)}),findPosH:function(t,e,n,i){var r=1;e<0&&(r=-1,e=-e);for(var o=ge(this.doc,t),a=0;a<e&&!(o=Ga(this.doc,o,r,n,i)).hitSide;++a);return o},moveH:or(function(e,n){var i=this;this.extendSelectionsBy(function(t){return i.display.shift||i.doc.extend||t.empty()?Ga(i.doc,t.head,e,n,i.options.rtlMoveVisually):e<0?t.from():t.to()},X)}),deleteH:or(function(n,i){var t=this.doc.sel,r=this.doc;t.somethingSelected()?r.replaceSelection("",null,"+delete"):ea(this,function(t){var e=Ga(r,t.head,n,i,!1);return n<0?{from:e,to:t.head}:{from:t.head,to:e}})}),findPosV:function(t,e,n,i){var r=1,o=i;e<0&&(r=-1,e=-e);for(var a=ge(this.doc,t),l=0;l<e;++l){var s=ti(this,a,"div");if(null==o?o=s.left:s.left=o,(a=Ua(this,s,r,n)).hitSide)break}return a},moveV:or(function(i,r){var o=this,a=this.doc,l=[],s=!this.display.shift&&!a.extend&&a.sel.somethingSelected();if(a.extendSelectionsBy(function(t){if(s)return i<0?t.from():t.to();var e=ti(o,t.head,"div");null!=t.goalColumn&&(e.left=t.goalColumn),l.push(e.left);var n=Ua(o,e,i,r);return"page"==r&&t==a.sel.primary()&&Pi(o,Jn(o,n,"div").top-e.top),n},X),l.length)for(var t=0;t<a.sel.ranges.length;t++)a.sel.ranges[t].goalColumn=l[t]}),findWordAt:function(t){var e=te(this.doc,t.line).text,n=t.ch,i=t.ch;if(e){var r=this.getHelper(t,"wordChars");"before"!=t.sticky&&i!=e.length||!n?++i:--n;for(var o=e.charAt(n),a=et(o,r)?function(t){return et(t,r)}:/\s/.test(o)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!et(t)};0<n&&a(e.charAt(n-1));)--n;for(;i<e.length&&a(e.charAt(i));)++i}return new Lr(se(t.line,n),se(t.line,i))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||(((this.state.overwrite=!this.state.overwrite)?F:M)(this.display.cursorDiv,"CodeMirror-overwrite"),St(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==O()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:or(function(t,e){_i(this,t,e)}),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-Fn(this)-this.display.barHeight,width:t.scrollWidth-Fn(this)-this.display.barWidth,clientHeight:Pn(this),clientWidth:In(this)}},scrollIntoView:or(function(t,e){var n,i;null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:se(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line?(i=t,Bi(n=this),n.curOp.scrollToPos=i):Hi(this,t.from,t.to,t.margin)}),setSize:or(function(t,e){function n(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t}var i=this;null!=t&&(this.display.wrapper.style.width=n(t)),null!=e&&(this.display.wrapper.style.height=n(e)),this.options.lineWrapping&&Yn(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){vi(i,r,"widget");break}++r}),this.curOp.forceUpdate=!0,St(this,"refresh",this)}),operation:function(t){return ir(this,t)},startOperation:function(){return Zi(this)},endOperation:function(){return Qi(this)},refresh:or(function(){var t=this.display.cachedTextHeight;mi(this),this.curOp.forceUpdate=!0,Vn(this),_i(this,this.doc.scrollLeft,this.doc.scrollTop),fr(this.display),(null==t||.5<Math.abs(t-si(this.display)))&&fi(this),St(this,"refresh",this)}),swapDoc:or(function(t){var e=this.doc;return e.cm=null,this.state.selectingText&&this.state.selectingText(),Hr(this,t),Vn(this),this.display.input.reset(),_i(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,mn(this,"swapDoc",this,e),e}),phrase:function(t){var e=this.options.phrases;return e&&Object.prototype.hasOwnProperty.call(e,t)?e[t]:t},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Lt(Ja),Ja.registerHelper=function(t,e,n){el.hasOwnProperty(t)||(el[t]=Ja[t]={_global:[]}),el[t][e]=n},Ja.registerGlobalHelper=function(t,e,n,i){Ja.registerHelper(t,e,i),el[t]._global.push({pred:n,val:i})};var il,rl="iter insert remove copy getEditor constructor".split(" ");for(var ol in Po.prototype)Po.prototype.hasOwnProperty(ol)&&W(rl,ol)<0&&(Oa.prototype[ol]=function(t){return function(){return t.apply(this.doc,arguments)}}(Po.prototype[ol]));return Lt(Po),Oa.inputStyles={textarea:$a,contenteditable:Xa},Oa.defineMode=function(t){Oa.defaults.mode||"null"==t||(Oa.defaults.mode=t),function(t,e){2<arguments.length&&(e.dependencies=Array.prototype.slice.call(arguments,2)),Ut[t]=e}.apply(this,arguments)},Oa.defineMIME=function(t,e){Xt[t]=e},Oa.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),Oa.defineMIME("text/plain","null"),Oa.defineExtension=function(t,e){Oa.prototype[t]=e},Oa.defineDocExtension=function(t,e){Po.prototype[t]=e},Oa.fromTextArea=function(e,n){if((n=n?_(n):{}).value=e.value,!n.tabindex&&e.tabIndex&&(n.tabindex=e.tabIndex),!n.placeholder&&e.placeholder&&(n.placeholder=e.placeholder),null==n.autofocus){var t=O();n.autofocus=t==e||null!=e.getAttribute("autofocus")&&t==document.body}function i(){e.value=l.getValue()}var r;if(e.form&&(xt(e.form,"submit",i),!n.leaveSubmitMethodAlone)){var o=e.form;r=o.submit;try{var a=o.submit=function(){i(),o.submit=r,o.submit(),o.submit=a}}catch(t){}}n.finishInit=function(t){t.save=i,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,i(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(Ct(e.form,"submit",i),n.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=r))}},e.style.display="none";var l=Oa(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},n);return l},(il=Oa).off=Ct,il.on=xt,il.wheelEventPixels=kr,il.Doc=Po,il.splitLines=Wt,il.countColumn=B,il.findColumn=Y,il.isWordChar=tt,il.Pass=j,il.signal=St,il.Line=tn,il.changeEnd=Ar,il.scrollbarModel=qi,il.Pos=se,il.cmpPos=ue,il.modes=Ut,il.mimeModes=Xt,il.resolveMode=Yt,il.getMode=Vt,il.modeExtensions=qt,il.extendMode=Kt,il.copyState=$t,il.startState=Qt,il.innerMode=Zt,il.commands=aa,il.keyMap=Vo,il.keyName=Jo,il.isModifierKey=Zo,il.lookupKey=$o,il.normalizeKeyMap=Ko,il.StringStream=Jt,il.SharedTextMarker=No,il.TextMarker=To,il.LineWidget=Mo,il.e_preventDefault=Et,il.e_stopPropagation=Tt,il.e_stop=Nt,il.addClass=F,il.contains=N,il.rmClass=M,il.keyNames=Go,Oa.version="5.50.0",Oa}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(m){"use strict";var v=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,y=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,b=/[*+-]\s/;function x(t,e){var n=e.line,i=0,r=0,o=v.exec(t.getLine(n)),a=o[1];do{var l=n+(i+=1),s=t.getLine(l),u=v.exec(s);if(u){var c=u[1],h=parseInt(o[3],10)+i-r,d=parseInt(u[3],10),f=d;if(a!==c||isNaN(d)){if(a.length>c.length)return;if(a.length<c.length&&1===i)return;r+=1}else h===d&&(f=d+1),d<h&&(f=1+h),t.replaceRange(s.replace(v,c+f+u[4]+u[5]),{line:l,ch:0},{line:l,ch:s.length})}}while(u)}m.commands.newlineAndIndentContinueMarkdownList=function(t){if(t.getOption("disableInput"))return m.Pass;for(var e=t.listSelections(),n=[],i=0;i<e.length;i++){var r=e[i].head,o=t.getStateAfter(r.line),a=m.innerMode(t.getMode(),o);if("markdown"!==a.mode.name)return void t.execCommand("newlineAndIndent");var l=!1!==(o=a.state).list,s=0!==o.quote,u=t.getLine(r.line),c=v.exec(u),h=/^\s*$/.test(u.slice(0,r.ch));if(!e[i].empty()||!l&&!s||!c||h)return void t.execCommand("newlineAndIndent");if(y.test(u))/>\s*$/.test(u)||t.replaceRange("",{line:r.line,ch:0},{line:r.line,ch:r.ch+1}),n[i]="\n";else{var d=c[1],f=c[5],p=!(b.test(c[2])||0<=c[2].indexOf(">")),g=p?parseInt(c[3],10)+1+c[4]:c[2].replace("x"," ");n[i]="\n"+d+g+f,p&&x(t,r)}}t.replaceSelections(n)}}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror"),require("../xml/xml"),require("../meta")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../meta"],t):t(CodeMirror)}(function(P){"use strict";P.defineMode("markdown",function(p,w){var C=P.getMode(p,"text/html"),r="null"==C.name;void 0===w.highlightFormatting&&(w.highlightFormatting=!1),void 0===w.maxBlockquoteDepth&&(w.maxBlockquoteDepth=0),void 0===w.taskLists&&(w.taskLists=!1),void 0===w.strikethrough&&(w.strikethrough=!1),void 0===w.emoji&&(w.emoji=!1),void 0===w.fencedCodeBlockHighlighting&&(w.fencedCodeBlockHighlighting=!0),void 0===w.xml&&(w.xml=!0),void 0===w.tokenTypeOverrides&&(w.tokenTypeOverrides={});var S={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var t in S)S.hasOwnProperty(t)&&w.tokenTypeOverrides[t]&&(S[t]=w.tokenTypeOverrides[t]);var g=/^([*\-_])(?:\s*\1){2,}\s*$/,m=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,k=/^\[(x| )\](?=\s)/i,v=w.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,y=/^ *(?:\={1,}|-{1,})\s*$/,n=/^[^#!\[\]*_\\<>` "'(~:]+/,b=/^(~~~+|```+)[ \t]*([\w+#-]*)[^\n`]*$/,x=/^\s*\[[^\]]+?\]:.*$/,D=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function M(t,e,n){return e.f=e.inline=n,n(t,e)}function L(t,e,n){return e.f=e.block=n,n(t,e)}function i(t){if(t.linkTitle=!1,t.linkHref=!1,t.linkText=!1,t.em=!1,t.strong=!1,t.strikethrough=!1,t.quote=0,t.indentedCode=!1,t.f==E){var e=r;if(!e){var n=P.innerMode(C,t.htmlState);e="xml"==n.mode.name&&null===n.state.tagStart&&!n.state.context&&n.state.tokenize.isInText}e&&(t.f=N,t.block=a,t.htmlState=null)}return t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.prevLine=t.thisLine,t.thisLine={stream:null},null}function a(t,e){var n,i=t.column()===e.indentation,r=!(n=e.prevLine.stream)||!/\S/.test(n.string),o=e.indentedCode,a=e.prevLine.hr,l=!1!==e.list,s=(e.listStack[e.listStack.length-1]||0)+3;e.indentedCode=!1;var u=e.indentation;if(null===e.indentationDiff&&(e.indentationDiff=e.indentation,l)){for(e.list=null;u<e.listStack[e.listStack.length-1];)e.listStack.pop(),e.listStack.length?e.indentation=e.listStack[e.listStack.length-1]:e.list=!1;!1!==e.list&&(e.indentationDiff=u-e.listStack[e.listStack.length-1])}var c=!(r||a||e.prevLine.header||l&&o||e.prevLine.fencedCodeEnd),h=(!1===e.list||a||r)&&e.indentation<=s&&t.match(g),d=null;if(4<=e.indentationDiff&&(o||e.prevLine.fencedCodeEnd||e.prevLine.header||r))return t.skipToEnd(),e.indentedCode=!0,S.code;if(t.eatSpace())return null;if(i&&e.indentation<=s&&(d=t.match(v))&&d[1].length<=6)return e.quote=0,e.header=d[1].length,e.thisLine.header=!0,w.highlightFormatting&&(e.formatting="header"),e.f=e.inline,A(e);if(e.indentation<=s&&t.eat(">"))return e.quote=i?1:e.quote+1,w.highlightFormatting&&(e.formatting="quote"),t.eatSpace(),A(e);if(!h&&!e.setext&&i&&e.indentation<=s&&(d=t.match(m))){var f=d[1]?"ol":"ul";return e.indentation=u+t.current().length,e.list=!0,e.quote=0,e.listStack.push(e.indentation),e.em=!1,e.strong=!1,e.code=!1,e.strikethrough=!1,w.taskLists&&t.match(k,!1)&&(e.taskList=!0),e.f=e.inline,w.highlightFormatting&&(e.formatting=["list","list-"+f]),A(e)}return i&&e.indentation<=s&&(d=t.match(b,!0))?(e.quote=0,e.fencedEndRE=new RegExp(d[1]+"+ *$"),e.localMode=w.fencedCodeBlockHighlighting&&function(t){if(P.findModeByName){var e=P.findModeByName(t);e&&(t=e.mime||e.mimes[0])}var n=P.getMode(p,t);return"null"==n.name?null:n}(d[2]),e.localMode&&(e.localState=P.startState(e.localMode)),e.f=e.block=T,w.highlightFormatting&&(e.formatting="code-block"),e.code=-1,A(e)):e.setext||!(c&&l||e.quote||!1!==e.list||e.code||h||x.test(t.string))&&(d=t.lookAhead(1))&&(d=d.match(y))?(e.setext?(e.header=e.setext,e.setext=0,t.skipToEnd(),w.highlightFormatting&&(e.formatting="header")):(e.header="="==d[0].charAt(0)?1:2,e.setext=e.header),e.thisLine.header=!0,e.f=e.inline,A(e)):h?(t.skipToEnd(),e.hr=!0,e.thisLine.hr=!0,S.hr):"["===t.peek()?M(t,e,I):M(t,e,e.inline)}function E(t,e){var n=C.token(t,e.htmlState);if(!r){var i=P.innerMode(C,e.htmlState);("xml"==i.mode.name&&null===i.state.tagStart&&!i.state.context&&i.state.tokenize.isInText||e.md_inside&&-1<t.current().indexOf(">"))&&(e.f=N,e.block=a,e.htmlState=null)}return n}function T(t,e){var n,i=e.listStack[e.listStack.length-1]||0,r=e.indentation<i,o=i+3;return e.fencedEndRE&&e.indentation<=o&&(r||t.match(e.fencedEndRE))?(w.highlightFormatting&&(e.formatting="code-block"),r||(n=A(e)),e.localMode=e.localState=null,e.block=a,e.f=N,e.fencedEndRE=null,e.code=0,e.thisLine.fencedCodeEnd=!0,r?L(t,e,e.block):n):e.localMode?e.localMode.token(t,e.localState):(t.skipToEnd(),S.code)}function A(t){var e=[];if(t.formatting){e.push(S.formatting),"string"==typeof t.formatting&&(t.formatting=[t.formatting]);for(var n=0;n<t.formatting.length;n++)e.push(S.formatting+"-"+t.formatting[n]),"header"===t.formatting[n]&&e.push(S.formatting+"-"+t.formatting[n]+"-"+t.header),"quote"===t.formatting[n]&&(!w.maxBlockquoteDepth||w.maxBlockquoteDepth>=t.quote?e.push(S.formatting+"-"+t.formatting[n]+"-"+t.quote):e.push("error"))}if(t.taskOpen)return e.push("meta"),e.length?e.join(" "):null;if(t.taskClosed)return e.push("property"),e.length?e.join(" "):null;if(t.linkHref?e.push(S.linkHref,"url"):(t.strong&&e.push(S.strong),t.em&&e.push(S.em),t.strikethrough&&e.push(S.strikethrough),t.emoji&&e.push(S.emoji),t.linkText&&e.push(S.linkText),t.code&&e.push(S.code),t.image&&e.push(S.image),t.imageAltText&&e.push(S.imageAltText,"link"),t.imageMarker&&e.push(S.imageMarker)),t.header&&e.push(S.header,S.header+"-"+t.header),t.quote&&(e.push(S.quote),!w.maxBlockquoteDepth||w.maxBlockquoteDepth>=t.quote?e.push(S.quote+"-"+t.quote):e.push(S.quote+"-"+w.maxBlockquoteDepth)),!1!==t.list){var i=(t.listStack.length-1)%3;i?1==i?e.push(S.list2):e.push(S.list3):e.push(S.list1)}return t.trailingSpaceNewLine?e.push("trailing-space-new-line"):t.trailingSpace&&e.push("trailing-space-"+(t.trailingSpace%2?"a":"b")),e.length?e.join(" "):null}function e(t,e){if(t.match(n,!0))return A(e)}function N(t,e){var n=e.text(t,e);if(void 0!==n)return n;if(e.list)return e.list=null,A(e);if(e.taskList)return" "===t.match(k,!0)[1]?e.taskOpen=!0:e.taskClosed=!0,w.highlightFormatting&&(e.formatting="task"),e.taskList=!1,A(e);if(e.taskOpen=!1,e.taskClosed=!1,e.header&&t.match(/^#+$/,!0))return w.highlightFormatting&&(e.formatting="header"),A(e);var i=t.next();if(e.linkTitle){e.linkTitle=!1;var r=i;"("===i&&(r=")");var o="^\\s*(?:[^"+(r=(r+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+r;if(t.match(new RegExp(o),!0))return S.linkHref}if("`"===i){var a=e.formatting;w.highlightFormatting&&(e.formatting="code"),t.eatWhile("`");var l=t.current().length;if(0!=e.code||e.quote&&1!=l){if(l!=e.code)return e.formatting=a,A(e);var s=A(e);return e.code=0,s}return e.code=l,A(e)}if(e.code)return A(e);if("\\"===i&&(t.next(),w.highlightFormatting)){var u=A(e),c=S.formatting+"-escape";return u?u+" "+c:c}if("!"===i&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return e.imageMarker=!0,e.image=!0,w.highlightFormatting&&(e.formatting="image"),A(e);if("["===i&&e.imageMarker&&t.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return e.imageMarker=!1,e.imageAltText=!0,w.highlightFormatting&&(e.formatting="image"),A(e);if("]"===i&&e.imageAltText){w.highlightFormatting&&(e.formatting="image");var u=A(e);return e.imageAltText=!1,e.image=!1,e.inline=e.f=F,u}if("["===i&&!e.image)return e.linkText&&t.match(/^.*?\]/)||(e.linkText=!0,w.highlightFormatting&&(e.formatting="link")),A(e);if("]"===i&&e.linkText){w.highlightFormatting&&(e.formatting="link");var u=A(e);return e.linkText=!1,e.inline=e.f=t.match(/\(.*?\)| ?\[.*?\]/,!1)?F:N,u}if("<"===i&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return e.f=e.inline=O,w.highlightFormatting&&(e.formatting="link"),(u=A(e))?u+=" ":u="",u+S.linkInline;if("<"===i&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return e.f=e.inline=O,w.highlightFormatting&&(e.formatting="link"),(u=A(e))?u+=" ":u="",u+S.linkEmail;if(w.xml&&"<"===i&&t.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var h=t.string.indexOf(">",t.pos);if(-1!=h){var d=t.string.substring(t.start,h);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(d)&&(e.md_inside=!0)}return t.backUp(1),e.htmlState=P.startState(C),L(t,e,E)}if(w.xml&&"<"===i&&t.match(/^\/\w*?>/))return e.md_inside=!1,"tag";if("*"===i||"_"===i){for(var f=1,p=1==t.pos?" ":t.string.charAt(t.pos-2);f<3&&t.eat(i);)f++;var g=t.peek()||" ",m=!/\s/.test(g)&&(!D.test(g)||/\s/.test(p)||D.test(p)),v=!/\s/.test(p)&&(!D.test(p)||/\s/.test(g)||D.test(g)),y=null,b=null;if(f%2&&(e.em||!m||"*"!==i&&v&&!D.test(p)?e.em!=i||!v||"*"!==i&&m&&!D.test(g)||(y=!1):y=!0),1<f&&(e.strong||!m||"*"!==i&&v&&!D.test(p)?e.strong!=i||!v||"*"!==i&&m&&!D.test(g)||(b=!1):b=!0),null!=b||null!=y){w.highlightFormatting&&(e.formatting=null==y?"strong":null==b?"em":"strong em"),!0===y&&(e.em=i),!0===b&&(e.strong=i);s=A(e);return!1===y&&(e.em=!1),!1===b&&(e.strong=!1),s}}else if(" "===i&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return A(e);t.backUp(1)}if(w.strikethrough)if("~"===i&&t.eatWhile(i)){if(e.strikethrough){w.highlightFormatting&&(e.formatting="strikethrough");s=A(e);return e.strikethrough=!1,s}if(t.match(/^[^\s]/,!1))return e.strikethrough=!0,w.highlightFormatting&&(e.formatting="strikethrough"),A(e)}else if(" "===i&&t.match(/^~~/,!0)){if(" "===t.peek())return A(e);t.backUp(2)}if(w.emoji&&":"===i&&t.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){e.emoji=!0,w.highlightFormatting&&(e.formatting="emoji");var x=A(e);return e.emoji=!1,x}return" "===i&&(t.match(/^ +$/,!1)?e.trailingSpace++:e.trailingSpace&&(e.trailingSpaceNewLine=!0)),A(e)}function O(t,e){if(">"!==t.next())return t.match(/^[^>]+/,!0),S.linkInline;e.f=e.inline=N,w.highlightFormatting&&(e.formatting="link");var n=A(e);return n?n+=" ":n="",n+S.linkInline}function F(t,e){if(t.eatSpace())return null;var i,n=t.next();return"("===n||"["===n?(e.f=e.inline=(i="("===n?")":"]",function(t,e){if(t.next()!==i)return t.match(o[i]),e.linkHref=!0,A(e);e.f=e.inline=N,w.highlightFormatting&&(e.formatting="link-string");var n=A(e);return e.linkHref=!1,n}),w.highlightFormatting&&(e.formatting="link-string"),e.linkHref=!0,A(e)):"error"}var o={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function I(t,e){return t.match(/^([^\]\\]|\\.)*\]:/,!1)?(e.f=l,t.next(),w.highlightFormatting&&(e.formatting="link"),e.linkText=!0,A(e)):M(t,e,N)}function l(t,e){if(t.match(/^\]:/,!0)){e.f=e.inline=s,w.highlightFormatting&&(e.formatting="link");var n=A(e);return e.linkText=!1,n}return t.match(/^([^\]\\]|\\.)+/,!0),S.linkText}function s(t,e){return t.eatSpace()?null:(t.match(/^[^\s]+/,!0),void 0===t.peek()?e.linkTitle=!0:t.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),e.f=e.inline=N,S.linkHref+" url")}var u={startState:function(){return{f:a,prevLine:{stream:null},thisLine:{stream:null},block:a,htmlState:null,indentation:0,inline:N,text:e,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(t){return{f:t.f,prevLine:t.prevLine,thisLine:t.thisLine,block:t.block,htmlState:t.htmlState&&P.copyState(C,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?P.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,formatting:!1,linkText:t.linkText,linkTitle:t.linkTitle,linkHref:t.linkHref,code:t.code,em:t.em,strong:t.strong,strikethrough:t.strikethrough,emoji:t.emoji,header:t.header,setext:t.setext,hr:t.hr,taskList:t.taskList,list:t.list,listStack:t.listStack.slice(0),quote:t.quote,indentedCode:t.indentedCode,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside,fencedEndRE:t.fencedEndRE}},token:function(t,e){if(e.formatting=!1,t!=e.thisLine.stream){if(e.header=0,e.hr=!1,t.match(/^\s*$/,!0))return i(e),null;if(e.prevLine=e.thisLine,e.thisLine={stream:t},e.taskList=!1,e.trailingSpace=0,e.trailingSpaceNewLine=!1,!e.localState&&(e.f=e.block,e.f!=E)){var n=t.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(e.indentation=n,e.indentationDiff=null,0<n)return null}}return e.f(t,e)},innerMode:function(t){return t.block==E?{state:t.htmlState,mode:C}:t.localState?{state:t.localState,mode:t.localMode}:{state:t,mode:u}},indent:function(t,e,n){return t.block==E&&C.indent?C.indent(t.htmlState,e,n):t.localState&&t.localMode.indent?t.localMode.indent(t.localState,e,n):P.Pass},blankLine:i,getType:A,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return u},"xml"),P.defineMIME("text/markdown","markdown"),P.defineMIME("text/x-markdown","markdown")}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(S){"use strict";var k={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},D={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};S.defineMode("xml",function(t,e){var a,o,l=t.indentUnit,s={},n=e.htmlMode?k:D;for(var i in n)s[i]=n[i];for(var i in e)s[i]=e[i];function u(e,n){function t(t){return(n.tokenize=t)(e,n)}var i=e.next();return"<"==i?e.eat("!")?e.eat("[")?e.match("CDATA[")?t(r("atom","]]>")):null:e.match("--")?t(r("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),t(function i(r){return function(t,e){for(var n;null!=(n=t.next());){if("<"==n)return e.tokenize=i(r+1),e.tokenize(t,e);if(">"==n){if(1!=r)return e.tokenize=i(r-1),e.tokenize(t,e);e.tokenize=u;break}}return"meta"}}(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),n.tokenize=r("meta","?>"),"meta"):(a=e.eat("/")?"closeTag":"openTag",n.tokenize=c,"tag bracket"):"&"!=i?(e.eatWhile(/[^&<]/),null):(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error"}function c(t,e){var n=t.next();if(">"==n||"/"==n&&t.eat(">"))return e.tokenize=u,a=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return a="equals",null;if("<"!=n)return/[\'\"]/.test(n)?(e.tokenize=(i=n,o.isInAttribute=!0,o),e.stringStartCol=t.column(),e.tokenize(t,e)):(t.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word");e.tokenize=u,e.state=p,e.tagName=e.tagStart=null;var i,r=e.tokenize(t,e);return r?r+" tag error":"tag error";function o(t,e){for(;!t.eol();)if(t.next()==i){e.tokenize=c;break}return"string"}}function r(n,i){return function(t,e){for(;!t.eol();){if(t.match(i)){e.tokenize=u;break}t.next()}return n}}function h(t,e,n){this.prev=t.context,this.tagName=e,this.indent=t.indented,this.startOfLine=n,(s.doNotIndent.hasOwnProperty(e)||t.context&&t.context.noIndent)&&(this.noIndent=!0)}function d(t){t.context&&(t.context=t.context.prev)}function f(t,e){for(var n;;){if(!t.context)return;if(n=t.context.tagName,!s.contextGrabbers.hasOwnProperty(n)||!s.contextGrabbers[n].hasOwnProperty(e))return;d(t)}}function p(t,e,n){return"openTag"==t?(n.tagStart=e.column(),g):"closeTag"==t?m:p}function g(t,e,n){return"word"==t?(n.tagName=e.current(),o="tag",b):s.allowMissingTagName&&"endTag"==t?(o="tag bracket",b(t,e,n)):(o="error",g)}function m(t,e,n){if("word"!=t)return s.allowMissingTagName&&"endTag"==t?(o="tag bracket",v(t,e,n)):(o="error",y);var i=e.current();return n.context&&n.context.tagName!=i&&s.implicitlyClosed.hasOwnProperty(n.context.tagName)&&d(n),n.context&&n.context.tagName==i||!1===s.matchClosing?(o="tag",v):(o="tag error",y)}function v(t,e,n){return"endTag"!=t?(o="error",v):(d(n),p)}function y(t,e,n){return o="error",v(t,0,n)}function b(t,e,n){if("word"==t)return o="attribute",x;if("endTag"!=t&&"selfcloseTag"!=t)return o="error",b;var i=n.tagName,r=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==t||s.autoSelfClosers.hasOwnProperty(i)?f(n,i):(f(n,i),n.context=new h(n,i,r==n.indented)),p}function x(t,e,n){return"equals"==t?w:(s.allowMissing||(o="error"),b(t,0,n))}function w(t,e,n){return"string"==t?C:"word"==t&&s.allowUnquoted?(o="string",b):(o="error",b(t,0,n))}function C(t,e,n){return"string"==t?C:b(t,0,n)}return u.isInText=!0,{startState:function(t){var e={tokenize:u,state:p,indented:t||0,tagName:null,tagStart:null,context:null};return null!=t&&(e.baseIndent=t),e},token:function(t,e){if(!e.tagName&&t.sol()&&(e.indented=t.indentation()),t.eatSpace())return null;a=null;var n=e.tokenize(t,e);return(n||a)&&"comment"!=n&&(o=null,e.state=e.state(a||n,t,e),o&&(n="error"==o?n+" error":o)),n},indent:function(t,e,n){var i=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+l;if(i&&i.noIndent)return S.Pass;if(t.tokenize!=c&&t.tokenize!=u)return n?n.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==s.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+l*(s.multilineTagIndentFactor||1);if(s.alignCDATA&&/<!\[CDATA\[/.test(e))return 0;var r=e&&/^<(\/)?([\w_:\.-]*)/.exec(e);if(r&&r[1])for(;i;){if(i.tagName==r[2]){i=i.prev;break}if(!s.implicitlyClosed.hasOwnProperty(i.tagName))break;i=i.prev}else if(r)for(;i;){var o=s.contextGrabbers[i.tagName];if(!o||!o.hasOwnProperty(r[2]))break;i=i.prev}for(;i&&i.prev&&!i.startOfLine;)i=i.prev;return i?i.indent+l:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:s.htmlMode?"html":"xml",helperType:s.htmlMode?"html":"xml",skipAttribute:function(t){t.state==w&&(t.state=b)},xmlCurrentTag:function(t){return t.tagName?{name:t.tagName,close:"closeTag"==t.type}:null},xmlCurrentContext:function(t){for(var e=[],n=t.context;n;n=n.prev)n.tagName&&e.push(n.tagName);return e.reverse()}}}),S.defineMIME("text/xml","xml"),S.defineMIME("application/xml","xml"),S.mimeModes.hasOwnProperty("text/html")||S.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Sortable=e()}(this,function(){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function X(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},e=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),e.forEach(function(t){var e,n,i;e=r,i=o[n=t],n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i})}return r}function l(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],0<=e.indexOf(n)||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function e(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function t(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var x=t(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),w=t(/Edge/i),u=t(/firefox/i),s=t(/safari/i)&&!t(/chrome/i)&&!t(/android/i),n=t(/iP(ad|od|hone)/i),r=t(/chrome/i)&&t(/android/i),o={capture:!1,passive:!1};function c(t,e,n){t.addEventListener(e,n,!x&&o)}function h(t,e,n){t.removeEventListener(e,n,!x&&o)}function d(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function Y(t,e,n,i){if(t){n=n||document;do{if(null!=e&&(">"===e[0]?t.parentNode===n&&d(t,e):d(t,e))||i&&t===n)return t;if(t===n)break}while(t=(r=t).host&&r!==document&&r.host.nodeType?r.host:r.parentNode)}var r;return null}var f,p=/\s+/g;function V(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(p," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(p," ")}}function q(t,e,n){var i=t&&t.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in i||-1!==e.indexOf("webkit")||(e="-webkit-"+e),i[e]=n+("string"==typeof n?"":"px")}}function m(t,e){var n="";if("string"==typeof t)n=t;else do{var i=q(t,"transform");i&&"none"!==i&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function g(t,e,n){if(t){var i=t.getElementsByTagName(e),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function N(){var t=document.scrollingElement;return t||document.documentElement}function K(t,e,n,i,r){if(t.getBoundingClientRect||t===window){var o,a,l,s,u,c,h;if(h=t!==window&&t!==N()?(a=(o=t.getBoundingClientRect()).top,l=o.left,s=o.bottom,u=o.right,c=o.height,o.width):(l=a=0,s=window.innerHeight,u=window.innerWidth,c=window.innerHeight,window.innerWidth),(e||n)&&t!==window&&(r=r||t.parentNode,!x))do{if(r&&r.getBoundingClientRect&&("none"!==q(r,"transform")||n&&"static"!==q(r,"position"))){var d=r.getBoundingClientRect();a-=d.top+parseInt(q(r,"border-top-width")),l-=d.left+parseInt(q(r,"border-left-width")),s=a+o.height,u=l+o.width;break}}while(r=r.parentNode);if(i&&t!==window){var f=m(r||t),p=f&&f.a,g=f&&f.d;f&&(s=(a/=g)+(c/=g),u=(l/=p)+(h/=p))}return{top:a,left:l,bottom:s,right:u,width:h,height:c}}}function $(t,e,n){for(var i=O(t,!0),r=K(t)[e];i;){var o=K(i)[n];if(!("top"===n||"left"===n?o<=r:r<=o))return i;if(i===N())break;i=O(i,!1)}return!1}function v(t,e,n){for(var i=0,r=0,o=t.children;r<o.length;){if("none"!==o[r].style.display&&o[r]!==Pt.ghost&&o[r]!==Pt.dragged&&Y(o[r],n.draggable,t,!1)){if(i===e)return o[r];i++}r++}return null}function Z(t,e){for(var n=t.lastElementChild;n&&(n===Pt.ghost||"none"===q(n,"display")||e&&!d(n,e));)n=n.previousElementSibling;return n||null}function Q(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===Pt.clone||e&&!d(t,e)||n++;return n}function y(t){var e=0,n=0,i=N();if(t)do{var r=m(t),o=r.a,a=r.d;e+=t.scrollLeft*o,n+=t.scrollTop*a}while(t!==i&&(t=t.parentNode));return[e,n]}function O(t,e){if(!t||!t.getBoundingClientRect)return N();var n=t,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=q(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n.getBoundingClientRect||n===document.body)return N();if(i||e)return n;i=!0}}}while(n=n.parentNode);return N()}function b(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function C(e,n){return function(){if(!f){var t=arguments;1===t.length?e.call(this,t[0]):e.apply(this,t),f=setTimeout(function(){f=void 0},n)}}}function J(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function S(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function k(t,e){q(t,"position","absolute"),q(t,"top",e.top),q(t,"left",e.left),q(t,"width",e.width),q(t,"height",e.height)}function D(t){q(t,"position",""),q(t,"top",""),q(t,"left",""),q(t,"width",""),q(t,"height","")}var tt="Sortable"+(new Date).getTime();function M(){var e,i=[];return{captureAnimationState:function(){i=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(t){if("none"!==q(t,"display")&&t!==Pt.ghost){i.push({target:t,rect:K(t)});var e=X({},i[i.length-1].rect);if(t.thisAnimationDuration){var n=m(t,!0);n&&(e.top-=n.f,e.left-=n.e)}t.fromRect=e}})},addAnimationState:function(t){i.push(t)},removeAnimationState:function(t){i.splice(function(t,e){for(var n in t)if(t.hasOwnProperty(n))for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n);return-1}(i,{target:t}),1)},animateAll:function(t){var f=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof t&&t());var p=!1,g=0;i.forEach(function(t){var e,n,i,r,o=0,a=t.target,l=a.fromRect,s=K(a),u=a.prevFromRect,c=a.prevToRect,h=t.rect,d=m(a,!0);d&&(s.top-=d.f,s.left-=d.e),a.toRect=s,a.thisAnimationDuration&&b(u,s)&&!b(l,s)&&(h.top-s.top)/(h.left-s.left)==(l.top-s.top)/(l.left-s.left)&&(e=h,n=u,i=c,r=f.options,o=Math.sqrt(Math.pow(n.top-e.top,2)+Math.pow(n.left-e.left,2))/Math.sqrt(Math.pow(n.top-i.top,2)+Math.pow(n.left-i.left,2))*r.animation),b(s,l)||(a.prevFromRect=l,a.prevToRect=s,o=o||f.options.animation,f.animate(a,h,s,o)),o&&(p=!0,g=Math.max(g,o),clearTimeout(a.animationResetTimer),a.animationResetTimer=setTimeout(function(){a.animationTime=0,a.prevFromRect=null,a.fromRect=null,a.prevToRect=null,a.thisAnimationDuration=null},o),a.thisAnimationDuration=o)}),clearTimeout(e),p?e=setTimeout(function(){"function"==typeof t&&t()},g):"function"==typeof t&&t(),i=[]},animate:function(t,e,n,i){if(i){q(t,"transition",""),q(t,"transform","");var r=m(this.el),o=r&&r.a,a=r&&r.d,l=(e.left-n.left)/(o||1),s=(e.top-n.top)/(a||1);t.animatingX=!!l,t.animatingY=!!s,q(t,"transform","translate3d("+l+"px,"+s+"px,0)"),t.offsetWidth,q(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),q(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout(function(){q(t,"transition",""),q(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},i)}}}}var L=[],E={initializeByDefault:!0},T={mount:function(t){for(var e in E)!E.hasOwnProperty(e)||e in t||(t[e]=E[e]);L.push(t)},pluginEvent:function(e,n,i){var t=this;this.eventCanceled=!1,i.cancel=function(){t.eventCanceled=!0};var r=e+"Global";L.forEach(function(t){n[t.pluginName]&&(n[t.pluginName][r]&&n[t.pluginName][r](X({sortable:n},i)),n.options[t.pluginName]&&n[t.pluginName][e]&&n[t.pluginName][e](X({sortable:n},i)))})},initializePlugins:function(i,r,o){for(var t in L.forEach(function(t){var e=t.pluginName;if(i.options[e]||t.initializeByDefault){var n=new t(i,r,i.options);n.sortable=i,n.options=i.options,i[e]=n,a(o,n.defaults)}}),i.options)if(i.options.hasOwnProperty(t)){var e=this.modifyOption(i,t,i.options[t]);void 0!==e&&(i.options[t]=e)}},getEventProperties:function(e,n){var i={};return L.forEach(function(t){"function"==typeof t.eventProperties&&a(i,t.eventProperties.call(n[t.pluginName],e))}),i},modifyOption:function(e,n,i){var r;return L.forEach(function(t){e[t.pluginName]&&t.optionListeners&&"function"==typeof t.optionListeners[n]&&(r=t.optionListeners[n].call(e[t.pluginName],i))}),r}};function A(t){var e=t.sortable,n=t.rootEl,i=t.name,r=t.targetEl,o=t.cloneEl,a=t.toEl,l=t.fromEl,s=t.oldIndex,u=t.newIndex,c=t.oldDraggableIndex,h=t.newDraggableIndex,d=t.originalEvent,f=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[tt]){var g,m=e.options,v="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||x||w?(g=document.createEvent("Event")).initEvent(i,!0,!0):g=new CustomEvent(i,{bubbles:!0,cancelable:!0}),g.to=a||n,g.from=l||n,g.item=r||n,g.clone=o,g.oldIndex=s,g.newIndex=u,g.oldDraggableIndex=c,g.newDraggableIndex=h,g.originalEvent=d,g.pullMode=f?f.lastPutMode:void 0;var y=X({},p,T.getEventProperties(i,e));for(var b in y)g[b]=y[b];n&&n.dispatchEvent(g),m[v]&&m[v].call(e,g)}}function et(t,e,n){var i=2<arguments.length&&void 0!==n?n:{},r=i.evt,o=l(i,["evt"]);T.pluginEvent.bind(Pt)(t,e,X({dragEl:it,parentEl:rt,ghostEl:ot,rootEl:at,nextEl:lt,lastDownEl:F,cloneEl:I,cloneHidden:P,dragStarted:U,putSortable:ht,activeSortable:Pt.active,originalEvent:r,oldIndex:z,oldDraggableIndex:_,newIndex:st,newDraggableIndex:ut,hideGhostForTarget:Nt,unhideGhostForTarget:Ot,cloneNowHidden:function(){P=!0},cloneNowShown:function(){P=!1},dispatchSortableEvent:function(t){nt({sortable:e,name:t,originalEvent:r})}},o))}function nt(t){A(X({putSortable:ht,cloneEl:I,targetEl:it,rootEl:at,oldIndex:z,oldDraggableIndex:_,newIndex:st,newDraggableIndex:ut},t))}var it,rt,ot,at,lt,F,I,P,z,st,_,ut,ct,ht,B,H,W,R,j,G,U,dt,ft,pt,gt,mt=!1,vt=!1,yt=[],bt=!1,xt=!1,wt=[],Ct=!1,St=[],kt="undefined"!=typeof document,Dt=n,Mt=w||x?"cssFloat":"float",Lt=kt&&!r&&!n&&"draggable"in document.createElement("div"),Et=function(){if(kt){if(x)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Tt=function(t,e){var n=q(t),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=v(t,0,e),o=v(t,1,e),a=r&&q(r),l=o&&q(o),s=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+K(r).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+K(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&a.float&&"none"!==a.float){var c="left"===a.float?"left":"right";return!o||"both"!==l.clear&&l.clear!==c?"horizontal":"vertical"}return r&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||i<=s&&"none"===n[Mt]||o&&"none"===n[Mt]&&i<s+u)?"vertical":"horizontal"},At=function(t){function s(a,l){return function(t,e,n,i){var r=t.options.group.name&&e.options.group.name&&t.options.group.name===e.options.group.name;if(null==a&&(l||r))return!0;if(null==a||!1===a)return!1;if(l&&"clone"===a)return a;if("function"==typeof a)return s(a(t,e,n,i),l)(t,e,n,i);var o=(l?t:e).options.group.name;return!0===a||"string"==typeof a&&a===o||a.join&&-1<a.indexOf(o)}}var e={},n=t.group;n&&"object"==i(n)||(n={name:n}),e.name=n.name,e.checkPull=s(n.pull,!0),e.checkPut=s(n.put),e.revertClone=n.revertClone,t.group=e},Nt=function(){!Et&&ot&&q(ot,"display","none")},Ot=function(){!Et&&ot&&q(ot,"display","")};kt&&document.addEventListener("click",function(t){if(vt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),vt=!1},!0);function Ft(t){if(it){t=t.touches?t.touches[0]:t;var e=(o=t.clientX,a=t.clientY,yt.some(function(t){if(!Z(t)){var e=K(t),n=t[tt].options.emptyInsertThreshold,i=o>=e.left-n&&o<=e.right+n,r=a>=e.top-n&&a<=e.bottom+n;return n&&i&&r?l=t:void 0}}),l);if(e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[tt]._onDragOver(n)}}var o,a,l}function It(t){it&&it.parentNode[tt]._isOutsideThisEl(t.target)}function Pt(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=a({},e),t[tt]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Tt(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Pt.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var i in T.initializePlugins(this,t,n),n)i in e||(e[i]=n[i]);for(var r in At(e),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!e.forceFallback&&Lt,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?c(t,"pointerdown",this._onTapStart):(c(t,"mousedown",this._onTapStart),c(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(c(t,"dragover",this),c(t,"dragenter",this)),yt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),a(this,M())}function zt(t,e,n,i,r,o,a,l){var s,u,c=t[tt],h=c.options.onMove;return!window.CustomEvent||x||w?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=e,s.from=t,s.dragged=n,s.draggedRect=i,s.related=r||e,s.relatedRect=o||K(e),s.willInsertAfter=l,s.originalEvent=a,t.dispatchEvent(s),h&&(u=h.call(c,s,a)),u}function _t(t){t.draggable=!1}function Bt(){Ct=!1}function Ht(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function Wt(t){return setTimeout(t,0)}function Rt(t){return clearTimeout(t)}Pt.prototype={constructor:Pt,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(dt=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,it):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,i=this.el,t=this.options,r=t.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(a||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=t.filter;if(!function(t){St.length=0;var e=t.getElementsByTagName("input"),n=e.length;for(;n--;){var i=e[n];i.checked&&St.push(i)}}(i),!it&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||t.disabled||s.isContentEditable||(l=Y(l,t.draggable,i,!1))&&l.animated||F===l)){if(z=Q(l),_=Q(l,t.draggable),"function"==typeof u){if(u.call(this,e,l,this))return nt({sortable:n,rootEl:s,name:"filter",targetEl:l,toEl:i,fromEl:i}),et("filter",n,{evt:e}),void(r&&e.cancelable&&e.preventDefault())}else if(u=u&&u.split(",").some(function(t){if(t=Y(s,t.trim(),i,!1))return nt({sortable:n,rootEl:t,name:"filter",targetEl:l,fromEl:i,toEl:i}),et("filter",n,{evt:e}),!0}))return void(r&&e.cancelable&&e.preventDefault());t.handle&&!Y(s,t.handle,i,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(t,e,n){var i,r=this,o=r.el,a=r.options,l=o.ownerDocument;if(n&&!it&&n.parentNode===o){var s=K(n);if(at=o,rt=(it=n).parentNode,lt=it.nextSibling,F=n,ct=a.group,B={target:Pt.dragged=it,clientX:(e||t).clientX,clientY:(e||t).clientY},j=B.clientX-s.left,G=B.clientY-s.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,it.style["will-change"]="all",i=function(){et("delayEnded",r,{evt:t}),Pt.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!u&&r.nativeDraggable&&(it.draggable=!0),r._triggerDragStart(t,e),nt({sortable:r,name:"choose",originalEvent:t}),V(it,a.chosenClass,!0))},a.ignore.split(",").forEach(function(t){g(it,t.trim(),_t)}),c(l,"dragover",Ft),c(l,"mousemove",Ft),c(l,"touchmove",Ft),c(l,"mouseup",r._onDrop),c(l,"touchend",r._onDrop),c(l,"touchcancel",r._onDrop),u&&this.nativeDraggable&&(this.options.touchStartThreshold=4,it.draggable=!0),et("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(w||x))i();else{if(Pt.eventCanceled)return void this._onDrop();c(l,"mouseup",r._disableDelayedDrag),c(l,"touchend",r._disableDelayedDrag),c(l,"touchcancel",r._disableDelayedDrag),c(l,"mousemove",r._delayedDragTouchMoveHandler),c(l,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&c(l,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(i,a.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){it&&_t(it),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;h(t,"mouseup",this._disableDelayedDrag),h(t,"touchend",this._disableDelayedDrag),h(t,"touchcancel",this._disableDelayedDrag),h(t,"mousemove",this._delayedDragTouchMoveHandler),h(t,"touchmove",this._delayedDragTouchMoveHandler),h(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?c(document,"pointermove",this._onTouchMove):c(document,e?"touchmove":"mousemove",this._onTouchMove):(c(it,"dragend",this),c(at,"dragstart",this._onDragStart));try{document.selection?Wt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(mt=!1,at&&it){et("dragStarted",this,{evt:e}),this.nativeDraggable&&c(document,"dragover",It);var n=this.options;t||V(it,n.dragClass,!1),V(it,n.ghostClass,!0),Pt.active=this,t&&this._appendGhost(),nt({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(H){this._lastX=H.clientX,this._lastY=H.clientY,Nt();for(var t=document.elementFromPoint(H.clientX,H.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(H.clientX,H.clientY))!==e;)e=t;if(it.parentNode[tt]._isOutsideThisEl(t),e)do{if(e[tt]){if(e[tt]._onDragOver({clientX:H.clientX,clientY:H.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);Ot()}},_onTouchMove:function(t){if(B){var e=this.options,n=e.fallbackTolerance,i=e.fallbackOffset,r=t.touches?t.touches[0]:t,o=ot&&m(ot,!0),a=ot&&o&&o.a,l=ot&&o&&o.d,s=Dt&&gt&&y(gt),u=(r.clientX-B.clientX+i.x)/(a||1)+(s?s[0]-wt[0]:0)/(a||1),c=(r.clientY-B.clientY+i.y)/(l||1)+(s?s[1]-wt[1]:0)/(l||1);if(!Pt.active&&!mt){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(ot){o?(o.e+=u-(W||0),o.f+=c-(R||0)):o={a:1,b:0,c:0,d:1,e:u,f:c};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");q(ot,"webkitTransform",h),q(ot,"mozTransform",h),q(ot,"msTransform",h),q(ot,"transform",h),W=u,R=c,H=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!ot){var t=this.options.fallbackOnBody?document.body:at,e=K(it,!0,Dt,!0,t),n=this.options;if(Dt){for(gt=t;"static"===q(gt,"position")&&"none"===q(gt,"transform")&&gt!==document;)gt=gt.parentNode;gt!==document.body&&gt!==document.documentElement?(gt===document&&(gt=N()),e.top+=gt.scrollTop,e.left+=gt.scrollLeft):gt=N(),wt=y(gt)}V(ot=it.cloneNode(!0),n.ghostClass,!1),V(ot,n.fallbackClass,!0),V(ot,n.dragClass,!0),q(ot,"transition",""),q(ot,"transform",""),q(ot,"box-sizing","border-box"),q(ot,"margin",0),q(ot,"top",e.top),q(ot,"left",e.left),q(ot,"width",e.width),q(ot,"height",e.height),q(ot,"opacity","0.8"),q(ot,"position",Dt?"absolute":"fixed"),q(ot,"zIndex","100000"),q(ot,"pointerEvents","none"),Pt.ghost=ot,t.appendChild(ot),q(ot,"transform-origin",j/parseInt(ot.style.width)*100+"% "+G/parseInt(ot.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,i=t.dataTransfer,r=n.options;et("dragStart",this,{evt:t}),Pt.eventCanceled?this._onDrop():(et("setupClone",this),Pt.eventCanceled||((I=S(it)).draggable=!1,I.style["will-change"]="",this._hideClone(),V(I,this.options.chosenClass,!1),Pt.clone=I),n.cloneId=Wt(function(){et("clone",n),Pt.eventCanceled||(n.options.removeCloneOnHide||at.insertBefore(I,it),n._hideClone(),nt({sortable:n,name:"clone"}))}),e||V(it,r.dragClass,!0),e?(vt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(h(document,"mouseup",n._onDrop),h(document,"touchend",n._onDrop),h(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(n,i,it)),c(document,"drop",n),q(it,"transform","translateZ(0)")),mt=!0,n._dragStartId=Wt(n._dragStarted.bind(n,e,t)),c(document,"selectstart",n),U=!0,s&&q(document.body,"user-select","none"))},_onDragOver:function(n){var i,r,o,a,l=this.el,s=n.target,e=this.options,t=e.group,u=Pt.active,c=ct===t,h=e.sort,d=ht||u,f=this,p=!1;if(!Ct){if(void 0!==n.preventDefault&&n.cancelable&&n.preventDefault(),s=Y(s,e.draggable,l,!0),R("dragOver"),Pt.eventCanceled)return p;if(it.contains(n.target)||s.animated&&s.animatingX&&s.animatingY||f._ignoreWhileAnimating===s)return G(!1);if(vt=!1,u&&!e.disabled&&(c?h||(o=!at.contains(it)):ht===this||(this.lastPutMode=ct.checkPull(this,u,it,n))&&t.checkPut(this,u,it,n))){if(a="vertical"===this._getDirection(n,s),i=K(it),R("dragOverValid"),Pt.eventCanceled)return p;if(o)return rt=at,j(),this._hideClone(),R("revert"),Pt.eventCanceled||(lt?at.insertBefore(it,lt):at.appendChild(it)),G(!0);var g=Z(l,e.draggable);if(g&&(_=n,B=a,W=K(Z((H=this).el,H.options.draggable)),!(B?_.clientX>W.right+10||_.clientX<=W.right&&_.clientY>W.bottom&&_.clientX>=W.left:_.clientX>W.right&&_.clientY>W.top||_.clientX<=W.right&&_.clientY>W.bottom+10)||g.animated)){if(s.parentNode===l){r=K(s);var m,v,y,b=it.parentNode!==l,x=(E=it.animated&&it.toRect||i,T=s.animated&&s.toRect||r,N=(A=a)?E.left:E.top,O=A?E.right:E.bottom,F=A?E.width:E.height,I=A?T.left:T.top,P=A?T.right:T.bottom,z=A?T.width:T.height,!(N===I||O===P||N+F/2===I+z/2)),w=a?"top":"left",C=$(s,"top","top")||$(it,"top","top"),S=C?C.scrollTop:void 0;if(dt!==s&&(v=r[w],bt=!1,xt=!x&&e.invertSwap||b),0!==(m=function(t,e,n,i,r,o,a,l){var s=i?t.clientY:t.clientX,u=i?n.height:n.width,c=i?n.top:n.left,h=i?n.bottom:n.right,d=!1;if(!a)if(l&&pt<u*r){if(!bt&&(1===ft?c+u*o/2<s:s<h-u*o/2)&&(bt=!0),bt)d=!0;else if(1===ft?s<c+pt:h-pt<s)return-ft}else if(c+u*(1-r)/2<s&&s<h-u*(1-r)/2)return function(t){return Q(it)<Q(t)?1:-1}(e);if((d=d||a)&&(s<c+u*o/2||h-u*o/2<s))return c+u/2<s?1:-1;return 0}(n,s,r,a,x?1:e.swapThreshold,null==e.invertedSwapThreshold?e.swapThreshold:e.invertedSwapThreshold,xt,dt===s)))for(var k=Q(it);k-=m,(y=rt.children[k])&&("none"===q(y,"display")||y===ot););if(0===m||y===s)return G(!1);ft=m;var D=(dt=s).nextElementSibling,M=!1,L=zt(at,l,it,i,s,r,n,M=1===m);if(!1!==L)return 1!==L&&-1!==L||(M=1===L),Ct=!0,setTimeout(Bt,30),j(),M&&!D?l.appendChild(it):s.parentNode.insertBefore(it,M?D:s),C&&J(C,0,S-C.scrollTop),rt=it.parentNode,void 0===v||xt||(pt=Math.abs(v-K(s)[w])),U(),G(!0)}}else{if(g===it)return G(!1);if(g&&l===n.target&&(s=g),s&&(r=K(s)),!1!==zt(at,l,it,i,s,r,n,!!s))return j(),l.appendChild(it),rt=l,U(),G(!0)}if(l.contains(it))return G(!1)}var E,T,A,N,O,F,I,P,z,_,B,H,W;return!1}function R(t,e){et(t,f,X({evt:n,isOwner:c,axis:a?"vertical":"horizontal",revert:o,dragRect:i,targetRect:r,canSort:h,fromSortable:d,target:s,completed:G,onMove:function(t,e){return zt(at,l,it,i,t,K(t),n,e)},changed:U},e))}function j(){R("dragOverAnimationCapture"),f.captureAnimationState(),f!==d&&d.captureAnimationState()}function G(t){return R("dragOverCompleted",{insertion:t}),t&&(c?u._hideClone():u._showClone(f),f!==d&&(V(it,ht?ht.options.ghostClass:u.options.ghostClass,!1),V(it,e.ghostClass,!0)),ht!==f&&f!==Pt.active?ht=f:f===Pt.active&&ht&&(ht=null),d===f&&(f._ignoreWhileAnimating=s),f.animateAll(function(){R("dragOverAnimationComplete"),f._ignoreWhileAnimating=null}),f!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(s===it&&!it.animated||s===l&&!s.animated)&&(dt=null),e.dragoverBubble||n.rootEl||s===document||(it.parentNode[tt]._isOutsideThisEl(n.target),t||Ft(n)),!e.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),p=!0}function U(){st=Q(it),ut=Q(it,e.draggable),nt({sortable:f,name:"change",toEl:l,newIndex:st,newDraggableIndex:ut,originalEvent:n})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){h(document,"mousemove",this._onTouchMove),h(document,"touchmove",this._onTouchMove),h(document,"pointermove",this._onTouchMove),h(document,"dragover",Ft),h(document,"mousemove",Ft),h(document,"touchmove",Ft)},_offUpEvents:function(){var t=this.el.ownerDocument;h(t,"mouseup",this._onDrop),h(t,"touchend",this._onDrop),h(t,"pointerup",this._onDrop),h(t,"touchcancel",this._onDrop),h(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;st=Q(it),ut=Q(it,n.draggable),et("drop",this,{evt:t}),rt=it&&it.parentNode,st=Q(it),ut=Q(it,n.draggable),Pt.eventCanceled||(bt=xt=mt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Rt(this.cloneId),Rt(this._dragStartId),this.nativeDraggable&&(h(document,"drop",this),h(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),s&&q(document.body,"user-select",""),q(it,"transform",""),t&&(U&&(t.cancelable&&t.preventDefault(),n.dropBubble||t.stopPropagation()),ot&&ot.parentNode&&ot.parentNode.removeChild(ot),(at===rt||ht&&"clone"!==ht.lastPutMode)&&I&&I.parentNode&&I.parentNode.removeChild(I),it&&(this.nativeDraggable&&h(it,"dragend",this),_t(it),it.style["will-change"]="",U&&!mt&&V(it,ht?ht.options.ghostClass:this.options.ghostClass,!1),V(it,this.options.chosenClass,!1),nt({sortable:this,name:"unchoose",toEl:rt,newIndex:null,newDraggableIndex:null,originalEvent:t}),at!==rt?(0<=st&&(nt({rootEl:rt,name:"add",toEl:rt,fromEl:at,originalEvent:t}),nt({sortable:this,name:"remove",toEl:rt,originalEvent:t}),nt({rootEl:rt,name:"sort",toEl:rt,fromEl:at,originalEvent:t}),nt({sortable:this,name:"sort",toEl:rt,originalEvent:t})),ht&&ht.save()):st!==z&&0<=st&&(nt({sortable:this,name:"update",toEl:rt,originalEvent:t}),nt({sortable:this,name:"sort",toEl:rt,originalEvent:t})),Pt.active&&(null!=st&&-1!==st||(st=z,ut=_),nt({sortable:this,name:"end",toEl:rt,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){et("nulling",this),at=it=rt=ot=lt=I=F=P=B=H=U=st=ut=z=_=dt=ft=ht=ct=Pt.dragged=Pt.ghost=Pt.clone=Pt.active=null,St.forEach(function(t){t.checked=!0}),St.length=W=R=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":it&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,i=0,r=n.length,o=this.options;i<r;i++)Y(t=n[i],o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||Ht(t));return e},sort:function(t){var i={},r=this.el;this.toArray().forEach(function(t,e){var n=r.children[e];Y(n,this.options.draggable,r,!1)&&(i[t]=n)},this),t.forEach(function(t){i[t]&&(r.removeChild(i[t]),r.appendChild(i[t]))})},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return Y(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var i=T.modifyOption(this,t,e);n[t]=void 0!==i?i:e,"group"===t&&At(n)},destroy:function(){et("destroy",this);var t=this.el;t[tt]=null,h(t,"mousedown",this._onTapStart),h(t,"touchstart",this._onTapStart),h(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(h(t,"dragover",this),h(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),yt.splice(yt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!P){if(et("hideClone",this),Pt.eventCanceled)return;q(I,"display","none"),this.options.removeCloneOnHide&&I.parentNode&&I.parentNode.removeChild(I),P=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(P){if(et("showClone",this),Pt.eventCanceled)return;at.contains(it)&&!this.options.group.revertClone?at.insertBefore(I,it):lt?at.insertBefore(I,lt):at.appendChild(I),this.options.group.revertClone&&this.animate(it,I),q(I,"display",""),P=!1}}else this._hideClone()}},kt&&c(document,"touchmove",function(t){(Pt.active||mt)&&t.cancelable&&t.preventDefault()}),Pt.utils={on:c,off:h,css:q,find:g,is:function(t,e){return!!Y(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:C,closest:Y,toggleClass:V,clone:S,index:Q,nextTick:Wt,cancelNextTick:Rt,detectDirection:Tt,getChild:v},Pt.get=function(t){return t[tt]},Pt.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Pt.utils=X({},Pt.utils,t.utils)),T.mount(t)})},Pt.create=function(t,e){return new Pt(t,e)};var jt,Gt,Ut,Xt,Yt,Vt,qt=[],Kt=!(Pt.version="1.10.2");function $t(){qt.forEach(function(t){clearInterval(t.pid)}),qt=[]}function Zt(){clearInterval(Vt)}function Qt(t){var e=t.originalEvent,n=t.putSortable,i=t.dragEl,r=t.activeSortable,o=t.dispatchSortableEvent,a=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var s=n||r;a();var u=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,c=document.elementFromPoint(u.clientX,u.clientY);l(),s&&!s.el.contains(c)&&(o("spill"),this.onSpill({dragEl:i,putSortable:n}))}}var Jt,te=C(function(n,t,e,i){if(t.scroll){var r,o=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,u=N(),c=!1;Gt!==e&&(Gt=e,$t(),jt=t.scroll,r=t.scrollFn,!0===jt&&(jt=O(e,!0)));var h=0,d=jt;do{var f=d,p=K(f),g=p.top,m=p.bottom,v=p.left,y=p.right,b=p.width,x=p.height,w=void 0,C=void 0,S=f.scrollWidth,k=f.scrollHeight,D=q(f),M=f.scrollLeft,L=f.scrollTop;C=f===u?(w=b<S&&("auto"===D.overflowX||"scroll"===D.overflowX||"visible"===D.overflowX),x<k&&("auto"===D.overflowY||"scroll"===D.overflowY||"visible"===D.overflowY)):(w=b<S&&("auto"===D.overflowX||"scroll"===D.overflowX),x<k&&("auto"===D.overflowY||"scroll"===D.overflowY));var E=w&&(Math.abs(y-o)<=l&&M+b<S)-(Math.abs(v-o)<=l&&!!M),T=C&&(Math.abs(m-a)<=l&&L+x<k)-(Math.abs(g-a)<=l&&!!L);if(!qt[h])for(var A=0;A<=h;A++)qt[A]||(qt[A]={});qt[h].vx==E&&qt[h].vy==T&&qt[h].el===f||(qt[h].el=f,qt[h].vx=E,qt[h].vy=T,clearInterval(qt[h].pid),0==E&&0==T||(c=!0,qt[h].pid=setInterval(function(){i&&0===this.layer&&Pt.active._onTouchMove(Yt);var t=qt[this.layer].vy?qt[this.layer].vy*s:0,e=qt[this.layer].vx?qt[this.layer].vx*s:0;"function"==typeof r&&"continue"!==r.call(Pt.dragged.parentNode[tt],e,t,n,Yt,qt[this.layer].el)||J(qt[this.layer].el,e,t)}.bind({layer:h}),24))),h++}while(t.bubbleScroll&&d!==u&&(d=O(d,!1)));Kt=c}},30);function ee(){}function ne(){}ee.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=v(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(e,i):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:Qt},a(ee,{pluginName:"revertOnSpill"}),ne.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:Qt},a(ne,{pluginName:"removeOnSpill"});var ie,re,oe,ae,le,se=[],ue=[],ce=!1,he=!1,de=!1;function fe(i,r){ue.forEach(function(t,e){var n=r.children[t.sortableIndex+(i?Number(e):0)];n?r.insertBefore(t,n):r.appendChild(t)})}function pe(){se.forEach(function(t){t!==oe&&t.parentNode&&t.parentNode.removeChild(t)})}return Pt.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?c(document,"dragover",this._handleAutoScroll):this.options.supportPointer?c(document,"pointermove",this._handleFallbackAutoScroll):e.touches?c(document,"touchmove",this._handleFallbackAutoScroll):c(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?h(document,"dragover",this._handleAutoScroll):(h(document,"pointermove",this._handleFallbackAutoScroll),h(document,"touchmove",this._handleFallbackAutoScroll),h(document,"mousemove",this._handleFallbackAutoScroll)),Zt(),$t(),clearTimeout(f),f=void 0},nulling:function(){Yt=Gt=jt=Kt=Vt=Ut=Xt=null,qt.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(e,n){var i=this,r=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,t=document.elementFromPoint(r,o);if(Yt=e,n||w||x||s){te(e,this.options,t,n);var a=O(t,!0);!Kt||Vt&&r===Ut&&o===Xt||(Vt&&Zt(),Vt=setInterval(function(){var t=O(document.elementFromPoint(r,o),!0);t!==a&&(a=t,$t()),te(e,i.options,t,n)},10),Ut=r,Xt=o)}else{if(!this.options.bubbleScroll||O(t,!0)===N())return void $t();te(e,this.options,O(t,!1),!1)}}},a(t,{pluginName:"scroll",initializeByDefault:!0})}),Pt.mount(ne,ee),Pt.mount(new function(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(t){var e=t.dragEl;Jt=e},dragOverValid:function(t){var e=t.completed,n=t.target,i=t.onMove,r=t.activeSortable,o=t.changed,a=t.cancel;if(r.options.swap){var l=this.sortable.el,s=this.options;if(n&&n!==l){var u=Jt;Jt=!1!==i(n)?(V(n,s.swapClass,!0),n):null,u&&u!==Jt&&V(u,s.swapClass,!1)}o(),e(!0),a()}},drop:function(t){var e=t.activeSortable,n=t.putSortable,i=t.dragEl,r=n||this.sortable,o=this.options;Jt&&V(Jt,o.swapClass,!1),Jt&&(o.swap||n&&n.options.swap)&&i!==Jt&&(r.captureAnimationState(),r!==e&&e.captureAnimationState(),function(t,e){var n,i,r=t.parentNode,o=e.parentNode;if(!r||!o||r.isEqualNode(e)||o.isEqualNode(t))return;n=Q(t),i=Q(e),r.isEqualNode(o)&&n<i&&i++;r.insertBefore(e,r.children[n]),o.insertBefore(t,o.children[i])}(i,Jt),r.animateAll(),r!==e&&e.animateAll())},nulling:function(){Jt=null}},a(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Jt}}})}),Pt.mount(new function(){function t(i){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));i.options.supportPointer?c(document,"pointerup",this._deselectMultiDrag):(c(document,"mouseup",this._deselectMultiDrag),c(document,"touchend",this._deselectMultiDrag)),c(document,"keydown",this._checkKeyDown),c(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(t,e){var n="";se.length&&re===i?se.forEach(function(t,e){n+=(e?", ":"")+t.textContent}):n=e.textContent,t.setData("Text",n)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var e=t.dragEl;oe=e},delayEnded:function(){this.isMultiDrag=~se.indexOf(oe)},setupClone:function(t){var e=t.sortable,n=t.cancel;if(this.isMultiDrag){for(var i=0;i<se.length;i++)ue.push(S(se[i])),ue[i].sortableIndex=se[i].sortableIndex,ue[i].draggable=!1,ue[i].style["will-change"]="",V(ue[i],this.options.selectedClass,!1),se[i]===oe&&V(ue[i],this.options.chosenClass,!1);e._hideClone(),n()}},clone:function(t){var e=t.sortable,n=t.rootEl,i=t.dispatchSortableEvent,r=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||se.length&&re===e&&(fe(!0,n),i("clone"),r()))},showClone:function(t){var e=t.cloneNowShown,n=t.rootEl,i=t.cancel;this.isMultiDrag&&(fe(!1,n),ue.forEach(function(t){q(t,"display","")}),e(),le=!1,i())},hideClone:function(t){var e=this,n=(t.sortable,t.cloneNowHidden),i=t.cancel;this.isMultiDrag&&(ue.forEach(function(t){q(t,"display","none"),e.options.removeCloneOnHide&&t.parentNode&&t.parentNode.removeChild(t)}),n(),le=!0,i())},dragStartGlobal:function(t){t.sortable;!this.isMultiDrag&&re&&re.multiDrag._deselectMultiDrag(),se.forEach(function(t){t.sortableIndex=Q(t)}),se=se.sort(function(t,e){return t.sortableIndex-e.sortableIndex}),de=!0},dragStarted:function(t){var e=this,n=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(n.captureAnimationState(),this.options.animation)){se.forEach(function(t){t!==oe&&q(t,"position","absolute")});var i=K(oe,!1,!0,!0);se.forEach(function(t){t!==oe&&k(t,i)}),ce=he=!0}n.animateAll(function(){ce=he=!1,e.options.animation&&se.forEach(function(t){D(t)}),e.options.sort&&pe()})}},dragOver:function(t){var e=t.target,n=t.completed,i=t.cancel;he&&~se.indexOf(e)&&(n(!1),i())},revert:function(t){var i,r,e=t.fromSortable,n=t.rootEl,o=t.sortable,a=t.dragRect;1<se.length&&(se.forEach(function(t){o.addAnimationState({target:t,rect:he?K(t):a}),D(t),t.fromRect=a,e.removeAnimationState(t)}),he=!1,i=!this.options.removeCloneOnHide,r=n,se.forEach(function(t,e){var n=r.children[t.sortableIndex+(i?Number(e):0)];n?r.insertBefore(t,n):r.appendChild(t)}))},dragOverCompleted:function(t){var e=t.sortable,n=t.isOwner,i=t.insertion,r=t.activeSortable,o=t.parentEl,a=t.putSortable,l=this.options;if(i){if(n&&r._hideClone(),ce=!1,l.animation&&1<se.length&&(he||!n&&!r.options.sort&&!a)){var s=K(oe,!1,!0,!0);se.forEach(function(t){t!==oe&&(k(t,s),o.appendChild(t))}),he=!0}if(!n)if(he||pe(),1<se.length){var u=le;r._showClone(e),r.options.animation&&!le&&u&&ue.forEach(function(t){r.addAnimationState({target:t,rect:ae}),t.fromRect=ae,t.thisAnimationDuration=null})}else r._showClone(e)}},dragOverAnimationCapture:function(t){var e=t.dragRect,n=t.isOwner,i=t.activeSortable;if(se.forEach(function(t){t.thisAnimationDuration=null}),i.options.animation&&!n&&i.multiDrag.isMultiDrag){ae=a({},e);var r=m(oe,!0);ae.top-=r.f,ae.left-=r.e}},dragOverAnimationComplete:function(){he&&(he=!1,pe())},drop:function(t){var e=t.originalEvent,n=t.rootEl,i=t.parentEl,r=t.sortable,o=t.dispatchSortableEvent,a=t.oldIndex,l=t.putSortable,s=l||this.sortable;if(e){var u=this.options,c=i.children;if(!de)if(u.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),V(oe,u.selectedClass,!~se.indexOf(oe)),~se.indexOf(oe))se.splice(se.indexOf(oe),1),ie=null,A({sortable:r,rootEl:n,name:"deselect",targetEl:oe,originalEvt:e});else{if(se.push(oe),A({sortable:r,rootEl:n,name:"select",targetEl:oe,originalEvt:e}),e.shiftKey&&ie&&r.el.contains(ie)){var h,d,f=Q(ie),p=Q(oe);if(~f&&~p&&f!==p)for(h=f<p?(d=f,p):(d=p,f+1);d<h;d++)~se.indexOf(c[d])||(V(c[d],u.selectedClass,!0),se.push(c[d]),A({sortable:r,rootEl:n,name:"select",targetEl:c[d],originalEvt:e}))}else ie=oe;re=s}if(de&&this.isMultiDrag){if((i[tt].options.sort||i!==n)&&1<se.length){var g=K(oe),m=Q(oe,":not(."+this.options.selectedClass+")");if(!ce&&u.animation&&(oe.thisAnimationDuration=null),s.captureAnimationState(),!ce&&(u.animation&&(oe.fromRect=g,se.forEach(function(t){if(t.thisAnimationDuration=null,t!==oe){var e=he?K(t):g;t.fromRect=e,s.addAnimationState({target:t,rect:e})}})),pe(),se.forEach(function(t){c[m]?i.insertBefore(t,c[m]):i.appendChild(t),m++}),a===Q(oe))){var v=!1;se.forEach(function(t){t.sortableIndex===Q(t)||(v=!0)}),v&&o("update")}se.forEach(function(t){D(t)}),s.animateAll()}re=s}(n===i||l&&"clone"!==l.lastPutMode)&&ue.forEach(function(t){t.parentNode&&t.parentNode.removeChild(t)})}},nullingGlobal:function(){this.isMultiDrag=de=!1,ue.length=0},destroyGlobal:function(){this._deselectMultiDrag(),h(document,"pointerup",this._deselectMultiDrag),h(document,"mouseup",this._deselectMultiDrag),h(document,"touchend",this._deselectMultiDrag),h(document,"keydown",this._checkKeyDown),h(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(void 0!==de&&de||re!==this.sortable||t&&Y(t.target,this.options.draggable,this.sortable.el,!1)||t&&0!==t.button))for(;se.length;){var e=se[0];V(e,this.options.selectedClass,!1),se.shift(),A({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:e,originalEvt:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},a(t,{pluginName:"multiDrag",utils:{select:function(t){var e=t.parentNode[tt];e&&e.options.multiDrag&&!~se.indexOf(t)&&(re&&re!==e&&(re.multiDrag._deselectMultiDrag(),re=e),V(t,e.options.selectedClass,!0),se.push(t))},deselect:function(t){var e=t.parentNode[tt],n=se.indexOf(t);e&&e.options.multiDrag&&~n&&(V(t,e.options.selectedClass,!1),se.splice(n,1))}},eventProperties:function(){var n=this,i=[],r=[];return se.forEach(function(t){var e;i.push({multiDragElement:t,index:t.sortableIndex}),e=he&&t!==oe?-1:he?Q(t,":not(."+n.options.selectedClass+")"):Q(t),r.push({multiDragElement:t,index:e})}),{items:e(se),clones:[].concat(ue),oldIndicies:i,newIndicies:r}},optionListeners:{multiDragKey:function(t){return"ctrl"===(t=t.toLowerCase())?t="Control":1<t.length&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}),Pt});