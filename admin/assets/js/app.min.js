$(function(){$("[data-modal]").click(function(){var t=$(this),e=t.data("modal"),a=t.data("modal-action");a?Modal.show(e,a):Modal.show(e)}),$(".input-reset").click(function(){var t=$("#"+$(this).data("reset"));t.val(""),t.change()}),$("[data-auto-upload]").change(function(){$(this).closest("form").submit()}),$(".file-input-label").on("drag dragstart dragend dragover dragenter dragleave drop",function(t){t.preventDefault()}).on("drop",function(t){var e=$("#"+$(this).attr("for"));e.prop("files",t.originalEvent.dataTransfer.files),e.change()}).on("dragover dragenter",function(){$(this).addClass("drag")}).on("dragleave drop",function(){$(this).removeClass("drag")}),$("input:file").change(function(){var t=$(this).prop("files");t.length&&$('label[for="'+$(this).attr("id")+'"] span').text(t[0].name)}),$(".page-children-toggle").click(function(t){t.stopPropagation(),$(this).closest("li").children(".pages-list").toggle(),$(this).toggleClass("toggle-expanded toggle-collapsed")}),$(".page-details a").click(function(t){t.stopPropagation()}),$("#expand-all-pages").click(function(){$(this).blur(),$(".pages-children").show(),$(".pages-list").find(".page-children-toggle").removeClass("toggle-collapsed").addClass("toggle-expanded")}),$("#collapse-all-pages").click(function(){$(this).blur(),$(".pages-children").hide(),$(".pages-list").find(".page-children-toggle").removeClass("toggle-expanded").addClass("toggle-collapsed")}),$(".page-search").focus(function(){$(".pages-children").each(function(){$(this).data("visible",$(this).is(":visible"))})}),$(".page-search").keyup(Utils.debounce(function(){var t=$(this).val();if(0==t.length)$(".pages-children").each(function(){$(this).toggle($(this).data("visible"))}),$(".page-details").css("padding-left",""),$(".pages-item, .page-children-toggle").show();else{$(".pages-children").show(),$(".page-children-toggle").hide(),$(".page-details").css("padding-left","0");var a=new RegExp(Utils.escapeRegExp(t),"i");$(".page-title a").each(function(){var t=$(this).closest(".pages-item"),e=!!$(this).text().match(a);e&&0,t.toggle(e)})}},100)),$(".page-details").click(function(){var t=$(this).find(".page-children-toggle").first();t.length&&t.click()}),$("#page-title","#newPageModal").keyup(function(){$("#page-slug","#newPageModal").val(Utils.slug($(this).val()))}),$("#page-slug","#newPageModal").keyup(function(){$(this).val($(this).val().replace(" ","-").replace(/[^A-Za-z0-9\-]/g,""))}).blur(function(){""==$(this).val()&&$("#page-title","#newPageModal").trigger("keyup")}),$("#page-parent","#newPageModal").change(function(){var t=$(this).find("option:selected"),e=$("#page-template","#newPageModal"),a=t.data("allowed-templates");a?(a=a.split(", "),e.data("previous-value",e.val()).val(a[0]).find("option").each(function(){-1==a.indexOf($(this).val())&&$(this).attr("disabled",!0)})):e.find("option[disabled]").length&&e.val(e.data("previous-value")).removeData("previous-value").find("option").removeAttr("disabled")}),$(document).keyup(function(t){27==t.which&&Modal.hide()}).keydown(function(t){if((t.ctrlKey||t.metaKey)&&70==t.which&&$(".page-search:not(:focus)").length)return $(".page-search").focus(),!1}),$(".tabs-tab[data-tab]").click(function(){$(this).addClass("active").siblings().removeClass("active")}),$(".tag-input").tagInput(),$("input[data-enable]").change(function(){var a=$(this).is(":checked");$.each($(this).data("enable").split(","),function(t,e){$('input[name="'+e+'"]').attr("disabled",!a)})}),$(".toggle-navigation").click(function(){$(".sidebar").toggleClass("show")}),$(".overflow-title").mouseover(function(){var t=$(this);t.prop("offsetWidth")<t.prop("scrollWidth")?t.attr("title",t.text().trim()):t.removeAttr("title")}),$(".pages-list").each(function(){var t=$(this);if(!1!==t.data("sortable")){var a=Sortable.create(this,{filter:".no-reorder",forceFallback:!0,onStart:function(t){$(".pages-children").each(function(){$(this).data("visible",$(this).is(":visible")).hide()}),$(".page-children-toggle").each(function(){$(this).data("expanded",$(this).hasClass("toggle-expanded")),$(this).removeClass("toggle-expanded").addClass("toggle-collapsed")}).css("opacity","0.5")},onMove:function(t){return!$(t.related).hasClass("no-reorder")},onEnd:function(e){if($(".pages-children").each(function(){$(this).toggle($(this).data("visible"))}),$(".page-children-toggle").each(function(){$(this).data("expanded")&&$(this).removeClass("toggle-collapsed").addClass("toggle-expanded")}).css("opacity",""),e.newIndex!=e.oldIndex){a.option("disabled",!0);var t={"csrf-token":$("body").data("csrf-token"),parent:$(this.el).data("parent"),from:e.oldIndex,to:e.newIndex};new Request({method:"POST",url:Utils.uriPrependBase(location.pathname,"/admin/pages/reorder/"),data:t},function(t){t.status&&Notification(t.message,t.status,5e3),t.status&&"error"!=t.status||a.sort($(e.from).data("originalOrder")),a.option("disabled",!1),$(e.from).data("originalOrder",a.toArray())})}}});t.data("originalOrder",a.toArray())}}),$("#clear-cache").click(function(){new Request({method:"POST",url:Utils.uriPrependBase(location.pathname,"/admin/cache/clear/"),data:{"csrf-token":$("body").data("csrf-token")}},function(t){Notification(t.message,t.status,5e3)})}),$(".editor-textarea").each(function(){new Editor($(this).attr("id"))})});var Editor=function(t){textarea=$("#"+t)[0];var e=".editor-toolbar[data-for="+t+"]";function a(){return/\n+===\n+/.test(textarea.value)}function n(){$("[data-command=summary]",e).attr("disabled",a())}function o(t){var e=t.selectionStart;return 0===e?void 0:t.value.substring(e-1,e)}function s(t,e,a){void 0===a&&(a=e);var n=t.selectionStart,i=t.selectionEnd,o=n===i?"":t.value.substring(n,i);t.value=t.value.substring(0,n)+e+o+a+t.value.substring(i,t.value.length),t.setSelectionRange(n+e.length,n+e.length+o.length),$(t).blur().focus()}n(),$(textarea).keyup(Utils.debounce(n,1e3)),$("[data-command=bold]",e).click(function(){s(textarea,"**")}),$("[data-command=italic]",e).click(function(){s(textarea,"_")}),$("[data-command=ul]",e).click(function(){var t=o(textarea);s(textarea,void 0===t?"- ":("\n"===t?"\n":"\n\n")+"- ","")}),$("[data-command=ol]",e).click(function(){var t,e,a=o(textarea),n="\n"===a?"\n":"\n\n",i=/^\d+\./.exec((t=textarea.value,-1==(e=t.lastIndexOf("\n"))?t:t.substring(e+1)));s(textarea,i?"\n"+(parseInt(i)+1)+". ":void 0===a?"1. ":n+"1. ","")}),$("[data-command=quote]",e).click(function(){var t=o(textarea);s(textarea,void 0===t?"> ":("\n"===t?"\n":"\n\n")+"> ","")}),$("[data-command=link]",e).click(function(){var t=textarea.selectionStart,e=textarea.selectionEnd,a=t===e?"":textarea.value.substring(t,e),n=textarea.value.substring(0,t),i=textarea.value.substring(e,textarea.value.length);/^(https?:\/\/|mailto:)/i.test(a)?(textarea.value=n+"[]("+a+")"+i,textarea.focus(),textarea.setSelectionRange(t+1,t+1)):""!==a?(textarea.value=n+"["+a+"](http://)"+i,textarea.focus(),textarea.setSelectionRange(t+a.length+10,t+a.length+10)):s(textarea,"[","](http://)")}),$("[data-command=image]",e).click(function(){var t=o(textarea),e="\n\n";"\n"===t?e="\n":void 0===t&&(e=""),s(textarea,e+"![](",")")}),$("[data-command=summary]",e).click(function(){var t=o(textarea);a()||(console.log(t),s(textarea,(void 0===t||"\n"===t?"":"\n")+"\n===\n\n",""),$(this).attr("disabled",!0))})},Form=function(t){var e=$(t),a=function(){return e.serialize()!=e.data("original-data")};return e.data("original-data",e.serialize()),$(window).on("beforeunload",function(){if(a())return!0}),e.submit(function(){$(window).off("beforeunload")}),$('a[href]:not([href^="#"]):not([target="_blank"])').click(function(t){if(a()){var e=this;t.preventDefault(),Modal.show("changesModal",null,function(t){t.find(".button-continue").click(function(){$(window).off("beforeunload"),window.location.href=$(this).data("href")}).attr("data-href",e.href)})}}),{hasChanged:a}},Notification=function(t,e,a){var n=!1;if(0<$(".notification").length){var i=$(".notification:last");n=i.offset().top+i.outerHeight(!0)}var o=$("<div>",{class:"notification"}).text(t).appendTo("body");n&&o.css("top",n),e&&o.addClass("notification-"+e),setTimeout(function(){offset=o.outerHeight(!0),$(".notification").each(function(){var t=$(this);t.is(o)?t.addClass("fadeout"):t.css("top","-="+offset)}),setTimeout(function(){o.remove()},400)},a)},Request=function(t,e){var a=$.ajax(t);return"function"==typeof e&&a.always(function(){var t=a.responseJSON||{};403==(t.code||a.status)?location.reload():e(t,a)}),a},Tooltip=function(t,e,s){var a={container:document.body,position:"top",offset:{x:0,y:0},delay:500};s=$.extend({},a,s);var n,r=$(t);function i(){n=setTimeout(function(){var t=$('<div class="tooltip" role="tooltip">');t.appendTo(s.container),t.text(e),t.css(function(t){var e=Utils.offset(r[0]),a=e.top,n=e.left,i=(r.outerWidth()-t.outerWidth())/2,o=(r.outerHeight()-t.outerHeight())/2;switch(s.position){case"top":return{top:Math.round(a-t.outerHeight()+s.offset.y),left:Math.round(n+i+s.offset.x)};case"right":return{top:Math.round(a+o+s.offset.y),left:Math.round(n+r.outerWidth()+s.offset.x)};case"bottom":return{top:Math.round(a+r.outerHeight()+s.offset.y),left:Math.round(n+i+s.offset.x)};case"left":return{top:Math.round(a+o+s.offset.y),left:Math.round(n-t.outerWidth()+s.offset.x)}}}(t)).fadeIn(200)},s.delay)}return r.on("mouseout",function(){clearTimeout(n),$(".tooltip").fadeOut(100,function(){$(this).remove()})}),i(),{show:i}};!function(f){f.fn.datePicker=function(u){var i,o,t=new Date,s={year:t.getFullYear(),month:t.getMonth(),day:t.getDate(),setDate:function(t){this.year=t.getFullYear(),this.month=t.getMonth(),this.day=t.getDate()},lastDay:function(){this.day=h.daysInMonth(this.month,this.year)},prevYear:function(){this.year--},nextYear:function(){this.year++},prevMonth:function(){this.month=h.mod(this.month-1,12),11==this.month&&this.prevYear(),this.day>h.daysInMonth(this.month,this.year)&&this.lastDay()},nextMonth:function(){this.month=h.mod(this.month+1,12),0==this.month&&this.nextYear(),this.day>h.daysInMonth(this.month,this.year)&&this.lastDay()},prevWeek:function(){this.day-=7,this.day<1&&(this.prevMonth(),this.day+=h.daysInMonth(this.month,this.year))},nextWeek:function(){this.day+=7,this.day>h.daysInMonth(this.month,this.year)&&(this.day-=h.daysInMonth(this.month,this.year),this.nextMonth())},prevDay:function(){this.day--,this.day<1&&(this.prevMonth(),this.lastDay())},nextDay:function(){this.day++,this.day>h.daysInMonth(this.month,this.year)&&(this.nextMonth(),this.day=1)}},h={_daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],mod:function(t,e){return(t%e+e)%e},pad:function(t){return 1==t.toString().length?"0"+t:t},isValidDate:function(t){return t&&!isNaN(Date.parse(t))},isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},daysInMonth:function(t,e){return 1==t&&this.isLeapYear(e)?29:this._daysInMonth[t]},formatDateTime:function(t){var e=u.format,a=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),o=t.getHours(),s=t.getMinutes(),r=t.getSeconds(),l=o<12;return-1<e.indexOf("a")&&(o=0<h.mod(o,12)?h.mod(o,12):12),e.replace("YYYY",a).replace("YY",a.toString().substr(-2)).replace("MM",h.pad(n)).replace("DD",h.pad(i)).replace("hh",h.pad(o)).replace("mm",h.pad(s)).replace("ss",h.pad(r)).replace("a",l?"AM":"PM")}};function r(){var t=new Date(s.year,s.month,s.day);e(s.year,s.month,s.day),i.val(h.formatDateTime(t)),i.data("date",t)}function e(t,e,a){var n=1,i=new Date(t,e,1).getDay(),o=h.daysInMonth(e,t),s=u.monthLabels[e],r=h.mod(i-u.weekStarts,7),l='<table class="calendar-table">';l+='<tr><th class="calendar-header" colspan="7">',l+=s+"&nbsp;"+t,l+="</th></tr>",l+="<tr>";for(var c=0;c<7;c++)l+='<td class="calendar-header-day">',l+=u.dayLabels[h.mod(c+u.weekStarts,7)],l+="</td>";l+="</tr><tr>";for(c=0;c<6;c++){for(var d=0;d<7;d++)n<=o&&(0<c||r<=d)?(l+=n==a?'<td class="calendar-day selected">':'<td class="calendar-day">',l+=n++):1==n?(l+='<td class="calendar-prev-month-day">',l+=h.daysInMonth(h.mod(e-1,12),t)-r+d+1):(l+='<td class="calendar-next-month-day">',l+=n++-o),l+="</td>";l+="</tr><tr>"}l+="</tr></table>",f(".calendar-table").replaceWith(l)}function a(){i&&o.is(":visible")&&(o.css({top:i.offset().top+i.outerHeight(),left:i.offset().left}),o.offset().left+o.outerWidth(!0)>f(window).width()&&o.css("left",f(window).width()-o.outerWidth(!0)),f(window).scrollTop()+f(window).height()<o.position().top+o.outerHeight(!0)&&f(window).scrollTop(o.position().top+o.outerHeight(!0)-f(window).height()))}u=f.extend({},f.fn.datePicker.defaults,u),this.each(function(){var n=f(this),t=n.val();n.prop("readonly",!0),n.prop("size",u.format.length),h.isValidDate(t)&&(t=new Date(t),n.data("date",t),n.val(h.formatDateTime(t))),n.change(function(){""==f(this).val()?f(this).data("date",""):n.val(h.formatDateTime(n.data("date")))}),n.keydown(function(t){var e=f(this).data("date");switch(s.setDate(h.isValidDate(e)?e:new Date),t.which){case 13:return f(".calendar-day.selected").click(),o.hide(),!1;case 8:n.val("");case 27:return i.blur(),o.hide(),!1;case 37:t.ctrlKey||t.metaKey?t.shiftKey?s.prevYear():s.prevMonth():s.prevDay();break;case 38:s.prevWeek();break;case 39:t.ctrlKey||t.metaKey?t.shiftKey?s.nextYear():s.nextMonth():s.nextDay();break;case 40:s.nextWeek();break;case 48:if(t.ctrlKey||t.metaKey){var a=new Date;s.setDate(a)}break;default:return!0}return r(),!1})}),o=f('<div class="calendar"><div class="calendar-buttons"><button class="prevMonth"><i class="i-chevron-left"></i></button><button class="currentMonth">'+u.todayLabel+'</button><button class="nextMonth"><i class="i-chevron-right"></i></button></div><div class="calendar-separator"></div><table class="calendar-table"></table>').appendTo("body"),f(".currentMonth").click(function(){var t=new Date;s.setDate(t),r(),i.blur()}),f(".prevMonth").longclick(function(){s.prevMonth(),e(s.year,s.month)},750,500),f(".nextMonth").longclick(function(){s.nextMonth(),e(s.year,s.month)},750,500),f(".prevMonth, .currentMonth, .nextMonth").mousedown(function(){return!1}),o.on("mousedown",".calendar-day",!1),o.on("click",".calendar-day",function(){var t=new Date(s.year,s.month,parseInt(f(this).text()));i.data("date",t),i.val(h.formatDateTime(t)),i.blur()}),f(".date-input").blur(function(){o.hide()}),f(".date-input").focus(function(){i=f(this);var t=h.isValidDate(i.data("date"))?new Date(i.data("date")):new Date;s.setDate(t),e(s.year,s.month,s.day),o.show(),a()}),f(window).on("touchstart",function(){var t=f(event.target);t.is(".date-input")||t.parents(".calendar, .date-input").length||i.blur()}),f(window).on("resize",Utils.throttle(a,100))},f.fn.datePicker.defaults={dayLabels:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthLabels:["January","February","March","April","May","June","July","August","September","October","November","December"],weekStarts:0,todayLabel:"Today",format:"YYYY-MM-DD"}}(jQuery),function(t){t.fn.longclick=function(e,a,n){var i;function o(){clearTimeout(i)}t(window).mouseup(o),t(this).mousedown(function(t){1!=t.which?o():(e(),i=window.setTimeout(function(){i=window.setInterval(e,n||250)},a||500))}).mouseout(o)}}(jQuery),function(r){r.fn.tagInput=function(){function i(t){var e=t.parent();e.find(".tag-hidden-input").val(e.data("tags").join(", "))}function o(t,e){t.before('\n<span class="tag">'+e+'<i class="tag-remove"></i></span>')}function n(t,e){-1==t.parent().data("tags").indexOf(e)&&(t.parent().data("tags").push(e),o(t,e),i(t)),t.val("")}function s(t,e){var a=t.parent().data("tags"),n=a.indexOf(e);-1<n&&(a.splice(n,1),t.parent().data("tags",a),i(t))}this.each(function(){var t=r(this).find(".tag-hidden-input"),a=r(this).find(".tag-inner-input"),n=[];t.val()&&(n=t.val().split(", "),r.each(n,function(t,e){e=e.trim(),n[t]=e,o(a,e)})),r(this).data("tags",n),r(this).on("mousedown",".tag-remove",!1),r(this).on("click",".tag-remove",function(){var t=r(this).parent();return s(a,t.text()),t.remove(),!1})}),this.mousedown(function(){return r(this).find(".tag-inner-input").focus(),!1}),this.find(".tag-inner-input").focus(function(){r(this).parent().addClass("focused")}).blur(function(){var t=r(this).val().trim();""!=t&&(n(r(this),t),r(this).prop("size",1)),r(this).parent().removeClass("focused")}).keydown(function(t){var e=r(this),a=e.val().trim();switch(t.which){case 8:return""===a?(s(e,e.prev().text()),e.prev().remove(),e.prop("size",1),!1):(e.prop("size",Math.max(e.val().length,1)),!0);case 13:case 188:return""!=a&&n(e,a),e.prop("size",1),!1;default:if(""!==a&&-1<[32].indexOf(t.which))return n(e,a),e.prop("size",1),!1;e.prop("size",e.val().length+2)}})}}(jQuery);var Chart=function(t,e){new Chartist.Line(t,e,{showArea:!0,fullWidth:!0,scaleMinSpace:20,divisor:5,chartPadding:20,lineSmooth:!1,low:0,axisX:{showGrid:!1,labelOffset:{x:0,y:10}},axisY:{onlyInteger:!0,offset:15,labelOffset:{x:0,y:5}}})};$(function(){$("[data-chart-data]").each(function(){new Chart(this,$(this).data("chart-data"))}),$(".ct-chart").on("mouseover",".ct-point",function(){new Tooltip($(this),$(this).attr("ct:value"),{offset:{x:0,y:-8}})})});var ImagePicker=void $(function(){$(".image-input").click(function(){var e=$(this),a=e.val();Modal.show("imagesModal",null,function(t){t.find(".image-picker-confirm").data("target",e),t.find(".image-picker-thumbnail").each(function(){if($(this).data("text")==a)return $(this).addClass("selected"),!1})})}),$(".image-picker").each(function(){for(var t=$(this),e=t.children("option"),a=$("<div>",{class:"image-picker-thumbnails"}),n=0;n<e.length;n++)$("<div>",{class:"image-picker-thumbnail","data-value":e[n].value,"data-text":e[n].text}).css({"background-image":"url("+e[n].value+")"}).appendTo(a);t.before(a),t.hide()}),$(".image-picker-confirm").click(function(){$(this).data("target").val($(this).parent().find(".image-picker-thumbnail.selected").data("text"))}),$(".image-picker-thumbnail").click(function(){$(this).siblings().removeClass("selected"),$(this).addClass("selected"),$(this).parent().siblings(".image-input").val($(this).data("value"))})}),Modal=($(function(){$(".modal [data-dismiss]").click(function(){$(this).is("[data-validate]")&&!Modal.validate($(this).data("dismiss"))||Modal.hide($(this).data("dismiss"))}),$(".modal").click(function(t){t.target===this&&Modal.hide()})}),{show:function(t,e,a){var n=$("#"+t);n.addClass("show"),null!==e&&n.find("form").attr("action",e),n.find("[autofocus]").first().focus(),"function"==typeof a&&a(n),this.createBackdrop()},hide:function(t){(void 0===t?$(".modal"):$("#"+t)).removeClass("show"),this.removeBackdrop()},createBackdrop:function(){$(".modal-backdrop").length||$("<div>",{class:"modal-backdrop"}).appendTo("body")},removeBackdrop:function(){$(".modal-backdrop").remove()},validate:function(t){var e=!1,a=$("#"+t);return a.find("[required]").each(function(){if(""===$(this).val())return $(this).addClass("animated shake"),$(this).focus(),a.find(".modal-error").show(),e=!1;e=!0}),e}}),Utils={debounce:function(t,e,a){var n,i,o=null;return function(){n=this,i=arguments,o&&clearTimeout(o),a&&!o&&t.apply(n,i),o=setTimeout(function(){a||t.apply(n,i),o=null},e)}},escapeRegExp:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},offset:function(t){var e=t.getBoundingClientRect(),a=document.documentElement,n=document.body,i=window.pageXOffset||a.scrollLeft||n.scrollLeft,o=window.pageYOffset||a.scrollTop||n.scrollTop;return{top:e.top+o,left:e.left+i}},slug:function(t){var e,a={"\t":"","\r":"","!":"",'"':"","#":"",$:"","%":"","'":"","(":"",")":"","*":"","+":"",",":"",".":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","]":"","^":"","`":"","{":"","|":"","}":"","¡":"","£":"","¤":"","¥":"","¦":"","§":"","«":"","°":"","»":"","‘":"","’":"","“":"","”":"","\n":"-"," ":"-","-":"-","–":"-","—":"-","/":"-","\\":"-",_:"-","~":"-","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"Ae","Ç":"C","Ð":"D","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Œ":"Oe","Š":"S","Þ":"Th","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","à":"a","á":"a","â":"a","ã":"a","ä":"ae","å":"a","æ":"ae","¢":"c","ç":"c","ð":"d","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"oe","ø":"o","œ":"oe","š":"s","ß":"ss","þ":"th","ù":"u","ú":"u","û":"u","ü":"ue","ý":"y","ÿ":"y","Ÿ":"y"};for(e in t=t.toLowerCase(),a)t=t.split(e).join(a[e]);return t.replace(/[^a-z0-9-]/g,"").replace(/^-+|-+$/g,"").replace(/-+/g,"-")},throttle:function(e,a){var n,i,o=null;return function t(){n=this,i=arguments,o||(e.apply(n,i),o=setTimeout(function(){t.apply(n,i),o=null},a))}},uriPrependBase:function(t,e){var a=/^\/+|\/+$/im;for(t=t.replace(a,"").split("/"),e=e.replace(a,"").split("/"),i=0;i<t.length;i++)t[i]===e[0]&&t[i+1]!==e[0]&&(t=t.slice(0,i));return"/"+t.concat(e).join("/")+"/"}};